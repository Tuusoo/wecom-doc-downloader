<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>查询付款记录 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        查询付款记录
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2023/08/01</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="81d62ed473d274b4697b19253707d8c1" data-type="p" data-lines="1">说明：「向员工付款」功能暂不支持新增，已开通商户的功能使用不受影响。</p><h2 id="api%E6%8E%A5%E5%8F%A3%E5%8D%8F%E8%AE%AE" data-sign="a62817f224b7ff325b52ca54b6971031" data-lines="1"><a class="anchor" href="#api%E6%8E%A5%E5%8F%A3%E5%8D%8F%E8%AE%AE"></a>API接口协议</h2><p data-sign="96c5db95778933bbe3194f8109afe6b9" data-type="p" data-lines="2">用于商户的企业微信企业付款操作进行结果查询，返回付款操作详细结果。<br>查询企业微信企业付款API只支持查询30天内的订单，30天之前的订单请登录商户平台查询。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="c421fae402c12ece2c07b5158ba4f216" data-type="p" data-lines="4"><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong>https://api.mch.weixin.qq.com/mmpaymkttransfers/promotion/querywwsptrans2pocket<br><strong>是否需要证书：</strong>请求需要双向证书。 详见证书使用<br><strong>数据格式：</strong>xml</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="2"><strong>请求示例：</strong></p><div data-sign="83a01c6222eb99154023fc4819d456dd" data-type="codeBlock" data-lines="12">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>xml<span class="token operator">&gt;</span></span>
<span class="code-line">     <span class="token operator">&lt;</span>sign<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token constant">E1EE61A91C8E90F299DE6AE075D60A2D</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sign<span class="token operator">&gt;</span></span>
<span class="code-line">     <span class="token operator">&lt;</span>partner_trade_no<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token number">0010010404201411170000046545</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>partner_trade_no<span class="token operator">&gt;</span></span>
<span class="code-line">     <span class="token operator">&lt;</span>mch_id <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token number">10000097</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>mch_id <span class="token operator">&gt;</span></span>
<span class="code-line">     <span class="token operator">&lt;</span>appid<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>wxe062425f740c8888<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>appid<span class="token operator">&gt;</span></span>
<span class="code-line">     <span class="token operator">&lt;</span>nonce_str<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token number">50780e0</span>cca98c8c8e814883e5caa672e<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>nonce_str<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>xml<span class="token operator">&gt;</span></span>
<span class="code-line"></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="3b4bfbbe41debf87d78f70d349a9f51f" data-type="p" data-lines="21"> <strong>参数说明：</strong><br><style>table{    table-layout:fixed;}table th:first-of-type {    width: 14%;}table th:nth-of-type(2) {    width: 14%;}table th:nth-of-type(3) {    width: 14%;}table th:nth-of-type(4) {    width: 14%;}table th:nth-of-type(5) {    width: 14%;}</style></p><div class="cherry-table-container" data-sign="5da05b78b4a3bec4b83b61588fbb5dca" data-lines="7">
        <table class="cherry-table"><thead><tr><th>字段名</th><th>字段</th><th>必填</th><th>示例值</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>随机字符串</td><td>nonce_str</td><td>是</td><td>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</td><td>String(32)</td><td>随机字符串，不长于32位</td></tr><tr><td>微信支付签名</td><td>sign</td><td>是</td><td>C380BEC2BFD727A4B6845133519F3AD6</td><td>String(32)</td><td>参见“<a href="#11652" rel="nofollow">签名算法</a>”</td></tr><tr><td>商户订单号</td><td>partner_trade_no</td><td>是</td><td>10000098201411111234567890</td><td>String(28)</td><td>商户调用企业微信企业付款API时使用的商户订单号</td></tr><tr><td>商户号</td><td>mch_id</td><td>是</td><td>10000098</td><td>String(32)</td><td>微信支付分配的商户号</td></tr><tr><td>Appid</td><td>appid</td><td>是</td><td>wxe062425f740d30d8</td><td>String(128)</td><td>商户号的appid</td></tr></tbody></table></div><p data-sign="0b789d7580f376b3feaff0d57431f7b7" data-type="p" data-lines="2"><strong>返回结果 ：</strong></p><div data-sign="b349afc7ef3ea97eef6cc89ceffe82d2" data-type="codeBlock" data-lines="20">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>xml<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>return_code<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token constant">SUCCESS</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>return_code<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>return_msg<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>获取成功<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>return_msg<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>result_code<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token constant">SUCCESS</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result_code<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>mch_id<span class="token operator">&gt;</span><span class="token number">10000098</span><span class="token operator">&lt;</span><span class="token operator">/</span>mch_id<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>appid<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>wxe062425f740c30d8<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>appid<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>detail_id<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token number">1000000000201503283103439304</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>detail_id<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>partner_trade_no<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token number">0010010404201411170000046545</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>partner_trade_no<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>status<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token constant">SUCCESS</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>status<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>payment_amount<span class="token operator">&gt;</span><span class="token number">100</span><span class="token operator">&lt;</span><span class="token operator">/</span>payment_amount <span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>openid <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>oxTWIuGaIt6gTKsQRLau2M0yL16E<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>openid<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>transfer_time<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">22</span> <span class="token number">20</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>transfer_time<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>transfer_name <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>测试<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>transfer_name <span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>desc<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>付款测试<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>desc<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>xml<span class="token operator">&gt;</span></span>
<span class="code-line"></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="fd349f5b366c476773faead078956a92" data-type="p" data-lines="1"><strong>返回参数:</strong></p><div class="cherry-table-container" data-sign="f850ddec77038a9ed3003b3861b1585d" data-lines="4">
        <table class="cherry-table"><thead><tr><th>字段名</th><th>字段</th><th>必填</th><th>示例值</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>返回状态码</td><td>return_code</td><td>是</td><td>SUCCESS</td><td>String(16)</td><td>SUCCESS/FAIL此字段是通信标识，非交易标识，交易是否成功需要查看result_code来判断</td></tr><tr><td>返回信息</td><td>return_msg</td><td>否</td><td>签名失败</td><td>String(128)</td><td>返回信息，如非空，为错误原因</td></tr></tbody></table></div><p data-sign="bcbd2701aadd16c0d0807353a7dcde9d" data-type="p" data-lines="2"><strong>以下字段在return_code为SUCCESS的时候有返回:</strong></p><div class="cherry-table-container" data-sign="e6277bbc83b879e5ac2f9b4299e3b0cd" data-lines="5">
        <table class="cherry-table"><thead><tr><th>字段名</th><th>字段</th><th>必填</th><th>示例值</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>业务结果</td><td>result_code</td><td>是</td><td>SUCCESS</td><td>String(16)</td><td>SUCCESS/FAIL</td></tr><tr><td>错误代码</td><td>err_code</td><td>否</td><td>SYSTEMERROR</td><td>String(32)</td><td>错误码信息</td></tr><tr><td>错误代码描述</td><td>err_code_des</td><td>否</td><td>系统错误</td><td>String(128)</td><td>结果信息描述</td></tr></tbody></table></div><p data-sign="68ffd80abb27f7b3f0f071365d0ca139" data-type="p" data-lines="2"><strong>以下字段在return_code 和result_code都为SUCCESS的时候有返回:</strong></p><div class="cherry-table-container" data-sign="9377cb2934c8f66da82f6c36795d743d" data-lines="12">
        <table class="cherry-table"><thead><tr><th>字段名</th><th>字段</th><th>必填</th><th>示例值</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>商户订单号</td><td>partner_trade_no</td><td>是</td><td>10000098201411111234567890</td><td>String(32)</td><td>商户使用查询API填写的单号的原路返回</td></tr><tr><td>商户号</td><td>mch_id</td><td>是</td><td>10000098</td><td>String(32)</td><td>微信支付分配的商户号</td></tr><tr><td>付款单号</td><td>detail_id</td><td>是</td><td>1000000000201503283103439304</td><td>String(64)</td><td>调用企业微信企业付款API时，微信系统内部产生的单号</td></tr><tr><td>转账状态</td><td>status</td><td>是</td><td>SUCCESS</td><td>string(16)</td><td>SUCCESS:转账成功  FAILED:转账失败  PROCESSING:处理中</td></tr><tr><td>失败原因</td><td>reason</td><td>否</td><td>余额不足</td><td>String(128)</td><td>如果失败则有失败原因</td></tr><tr><td>收款用户openid</td><td>openid</td><td>是</td><td>oxTWIuGaIt6gTKsQRLau2M0yL16E</td><td>String(64)</td><td>转账的openid</td></tr><tr><td>收款用户姓名</td><td>transfer_name</td><td>否</td><td>马华</td><td>String(64)</td><td>收款用户姓名</td></tr><tr><td>付款金额</td><td>payment_amount</td><td>是</td><td>5000</td><td>int</td><td>付款金额单位分</td></tr><tr><td>转账时间</td><td>transfer_time</td><td>是</td><td>2015-04-21 20:00:00</td><td>String(32)</td><td>发起转账的时间</td></tr><tr><td>付款描述</td><td>desc</td><td>是</td><td>用车补贴</td><td>String(100)</td><td>付款时候的描述</td></tr></tbody></table></div><p data-sign="18860e6f624313d459fd72dd4e8bd379" data-type="p" data-lines="2"><strong>错误码:</strong></p><div class="cherry-table-container" data-sign="beb7cd5c669a92eac852a66d79e32d4c" data-lines="12">
        <table class="cherry-table"><thead><tr><th>错误码</th><th>错误描述</th><th>解决方式</th></tr></thead><tbody><tr><td>CA_ERROR</td><td>请求未携带证书，或请求携带的证书出错</td><td>到商户平台下载证书，请求带上证书后重试</td></tr><tr><td>SIGN_ERROR</td><td>微信支付签名错误</td><td>按文档要求重新生成签名后再重试</td></tr><tr><td>NO_AUTH</td><td>没有权限</td><td>请联系微信支付开通api权限</td></tr><tr><td>FREQ_LIMIT</td><td>受频率限制</td><td>请对请求做频率控制</td></tr><tr><td>XML_ERROR</td><td>请求的xml格式错误，或者post的数据为空</td><td>检查请求串，确认无误后重试</td></tr><tr><td>PARAM_ERROR</td><td>参数错误</td><td>请查看err_code_des，修改设置错误的参数</td></tr><tr><td>SYSTEMERROR</td><td>系统繁忙，请再试</td><td>系统繁忙</td></tr><tr><td>NOT_FOUND</td><td>指定单号数据不存在</td><td>查询单号对应的数据不存在，请使用正确的商户订单号查询</td></tr><tr><td>WORKWX_MCHID_ERROR</td><td>企业微信商户号和企业关系校验失败</td><td>确认是否已经绑定商户号和企业微信的关系</td></tr><tr><td>WORKWX_SIGN_ERROR</td><td>企业微信签名错误</td><td>按文档要求重新生成签名后再重试</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>