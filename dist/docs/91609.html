<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>发送「学校通知」 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        发送「学校通知」
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2022/05/23</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="517d38f3efb9c1a8e8d452ca90fe2631-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E6%A6%82%E8%BF%B0" class="level-2">概述</a></li><li class="toc-li"><a href="#%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89" class="level-2">接口定义</a></li><li class="toc-li"><a href="#%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B" class="level-2">消息类型</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E6%9C%AC%E6%B6%88%E6%81%AF" class="level-3">文本消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E7%89%87%E6%B6%88%E6%81%AF" class="level-3">图片消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%AF%AD%E9%9F%B3%E6%B6%88%E6%81%AF" class="level-3">语音消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%A7%86%E9%A2%91%E6%B6%88%E6%81%AF" class="level-3">视频消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E4%BB%B6%E6%B6%88%E6%81%AF" class="level-3">文件消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF" class="level-3">图文消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF%EF%BC%88mpnews%EF%BC%89" class="level-3">图文消息（mpnews）</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B6%88%E6%81%AF" class="level-3">小程序消息</a></li></dir><h2 id="%E6%A6%82%E8%BF%B0" data-sign="9a8437ccee43ad66c084b8dfd3d259d3" data-lines="2"><a class="anchor" href="#%E6%A6%82%E8%BF%B0"></a>概述</h2><p data-sign="71579114de74f2b4c6f4cb0dbb3d7a74" data-type="p" data-lines="1">学校可以通过此接口来给家长发送不同类型的学校通知，来满足多种场景下的学校通知需求。目前支持的消息类型为文本、图片、语音、视频、文件、图文。</p><h2 id="%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89" data-sign="b0c4fa5af57e92d8d68dedac05f1ccfe" data-lines="2"><a class="anchor" href="#%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"></a>接口定义</h2><p data-sign="39648ee3b9f8f9f0d42ff71be5b088f3" data-type="p" data-lines="3"> <br><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong> https://qyapi.weixin.qq.com/cgi-bin/externalcontact/message/send?access_token=ACCESS_TOKEN</p><p data-sign="04960833317a8fd671d9338bb9535a81" data-type="p" data-lines="2"><strong>参数说明：</strong><br> </p><div class="cherry-table-container" data-sign="c2ad9821e76cb02e5e6c4c3e8953e085" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证</td></tr></tbody></table></div><blockquote data-sign="2fe161d4a7305dfa97bb16aa85f1ca2b_2" data-lines="2">各个消息类型的具体POST格式参考以下文档。<br>支持id转译，将userid/部门id转成对应的企业通讯录内部的用户名/部门名，目前仅<strong>文本/图文/图文（mpnews）/小程序消息</strong>这四种消息类型的<strong>部分字段</strong>支持。具体支持的范围和语法，请查看附录<a href="#10167/id%E8%BD%AC%E8%AF%91%E8%AF%B4%E6%98%8E" rel="nofollow">id转译说明</a>。<br>支持重复消息检查，当指定 <code>"enable_duplicate_check": 1</code>开启: 表示在一定时间间隔内，同样内容（请求json）的消息，不会重复收到；时间间隔可通过<code>duplicate_check_interval</code>指定，默认<code>1800秒</code>。</blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><ul data-sign="37e7e93f8bde67d6c97e0f459e8cd434list1" data-lines="1" class="cherry-list__default"><li>学校管理员需要将应用配置在「家长可使用的应用」才可调用</li></ul><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="cc39e7d843cf38f5c4bc1ce95b65cf90" data-type="p" data-lines="2"> <strong>返回示例：</strong><br> </p><div data-sign="01d30d2f6cf5894d0b52a182820efaa6" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">  <span class="token string">"errcode"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"errmsg"</span> <span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"invalid_parent_userid"</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"invalid_student_userid"</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"invalid_party"</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"party1"</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><blockquote data-sign="1aef1ac31c48407e3f863220299a73d5_2" data-lines="2">如果部分接收人无权限或不存在，发送仍然执行，但会返回无效的部分（invalid_parent_userid/invalid_student_userid/invalid_party）。</blockquote><h2 id="%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B" data-sign="770eda0a918142e2f2cb206a05d6743a" data-lines="2"><a class="anchor" href="#%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B"></a>消息类型</h2><h3 id="%E6%96%87%E6%9C%AC%E6%B6%88%E6%81%AF" data-sign="00bd5ad70e6a422c73658a35dc95c3a7" data-lines="2"><a class="anchor" href="#%E6%96%87%E6%9C%AC%E6%B6%88%E6%81%AF"></a>文本消息</h3><p data-sign="fa377d970a64d86d33472be9b167002f" data-type="p" data-lines="1"> <strong>请求示例：</strong></p><div data-sign="e74386551e8fca2901f7be93da92cff9" data-type="codeBlock" data-lines="18">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"text"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"content"</span> <span class="token operator">:</span> <span class="token string">"你的快递已到，请携带工卡前往邮件中心领取。\n出发前可查看&lt;a href=\"</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>work<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>qq<span class="token punctuation">.</span>com\<span class="token string">"&gt;邮件中心视频实况&lt;/a&gt;，聪明避开排队。"</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="5611262935c3e47868128d4633f2925c" data-lines="13">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：text</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。可在应用的设置页面查看</td></tr><tr><td>content</td><td>是</td><td>消息内容，最长不超过2048个字节<strong>（支持id转译）</strong></td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h3 id="%E5%9B%BE%E7%89%87%E6%B6%88%E6%81%AF" data-sign="0183c545485256ae58601a39f80fb0c4" data-lines="2"><a class="anchor" href="#%E5%9B%BE%E7%89%87%E6%B6%88%E6%81%AF"></a>图片消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="29ab3f103b3eed27551d91f1c1c76eb3" data-type="codeBlock" data-lines="17">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"image"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="25dc236983d258c66e39f907f7c7cc33" data-type="p" data-lines="2"><strong>请求参数：</strong></p><div class="cherry-table-container" data-sign="ded5ceb2f8a901c38f045240fc8f0995" data-lines="12">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：image</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。可在应用的设置页面查看</td></tr><tr><td>media_id</td><td>是</td><td>图片媒体文件id，可以调用上传临时素材接口获取</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h3 id="%E8%AF%AD%E9%9F%B3%E6%B6%88%E6%81%AF" data-sign="582e7c6ac7be4c42bda7bc0e11b34134" data-lines="1"><a class="anchor" href="#%E8%AF%AD%E9%9F%B3%E6%B6%88%E6%81%AF"></a>语音消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="8907e17b27f48173effeb6942995fad7" data-type="codeBlock" data-lines="17">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"voice"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"voice"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="4230eec61283ad53d8f0e1e4f9603449" data-lines="12">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：voice</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。可在应用的设置页面查看</td></tr><tr><td>media_id</td><td>是</td><td>语音文件id，可以调用上传临时素材接口获取</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h3 id="%E8%A7%86%E9%A2%91%E6%B6%88%E6%81%AF" data-sign="ea3bd634d7479c7f78da99c830033997" data-lines="2"><a class="anchor" href="#%E8%A7%86%E9%A2%91%E6%B6%88%E6%81%AF"></a>视频消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="423f76f7e0bc66055c9dd4c59792c9a6" data-type="codeBlock" data-lines="19">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"video"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"video"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"Title"</span><span class="token punctuation">,</span></span>
<span class="code-line">       <span class="token string">"description"</span> <span class="token operator">:</span> <span class="token string">"Description"</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="044376cdd80d457fb4733041774c19ee" data-lines="14">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：video</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。可在应用的设置页面查看</td></tr><tr><td>media_id</td><td>是</td><td>视频媒体文件id，可以调用上传临时素材接口获取</td></tr><tr><td>title</td><td>否</td><td>视频消息的标题，不超过128个字节，超过会自动截断</td></tr><tr><td>description</td><td>否</td><td>视频消息的描述，不超过512个字节，超过会自动截断</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h3 id="%E6%96%87%E4%BB%B6%E6%B6%88%E6%81%AF" data-sign="4a62a41fa95c6c5da0265acdc16b2c4d" data-lines="2"><a class="anchor" href="#%E6%96%87%E4%BB%B6%E6%B6%88%E6%81%AF"></a>文件消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="2c653e6f7765837434231e5216fc75ab" data-type="codeBlock" data-lines="17">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"file"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"1Yv-zXfHjSjU-7LH-GwtYqDGS-zz6w22KmWAT5COgP7o"</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="8f5c9502b7c94bfaeef301bfa3a0d852" data-lines="12">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：file</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。可在应用的设置页面查看</td></tr><tr><td>media_id</td><td>是</td><td>文件id，可以调用上传临时素材接口获取</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="a86e0666486f60090bd5dd0a511c0c93" data-type="p" data-lines="3">  <br><strong>文件消息展现：</strong><br><img src="images/91609/3d0e87b8.jpeg" style="width:360px;"></p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h3 id="%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF" data-sign="de46fe2165706d0840990b8d607dbe0a" data-lines="1"><a class="anchor" href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF"></a>图文消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="4dd003912e85d154c9b2e57bbf1a0757" data-type="codeBlock" data-lines="25">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"news"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"news"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">       <span class="token string">"articles"</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">           <span class="token punctuation">{</span></span>
<span class="code-line">               <span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"中秋节礼品领取"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"description"</span> <span class="token operator">:</span> <span class="token string">"今年中秋节公司有豪礼相送"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"url"</span> <span class="token operator">:</span> <span class="token string">"URL"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"picurl"</span> <span class="token operator">:</span> <span class="token string">"http://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png"</span></span>
<span class="code-line">           <span class="token punctuation">}</span></span>
<span class="code-line">		<span class="token punctuation">]</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="a4792a40f31c148027edd3ab189f07cd" data-lines="17">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：news</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>articles</td><td>是</td><td>图文消息，一个图文消息支持1到8条图文</td></tr><tr><td>title</td><td>是</td><td>标题，不超过128个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>description</td><td>否</td><td>描述，不超过512个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>url</td><td>是</td><td>点击后跳转的链接。</td></tr><tr><td>picurl</td><td>否</td><td>图文消息的图片链接，支持JPG、PNG格式，较好的效果为大图 1068*455，小图150*150。</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="e19be9380de5eec74047fe2fdee83f12" data-type="p" data-lines="3">  <br><strong>图文消息展现：</strong><br><img src="images/91609/ab765e8c.png" style="width:360px;"></p><h3 id="%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF%EF%BC%88mpnews%EF%BC%89" data-sign="f26c1072a2346a359cc86deef82557d5" data-lines="2"><a class="anchor" href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF%EF%BC%88mpnews%EF%BC%89"></a>图文消息（mpnews）</h3><blockquote data-sign="1b89452d63295205ab3299ed6f30cde4_1" data-lines="1">mpnews类型的图文消息，跟普通的图文消息一致，唯一的差异是图文内容存储在企业微信。<br>多次发送mpnews，会被认为是不同的图文，阅读、点赞的统计会被分开计算。</blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="7e189d13a71e72ecda0ae21a798eb5a8" data-type="codeBlock" data-lines="28">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"mpnews"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"mpnews"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">       <span class="token string">"articles"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">           <span class="token punctuation">{</span></span>
<span class="code-line">               <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"Title"</span><span class="token punctuation">,</span> </span>
<span class="code-line">               <span class="token string">"thumb_media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"author"</span><span class="token operator">:</span> <span class="token string">"Author"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"content_source_url"</span><span class="token operator">:</span> <span class="token string">"URL"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"content"</span><span class="token operator">:</span> <span class="token string">"Content"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"digest"</span><span class="token operator">:</span> <span class="token string">"Digest description"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">       <span class="token punctuation">]</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="3e96e98e755c94512dd9dab3ef9a90a7" data-lines="19">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：mpnews</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>articles</td><td>是</td><td>图文消息，一个图文消息支持1到8条图文</td></tr><tr><td>title</td><td>是</td><td>标题，不超过128个字节，超过会自动截断 <strong>（支持id转译）</strong></td></tr><tr><td>thumb_media_id</td><td>是</td><td>图文消息缩略图的media_id, 可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得。此处thumb_media_id即上传接口返回的media_id</td></tr><tr><td>author</td><td>否</td><td>图文消息的作者，不超过64个字节</td></tr><tr><td>content_source_url</td><td>否</td><td>图文消息点击“阅读原文”之后的页面链接</td></tr><tr><td>content</td><td>是</td><td>图文消息的内容，支持html标签，不超过666 K个字节 <strong>（支持id转译）</strong></td></tr><tr><td>digest</td><td>否</td><td>图文消息的描述，不超过512个字节，超过会自动截断 <strong>（支持id转译）</strong></td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h3 id="%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B6%88%E6%81%AF" data-sign="29252bbb55865441385d1848cafdaa40" data-lines="1"><a class="anchor" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B6%88%E6%81%AF"></a>小程序消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="2"><strong>请求示例：</strong></p><div data-sign="70701a6a4d750abfaaea819cb8ae0dd8" data-type="codeBlock" data-lines="22">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"recv_scope"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_parent_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"parent_userid1"</span><span class="token punctuation">,</span> <span class="token string">"parent_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_student_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"student_userid1"</span><span class="token punctuation">,</span> <span class="token string">"student_userid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"to_party"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"partyid1"</span><span class="token punctuation">,</span> <span class="token string">"partyid2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toall"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"miniprogram"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"miniprogram"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">       <span class="token string">"appid"</span><span class="token operator">:</span> <span class="token string">"APPID"</span><span class="token punctuation">,</span></span>
<span class="code-line">       <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"欢迎报名夏令营"</span><span class="token punctuation">,</span></span>
<span class="code-line">       <span class="token string">"thumb_media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">       <span class="token string">"pagepath"</span><span class="token operator">:</span> <span class="token string">"PAGE_PATH"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="cec5c4c2c4416ef84fa6bc919ca50710" data-lines="16">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>recv_scope</td><td>否</td><td>指定发送对象，0表示发送给家长，1表示发送给学生，2表示发送给家长和学生，默认为0。</td></tr><tr><td>to_parent_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录家长列表</a>，recv_scope为0或2表示发送给对应的家长，recv_scope为1忽略，（最多支持1000个）</td></tr><tr><td>to_student_userid</td><td>否</td><td><a href="#18819" rel="nofollow">家校通讯录学生列表</a>，recv_scope为0表示发送给学生的所有家长，recv_scope为1表示发送给学生，recv_scope为2表示发送给学生和学生的所有家长（最多支持1000个）</td></tr><tr><td>to_party</td><td>否</td><td><a href="#18840" rel="nofollow">家校通讯录部门列表</a>，recv_scope为0表示发送给班级的所有家长，recv_scope为1表示发送给班级的所有学生，recv_scope为2表示发送给班级的所有学生和家长（最多支持100个）</td></tr><tr><td>toall</td><td>否</td><td>1表示字段生效，0表示字段无效。recv_scope为0表示发送给学校的所有家长，recv_scope为1表示发送给学校的所有学生，recv_scope为2表示发送给学校的所有学生和家长，默认为0</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：miniprogram</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。可在应用的设置页面查看</td></tr><tr><td>appid</td><td>是</td><td>小程序appid，必须是关联到企业的小程序应用</td></tr><tr><td>title</td><td>否</td><td>小程序消息标题，最多64个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>thumb_media_id</td><td>是</td><td>小程序消息封面的mediaid，封面图建议尺寸为520*416</td></tr><tr><td>pagepath</td><td>是</td><td>点击消息卡片后进入的小程序页面路径</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="04c816f3955f39e0eecc95b603966f77" data-type="p" data-lines="2"><strong>小程序消息展现：</strong><br><img src="images/91609/c37ec40a.png" alt=""></p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>