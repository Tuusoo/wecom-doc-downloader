<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>设备管理 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        设备管理
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/04/25</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="968ef33527ba6a388d4539a037e744da-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E" class="level-2">权限说明</a></li><li class="toc-li"><a href="#%E5%AF%BC%E5%85%A5%E5%8F%AF%E4%BF%A1%E4%BC%81%E4%B8%9A%E8%AE%BE%E5%A4%87" class="level-2">导入可信企业设备</a></li><li class="toc-li"><a href="#%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF" class="level-2">获取设备信息</a></li><li class="toc-li"><a href="#%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98%E4%BD%BF%E7%94%A8%E8%AE%BE%E5%A4%87" class="level-2">获取成员使用设备</a></li><li class="toc-li"><a href="#%E5%88%A0%E9%99%A4%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF" class="level-2">删除设备信息</a></li><li class="toc-li"><a href="#%E7%A1%AE%E8%AE%A4%E4%B8%BA%E5%8F%AF%E4%BF%A1%E8%AE%BE%E5%A4%87" class="level-2">确认为可信设备</a></li><li class="toc-li"><a href="#%E9%A9%B3%E5%9B%9E%E5%8F%AF%E4%BF%A1%E8%AE%BE%E5%A4%87%E7%94%B3%E8%AF%B7" class="level-2">驳回可信设备申请</a></li></dir><p data-sign="20efac8ca47729d2b6956a2d378ea7ed" data-type="p" data-lines="2">启用了 “设备管理”的企业可以通过相关接口导入可信企业设备，获取/删除可信企业设备、可信个人设备、未知设备，并对未知设备的归属申请进行确认或驳回。</p><h2 id="%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E" data-sign="4f4cc4e357c323d1912c4c81dfaa6109" data-lines="2"><a class="anchor" href="#%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E"></a>权限说明</h2><p data-sign="c839401bd775b216392ac6ecec584ad7" data-type="p" data-lines="1">调用设备管理相关接口的应用需要满足如下的权限：</p><div class="cherry-table-container" data-sign="49a9f87ad538055497e60b5fa8e90eed" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<span style="color:#ff0000">安全与管理 - 设备管理 - 可调用接口的应用</span>」中</td></tr><tr><td>代开发应用</td><td>暂不支持</td></tr><tr><td>第三方应用</td><td>暂不支持</td></tr></tbody></table></div><p data-sign="0d9e8df569fd1af08e5af1a04c3f7f01" data-type="p" data-lines="2"> <em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></p><h2 id="%E5%AF%BC%E5%85%A5%E5%8F%AF%E4%BF%A1%E4%BC%81%E4%B8%9A%E8%AE%BE%E5%A4%87" data-sign="1f4fef4e11a3067882346fbc06f2fe3b" data-lines="2"><a class="anchor" href="#%E5%AF%BC%E5%85%A5%E5%8F%AF%E4%BF%A1%E4%BC%81%E4%B8%9A%E8%AE%BE%E5%A4%87"></a>导入可信企业设备</h2><p data-sign="ff4f62c4f9ef64bb4a5bbe5935705ebc" data-type="p" data-lines="3"><strong>请求方式</strong>：POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>:  https://qyapi.weixin.qq.com/cgi-bin/security/trustdevice/import?access_token=ACCESS_TOKEN  </p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="1"><strong>请求包体</strong></p><div data-sign="a5166f8c64b6ec47dc3d620e7b50b152" data-type="codeBlock" data-lines="31">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"device_list"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"system"</span><span class="token operator">:</span><span class="token string">"Windows"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"mac_addr"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"50:81:40:29:33:CA"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"36:27:51:DF:6E:80"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"motherboard_uuid"</span><span class="token operator">:</span><span class="token string">"MB_UUID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"harddisk_uuid"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"HD_UUID1"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"HD_UUID2"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"WINDOWS_DOMAIN"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"pc_name"</span><span class="token operator">:</span><span class="token string">"PC_001"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"system"</span><span class="token operator">:</span><span class="token string">"Mac"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"seq_no"</span><span class="token operator">:</span><span class="token string">"SEQ_NO"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"mac_addr"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"81:40:50:29:33:DB"</span></span>
<span class="code-line">			<span class="token punctuation">]</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="c169169b718d58460291f59e16064a20" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>是</td><td>应用调用凭证</td></tr><tr><td>device_list.system</td><td>string</td><td>是</td><td>设备的类型，<code>Windows</code>或<code>Mac</code></td></tr><tr><td>device_list.mac_addr</td><td>string</td><td>是</td><td>设备MAC地址，当system为<code>Windows</code>时必填，<code>Mac</code>选填，每个设备最多100个</td></tr><tr><td>device_list.motherboard_uuid</td><td>string</td><td>否</td><td>主板UUID，当system为<code>Windows</code>可选填此参数</td></tr><tr><td>device_list.harddisk_uuid</td><td>string</td><td>否</td><td>硬盘序列号，当system为<code>Windows</code>时可选填此参数，每个设备最多100个</td></tr><tr><td>device_list.domain</td><td>string</td><td>否</td><td>Windows域名，当system为<code>Windows</code>时可选填此参数</td></tr><tr><td>device_list.pc_name</td><td>string</td><td>否</td><td>Windows计算机名，当system为<code>Windows</code>时可选填此参数</td></tr><tr><td>device_list.seq_no</td><td>string</td><td>是</td><td>Mac序列号，当system为<code>Mac</code>时必填</td></tr></tbody></table></div><p data-sign="fe4e545aa2587fc077ce6344ae2953af" data-type="p" data-lines="1"><strong>调用说明</strong></p><ul data-sign="bff216cc966d2e3baefb0761c02b03delist1" data-lines="1" class="cherry-list__default"><li>每次调用最多导入100条可信企业设备记录</li></ul><p data-sign="br5" data-type="br" data-lines="5">&nbsp;</p><p data-sign="6394de01a40b78c07ec7af6eaecac7f9" data-type="p" data-lines="1"><strong>返回示例</strong></p><div data-sign="2aaf00b5665023689c9137c7288d5bbe" data-type="codeBlock" data-lines="24">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"result"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">		   <span class="token property">"device_index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">		   <span class="token property">"device_code"</span><span class="token operator">:</span><span class="token string">"49nNtYq"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"status"</span><span class="token operator">:</span><span class="token number">1</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"device_index"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"duplicated_device_code"</span><span class="token operator">:</span><span class="token string">"49nNtYq"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"status"</span><span class="token operator">:</span><span class="token number">2</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"device_index"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"status"</span><span class="token operator">:</span><span class="token number">3</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="9c30d879a34e963699faac62cc63cff5" data-lines="8">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>int32</td><td>错误码</td></tr><tr><td>errmsg</td><td>string</td><td>错误码说明</td></tr><tr><td>result.device_index</td><td>int32</td><td>导入设备记录的标识，对应请求中设备的顺序，从1开始</td></tr><tr><td>result.device_code</td><td>string</td><td>设备的唯一标识，仅导入成功的记录返回</td></tr><tr><td>result.duplicated_device_code</td><td>string</td><td>当重复导入(status=2)时，与当前导入记录冲突的设备的device_code</td></tr><tr><td>result.status</td><td>int32</td><td>导入结果，1-成功 2-重复导入 3-不支持的设备 4-数据格式错误</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF" data-sign="ba5a5ee40954bc60a54ad92aca1a561c" data-lines="1"><a class="anchor" href="#%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF"></a>获取设备信息</h2><p data-sign="1ab457eb4d0b24c7b73da2315027c2bb" data-type="p" data-lines="3"><strong>请求方式</strong>：POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>:  https://qyapi.weixin.qq.com/cgi-bin/security/trustdevice/list?access_token=ACCESS_TOKEN  </p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="1"><strong>请求包体</strong></p><div data-sign="1f269869b4a40965269dece541b79e09" data-type="codeBlock" data-lines="7">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"cursor"</span><span class="token operator">:</span><span class="token string">"CURSOR"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"limit"</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"type"</span><span class="token operator">:</span><span class="token number">1</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="160d1d5441f13d3c710220db6779a9b0" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>是</td><td>应用调用凭证</td></tr><tr><td>cursor</td><td>string</td><td>否</td><td>分页cursor,用于获取分页数据</td></tr><tr><td>type</td><td>int32</td><td>是</td><td>查询设备类型，1-可信企业设备 2-未知设备 3-可信个人设备</td></tr><tr><td>limit</td><td>int32</td><td>否</td><td>查询返回的最大记录数，最高不超过100，默认为100</td></tr></tbody></table></div><p data-sign="br6" data-type="br" data-lines="6">&nbsp;</p><p data-sign="6394de01a40b78c07ec7af6eaecac7f9" data-type="p" data-lines="1"><strong>返回示例</strong></p><div data-sign="fc9df505f466ec8fe7a4362a1adce3fd" data-type="codeBlock" data-lines="44">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"device_list"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"device_code"</span><span class="token operator">:</span><span class="token string">"49nNtYq"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"system"</span><span class="token operator">:</span><span class="token string">"Windows"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"mac_addr"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"50:81:40:29:33:CA"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"motherboard_uuid"</span><span class="token operator">:</span><span class="token string">"MB_UUID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"harddisk_uuid"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"HD_UUID1"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"WINDOWS_DOMAIN"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"pc_name"</span><span class="token operator">:</span><span class="token string">"PC_001"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"last_login_time"</span><span class="token operator">:</span><span class="token number">1681722163</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"last_login_userid"</span><span class="token operator">:</span><span class="token string">"lisi"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"confirm_timestamp"</span><span class="token operator">:</span><span class="token number">1681722163</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"confirm_userid"</span><span class="token operator">:</span><span class="token string">"lisi"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"approved_userid"</span><span class="token operator">:</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"source"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"status"</span><span class="token operator">:</span><span class="token number">5</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"device_code"</span><span class="token operator">:</span><span class="token string">"rjDTnOh"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"system"</span><span class="token operator">:</span><span class="token string">"Mac"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"seq_no"</span><span class="token operator">:</span><span class="token string">"SEQ_NO1"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"mac_addr"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"50:81:40:29:33:CA"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"source"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"status"</span><span class="token operator">:</span><span class="token number">5</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"next_cursor"</span><span class="token operator">:</span><span class="token string">"CURSOR"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="2c025176536d84bc9acf8629f5a95b89" data-lines="20">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>int32</td><td>错误码</td></tr><tr><td>errmsg</td><td>string</td><td>错误码说明</td></tr><tr><td>device.device_code</td><td>string</td><td>设备编码</td></tr><tr><td>device_list.system</td><td>string</td><td>设备的类型，<code>Windows</code>或<code>Mac</code></td></tr><tr><td>device_list.mac_addr</td><td>string</td><td>设备MAC地址</td></tr><tr><td>device_list.motherboard_uuid</td><td>string</td><td>主板UUID</td></tr><tr><td>device_list.harddisk_uuid</td><td>string</td><td>硬盘UUID</td></tr><tr><td>device_list.domain</td><td>string</td><td>Windows域</td></tr><tr><td>device_list.pc_name</td><td>string</td><td>计算机名</td></tr><tr><td>device_list.seq_no</td><td>string</td><td>Mac序列号</td></tr><tr><td>device_list.last_login_time</td><td>int32</td><td>设备最后登录时间戳</td></tr><tr><td>device_list.last_login_userid</td><td>string</td><td>设备最后登录成员userid</td></tr><tr><td>device_list.confirm_timestamp</td><td>int32</td><td>设备归属/确认时间戳</td></tr><tr><td>device_list.confirm_userid</td><td>string</td><td>设备归属/确认成员userid</td></tr><tr><td>device_list.approved_userid</td><td>string</td><td>通过申报的管理员userid</td></tr><tr><td>device_list.source</td><td>int32</td><td>设备来源 0-未知 1-成员确认 2-管理员导入 3-成员自主申报</td></tr><tr><td>device_list.status</td><td>int32</td><td>设备状态 1-已导入未登录 2-待邀请 3-待管理员确认为企业设备 4-待管理员确认为个人设备 5-已确认为可信企业设备 6-已确认为可信个人设备</td></tr><tr><td>next_cursor</td><td>string</td><td>分页游标，再下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空</td></tr></tbody></table></div><blockquote data-sign="b2080aae535a2e11ae62104c1799d63b_2" data-lines="2">注意，当获取未确认为可信企业设备的记录时，即获取status为2、4、6时，mac地址，序列号，主板UUID等将会返回脱敏数据。</blockquote><h2 id="%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98%E4%BD%BF%E7%94%A8%E8%AE%BE%E5%A4%87" data-sign="c4db016c60a2fcd41646b3f4ce950cb3" data-lines="2"><a class="anchor" href="#%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98%E4%BD%BF%E7%94%A8%E8%AE%BE%E5%A4%87"></a>获取成员使用设备</h2><p data-sign="7adeadaad6a8240d5917afdb7a116f8b" data-type="p" data-lines="3"><strong>请求方式</strong>：POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>:  https://qyapi.weixin.qq.com/cgi-bin/security/trustdevice/get_by_user?access_token=ACCESS_TOKEN  </p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="1"><strong>请求包体</strong></p><div data-sign="31f924edadaf534428dba2922e3e8e1d" data-type="codeBlock" data-lines="6">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"last_login_userid"</span><span class="token operator">:</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"type"</span><span class="token operator">:</span><span class="token number">1</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="ee8317e3c1e3675a7131d6e62aad3a5c" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>是</td><td>应用调用凭证</td></tr><tr><td>last_login_userid</td><td>string</td><td>是</td><td>最后登录的成员userid</td></tr><tr><td>type</td><td>int32</td><td>是</td><td>查询设备类型，1-可信企业设备 2-未知设备 3-可信个人设备</td></tr></tbody></table></div><p data-sign="br4" data-type="br" data-lines="4">&nbsp;</p><p data-sign="6394de01a40b78c07ec7af6eaecac7f9" data-type="p" data-lines="1"><strong>返回示例</strong></p><div data-sign="c47cc15bf453bc0019509a7994803acc" data-type="codeBlock" data-lines="43">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"device_list"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"device_code"</span><span class="token operator">:</span><span class="token string">"49nNtYq"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"system"</span><span class="token operator">:</span><span class="token string">"Windows"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"mac_addr"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"50:81:40:29:33:CA"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"motherboard_uuid"</span><span class="token operator">:</span><span class="token string">"MB_UUID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"harddisk_uuid"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"HD_UUID1"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"WINDOWS_DOMAIN"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"pc_name"</span><span class="token operator">:</span><span class="token string">"PC_001"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"last_login_time"</span><span class="token operator">:</span><span class="token number">1681722163</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"last_login_userid"</span><span class="token operator">:</span><span class="token string">"lisi"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"confirm_timestamp"</span><span class="token operator">:</span><span class="token number">1681722163</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"confirm_userid"</span><span class="token operator">:</span><span class="token string">"lisi"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"approved_userid"</span><span class="token operator">:</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"source"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"status"</span><span class="token operator">:</span><span class="token number">5</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"device_code"</span><span class="token operator">:</span><span class="token string">"rjDTnOh"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"system"</span><span class="token operator">:</span><span class="token string">"Mac"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"seq_no"</span><span class="token operator">:</span><span class="token string">"SEQ_NO1"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"mac_addr"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token string">"50:81:40:29:33:CA"</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"source"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"status"</span><span class="token operator">:</span><span class="token number">5</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="c048ebed303f75689850d29d8360147d" data-lines="19">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>int32</td><td>错误码</td></tr><tr><td>errmsg</td><td>string</td><td>错误码说明</td></tr><tr><td>device_list.device_code</td><td>string</td><td>设备编码</td></tr><tr><td>device_list.system</td><td>string</td><td>设备的类型，<code>Windows</code>或<code>Mac</code></td></tr><tr><td>device_list.mac_addr</td><td>string</td><td>设备MAC地址</td></tr><tr><td>device_list.motherboard_uuid</td><td>string</td><td>主板UUID</td></tr><tr><td>device_list.harddisk_uuid</td><td>string</td><td>硬盘UUID</td></tr><tr><td>device_list.domain</td><td>string</td><td>windows域</td></tr><tr><td>device_list.pc_name</td><td>string</td><td>计算机名</td></tr><tr><td>device_list.seq_no</td><td>string</td><td>Mac序列号</td></tr><tr><td>device_list.last_login_time</td><td>int32</td><td>设备最后登录时间戳</td></tr><tr><td>device_list.last_login_userid</td><td>string</td><td>设备最后登录成员userid</td></tr><tr><td>device_list.confirm_timestamp</td><td>int32</td><td>设备归属/确认时间戳</td></tr><tr><td>device_list.confirm_userid</td><td>string</td><td>设备归属/确认成员userid</td></tr><tr><td>device_list.approved_userid</td><td>string</td><td>通过申报的管理员userid</td></tr><tr><td>device_list.source</td><td>int32</td><td>设备来源 0-未知 1-成员确认 2-管理员导入 3-成员自主申报</td></tr><tr><td>device_list.status</td><td>int32</td><td>设备状态 1-已导入未登录 2-待邀请 3-待管理员确认为企业设备 4-待管理员确认未个人设备 5-已确认为可信企业设备 6-已确认为可信个人设备</td></tr></tbody></table></div><blockquote data-sign="b2080aae535a2e11ae62104c1799d63b_2" data-lines="2">注意，当获取未确认为可信企业设备的记录时，即获取status为2、4、6时，mac地址，序列号，主板UUID等将会返回脱敏数据。</blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E5%88%A0%E9%99%A4%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF" data-sign="39aa7aa24fa2c57a69db276793c8ff3e" data-lines="1"><a class="anchor" href="#%E5%88%A0%E9%99%A4%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF"></a>删除设备信息</h2><p data-sign="75cabf6c69fb31e4dc04d7202992884d" data-type="p" data-lines="3"><strong>请求方式</strong>：POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>:  https://qyapi.weixin.qq.com/cgi-bin/security/trustdevice/delete?access_token=ACCESS_TOKEN  </p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="1"><strong>请求包体</strong></p><div data-sign="ba03b54fad0d25de2e87257139899402" data-type="codeBlock" data-lines="10">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"type"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"device_code_list"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token string">"49nNtYq"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"rjDTnOh"</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="b2bd63431ae5753fa5250bc62863dc7a" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>是</td><td>应用调用凭证</td></tr><tr><td>type</td><td>int32</td><td>是</td><td>删除设备类型，1-可信企业设备 2-未知设备 3-可信个人设备</td></tr><tr><td>device_code_list</td><td>string</td><td>是</td><td>设备编码列表</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="fe4e545aa2587fc077ce6344ae2953af" data-type="p" data-lines="1"><strong>调用说明</strong></p><ul data-sign="3c65e44488f13cbe5503eeddaf2f767dlist1" data-lines="1" class="cherry-list__default"><li>每次调用可删除100个设备</li></ul><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><p data-sign="6394de01a40b78c07ec7af6eaecac7f9" data-type="p" data-lines="1"><strong>返回示例</strong></p><div data-sign="9425d2a02a5f96c2e9aec554e3e62ac4" data-type="codeBlock" data-lines="7">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="5bc4e276b5f83ab5ad53694d56b99376" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>int32</td><td>错误码</td></tr><tr><td>errmsg</td><td>string</td><td>错误码说明</td></tr></tbody></table></div><p data-sign="br4" data-type="br" data-lines="4">&nbsp;</p><h2 id="%E7%A1%AE%E8%AE%A4%E4%B8%BA%E5%8F%AF%E4%BF%A1%E8%AE%BE%E5%A4%87" data-sign="531170e190da49a52c6cc0861d77085a" data-lines="1"><a class="anchor" href="#%E7%A1%AE%E8%AE%A4%E4%B8%BA%E5%8F%AF%E4%BF%A1%E8%AE%BE%E5%A4%87"></a>确认为可信设备</h2><p data-sign="2edf98a084bd0344c33273288496af45" data-type="p" data-lines="3"><strong>请求方式</strong>：POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>:  https://qyapi.weixin.qq.com/cgi-bin/security/trustdevice/approve?access_token=ACCESS_TOKEN  </p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="1"><strong>请求包体</strong></p><div data-sign="9b02021fa236ebc4c323415f48167588" data-type="codeBlock" data-lines="9">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"device_code_list"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token string">"49nNtYq"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"rjDTnOh"</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="4f3b43e3d9e5b19040e42b8e07161b3e" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>是</td><td>应用调用凭证</td></tr><tr><td>device_code_list</td><td>string</td><td>是</td><td>设备编码列表, 仅可确认待管理员通过状态，即status为3或4的设备</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="fe4e545aa2587fc077ce6344ae2953af" data-type="p" data-lines="1"><strong>调用说明</strong></p><ul data-sign="999dc824b883d3ae55c77238270505ealist1" data-lines="1" class="cherry-list__default"><li>每次调用最多可以确认100个设备</li></ul><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><p data-sign="6394de01a40b78c07ec7af6eaecac7f9" data-type="p" data-lines="1"><strong>返回示例</strong></p><div data-sign="95747bd37fd2c18637afbee36cf8857b" data-type="codeBlock" data-lines="9">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"success_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"49nNtYq"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"fail_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"rjDTnOh"</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="af71a109ff75ae1ec7e2eddb6c52faef" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>int32</td><td>错误码</td></tr><tr><td>errmsg</td><td>string</td><td>错误码说明</td></tr><tr><td>success_list</td><td>string</td><td>确认成功设备code列表</td></tr><tr><td>fail_list</td><td>string</td><td>确认失败设备code列表</td></tr></tbody></table></div><h2 id="%E9%A9%B3%E5%9B%9E%E5%8F%AF%E4%BF%A1%E8%AE%BE%E5%A4%87%E7%94%B3%E8%AF%B7" data-sign="0266766b1c9be6d899cc68465e0f7e71" data-lines="2"><a class="anchor" href="#%E9%A9%B3%E5%9B%9E%E5%8F%AF%E4%BF%A1%E8%AE%BE%E5%A4%87%E7%94%B3%E8%AF%B7"></a>驳回可信设备申请</h2><p data-sign="a76e3de354b8318a51c4a2af67e236c5" data-type="p" data-lines="3"><strong>请求方式</strong>：POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>:  https://qyapi.weixin.qq.com/cgi-bin/security/trustdevice/reject?access_token=ACCESS_TOKEN  </p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="1"><strong>请求包体</strong></p><div data-sign="9b02021fa236ebc4c323415f48167588" data-type="codeBlock" data-lines="9">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"device_code_list"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token string">"49nNtYq"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"rjDTnOh"</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="010fa0161c5fd6d6b4ba9a38c4501844" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>是</td><td>应用调用凭证</td></tr><tr><td>device_code_list</td><td>string</td><td>是</td><td>设备编码列表，仅可驳回待管理员通过状态，即status为3或4的设备</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="fe4e545aa2587fc077ce6344ae2953af" data-type="p" data-lines="1"><strong>调用说明</strong></p><ul data-sign="fd7c958f6221980523407d2649e204a2list1" data-lines="1" class="cherry-list__default"><li>每次调用最多可以拒绝100个设备</li></ul><p data-sign="br4" data-type="br" data-lines="4">&nbsp;</p><p data-sign="6394de01a40b78c07ec7af6eaecac7f9" data-type="p" data-lines="1"><strong>返回示例</strong></p><div data-sign="95747bd37fd2c18637afbee36cf8857b" data-type="codeBlock" data-lines="9">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"success_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"49nNtYq"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"fail_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"rjDTnOh"</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="86ee0b7d3edbc74a92b2e30d4ccc8fee" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>int32</td><td>错误码</td></tr><tr><td>errmsg</td><td>string</td><td>错误码说明</td></tr><tr><td>success_list</td><td>string</td><td>驳回成功设备code列表</td></tr><tr><td>fail_list</td><td>string</td><td>驳回失败设备code列表</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>