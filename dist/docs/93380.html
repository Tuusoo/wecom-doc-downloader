<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取打卡人员排班信息 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取打卡人员排班信息
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2023/12/18</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="dac070fa50da3da6de7f673c87018cee" data-type="p" data-lines="1">应用可通过此接口，获取应用可见范围内、打卡规则为“按班次上下班”规则的指定员工指定时间段内的排班信息。</p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><p data-sign="7b303dfb6ccfa6c4d12dae062b7720e8" data-type="p" data-lines="1"><strong>请求方式</strong>:POST(<strong>HTTPS</strong>)</p><p data-sign="093350a9a3750680f4628a527cbb8859" data-type="p" data-lines="2"><strong>请求地址:</strong>https://qyapi.weixin.qq.com/cgi-bin/checkin/getcheckinschedulist?access_token=ACCESS_TOKEN</p><p data-sign="8b8b131af4d7916d08149d0729990346" data-type="p" data-lines="2"><strong>请求示例</strong></p><div data-sign="2be036d519a2c83e4f3ecb1d7f56374e" data-type="codeBlock" data-lines="11">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"starttime"</span><span class="token operator">:</span> <span class="token number">1492617600</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"endtime"</span><span class="token operator">:</span> <span class="token number">1492790400</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"useridlist"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">        <span class="token string">"james"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"paul"</span></span>
<span class="code-line">    <span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="3b6b6faa7aa6687d17ed4e1d03ca819e" data-lines="6">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">string</td><td align="left">调用接口凭证，获取方式参考：<a href="https://work.weixin.qq.com/api/doc#90000/90135/91039" rel="nofollow" title="文档">文档-获取access_token</a></td></tr><tr><td align="left">useridlist</td><td align="left">是</td><td align="left">string[]</td><td align="left">需要获取排班信息的用户列表（不超过100个）</td></tr><tr><td align="left">starttime</td><td align="left">是</td><td align="left">uint32</td><td align="left">获取排班信息的开始时间。Unix时间戳</td></tr><tr><td align="left">endtime</td><td align="left">是</td><td align="left">uint32</td><td align="left">获取排班信息的结束时间。Unix时间戳（与starttime跨度不超过一个月）</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="d84a6dae9a93aad57482b5483cbdf831" data-type="p" data-lines="2"><strong>权限说明</strong>:<br>调用的应用需要满足如下的权限：</p><div class="cherry-table-container" data-sign="9b562c4fd46077d0eb60b84eaa4bc761" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<span style="color:#ff0000">打卡 - 可调用接口的应用</span>」中</td></tr><tr><td>代开发应用</td><td>具有「<span style="color:#ff0000">打卡</span>」权限</td></tr><tr><td>第三方应用</td><td>具有「<span style="color:#ff0000">打卡</span>」权限</td></tr></tbody></table></div><p data-sign="0d9e8df569fd1af08e5af1a04c3f7f01" data-type="p" data-lines="1"> <em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="8a7fde67b7bbaba8f7f96dcec1021dd3" data-type="p" data-lines="2"><strong>调用频率</strong>:<br>接口调用频率限制为60次/分钟。</p><p data-sign="25ff3159d1dae3e8ef08523b3dd72cc2" data-type="p" data-lines="2"><strong>返回结果</strong>:</p><div data-sign="95800f6400fcf9b2463c308fae34c3a4" data-type="codeBlock" data-lines="61">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"schedule_list"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">        <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"userid"</span><span class="token operator">:</span><span class="token string">"james"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"yearmonth"</span><span class="token operator">:</span><span class="token number">202011</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"groupid"</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"groupname"</span><span class="token operator">:</span><span class="token string">"排班"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"schedule"</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"scheduleList"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">                    <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"day"</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token property">"schedule_info"</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="code-line">                            <span class="token property">"schedule_id"</span><span class="token operator">:</span><span class="token number">229</span><span class="token punctuation">,</span></span>
<span class="code-line">                            <span class="token property">"schedule_name"</span><span class="token operator">:</span><span class="token string">"早班"</span><span class="token punctuation">,</span></span>
<span class="code-line">                            <span class="token property">"time_section"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">                                <span class="token punctuation">{</span></span>
<span class="code-line">                                    <span class="token property">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                                    <span class="token property">"work_sec"</span><span class="token operator">:</span><span class="token number">32400</span><span class="token punctuation">,</span></span>
<span class="code-line">                                    <span class="token property">"off_work_sec"</span><span class="token operator">:</span><span class="token number">43200</span><span class="token punctuation">,</span></span>
<span class="code-line">                                    <span class="token property">"remind_work_sec"</span><span class="token operator">:</span><span class="token number">32400</span><span class="token punctuation">,</span>                                         <span class="token property">"remind_off_work_sec"</span><span class="token operator">:</span><span class="token number">43200</span></span>
<span class="code-line">                                <span class="token punctuation">}</span></span>
<span class="code-line">                            <span class="token punctuation">]</span></span>
<span class="code-line">                        <span class="token punctuation">}</span></span>
<span class="code-line">                    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"day"</span><span class="token operator">:</span><span class="token number">26</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token property">"schedule_info"</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="code-line">                            <span class="token property">"schedule_id"</span><span class="token operator">:</span><span class="token number">171</span><span class="token punctuation">,</span></span>
<span class="code-line">                            <span class="token property">"schedule_name"</span><span class="token operator">:</span><span class="token string">"晚班"</span><span class="token punctuation">,</span></span>
<span class="code-line">                            <span class="token property">"time_section"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">                                <span class="token punctuation">{</span></span>
<span class="code-line">                                    <span class="token property">"id"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                                    <span class="token property">"work_sec"</span><span class="token operator">:</span><span class="token number">64800</span><span class="token punctuation">,</span></span>
<span class="code-line">                                    <span class="token property">"off_work_sec"</span><span class="token operator">:</span><span class="token number">79200</span><span class="token punctuation">,</span></span>
<span class="code-line">                                    <span class="token property">"remind_work_sec"</span><span class="token operator">:</span><span class="token number">64800</span><span class="token punctuation">,</span></span>
<span class="code-line">                                    <span class="token property">"remind_off_work_sec"</span><span class="token operator">:</span><span class="token number">79200</span></span>
<span class="code-line">                                <span class="token punctuation">}</span></span>
<span class="code-line">                            <span class="token punctuation">]</span></span>
<span class="code-line">                        <span class="token punctuation">}</span></span>
<span class="code-line">                    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"day"</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token property">"schedule_info"</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="code-line">                            <span class="token property">"schedule_id"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">                            <span class="token property">"schedule_name"</span><span class="token operator">:</span><span class="token string">"休息"</span><span class="token punctuation">,</span></span>
<span class="code-line">                            <span class="token property">"time_section"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line"></span>
<span class="code-line">                            <span class="token punctuation">]</span></span>
<span class="code-line">                        <span class="token punctuation">}</span></span>
<span class="code-line">                    <span class="token punctuation">}</span></span>
<span class="code-line">                <span class="token punctuation">]</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"errcode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"errmsg"</span><span class="token operator">:</span><span class="token string">"ok"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="41b98c7d01f24fec8924069d151b96ad" data-lines="21">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">int32</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">string</td><td align="left">错误码描述</td></tr><tr><td align="left">schedule_list</td><td align="left">obj[]</td><td align="left">排班表信息</td></tr><tr><td align="left">schedule_list.userid</td><td align="left">string</td><td align="left">打卡人员userid</td></tr><tr><td align="left">schedule_list.yearmonth</td><td align="left">uint32</td><td align="left">排班表月份，格式为年月，如202011</td></tr><tr><td align="left">schedule_list.groupid</td><td align="left">uint32</td><td align="left">打卡规则id</td></tr><tr><td align="left">schedule_list.groupname</td><td align="left">string</td><td align="left">打卡规则名</td></tr><tr><td align="left">schedule_list.schedule</td><td align="left">obj</td><td align="left">个人排班信息</td></tr><tr><td align="left">schedule_list.schedule.scheduleList</td><td align="left">obj[]</td><td align="left">个人排班表信息</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.day</td><td align="left">uint32</td><td align="left">排班日期，为表示当月第几天的数字</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info</td><td align="left">obj</td><td align="left">个人当日排班信息</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.schedule_id</td><td align="left">uint32</td><td align="left">当日安排班次id，班次id也可在打卡规则中查询获得</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.schedule_name</td><td align="left">string</td><td align="left">班次名称</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.time_section</td><td align="left">obj[]</td><td align="left">班次上下班时段信息</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.time_section.id</td><td align="left">uint32</td><td align="left">时段id，为班次中某一堆上下班时间组合的id</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.time_section.work_sec</td><td align="left">uint32</td><td align="left">上班时间。距当天00:00的秒数</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.time_section.off_work_sec</td><td align="left">uint32</td><td align="left">下班时间。距当天00:00的秒数</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.time_section.remind_work_sec</td><td align="left">uint32</td><td align="left">上班提醒时间。距当天00:00的秒数</td></tr><tr><td align="left">schedule_list.schedule.scheduleList.schedule_info.time_section.remind_off_work_sec</td><td align="left">uint32</td><td align="left">下班提醒时间。距当天00:00的秒数</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="05c420b06345d315e8da381b63e90000" data-type="p" data-lines="1"><strong>错误说明</strong>:</p><div class="cherry-table-container" data-sign="e5ee3e67f983c5b07548fc775c0da5f0" data-lines="5">
        <table class="cherry-table"><thead><tr><th align="left">错误码</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">301021</td><td align="left">userid错误</td></tr><tr><td align="left">301070</td><td align="left">系统错误，请稍后再试</td></tr><tr><td align="left">301075</td><td align="left">输入参数错误</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>