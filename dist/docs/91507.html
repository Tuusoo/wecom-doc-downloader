<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>code2Session - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        code2Session
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2023/04/10</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="7b7c5a8184f690d3015a1cbf9a830ac2" data-type="p" data-lines="1">临时登录凭证校验接口是一个<code>服务端HTTPS 接口</code>，开发者服务器使用临时登录凭证code获取 session_key、用户userid以及用户所在企业的corpid等信息。</p><p data-sign="49ec2d49e9fd8c0867828a17c2346318" data-type="p" data-lines="2"><strong>请求方式</strong>：GET（HTTPS）</p><p data-sign="36956a105e9cef786122426dd06dc52d" data-type="p" data-lines="2"><strong>接口地址：</strong></p><div data-sign="7a6599672634be24869abf4e1c5e0250" data-type="codeBlock" data-lines="5">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>qyapi<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>qq<span class="token punctuation">.</span>com<span class="token operator">/</span>cgi<span class="token operator">-</span>bin<span class="token operator">/</span>miniprogram<span class="token operator">/</span>jscode2session<span class="token operator">?</span>access_token<span class="token operator">=</span><span class="token constant">ACCESS_TOKEN</span><span class="token operator">&amp;</span>js_code<span class="token operator">=</span><span class="token constant">CODE</span><span class="token operator">&amp;</span>grant_type<span class="token operator">=</span>authorization_code</span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="81a04268cdbd6cb5d3b07f06ca238855" data-type="p" data-lines="2"><strong>请求参数</strong></p><div class="cherry-table-container" data-sign="110debf402522ca9e33fd43e6101abd1" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证(注意，此处的access_token 是企业微信应用的access_token，获取方法参见“<a href="#15074" rel="nofollow">获取access_token</a>”。要求必须由该小程序关联的企业微信应用的secret获取</td></tr><tr><td>js_code</td><td>是</td><td>登录时获取的 code</td></tr><tr><td>grant_type</td><td>是</td><td>此处固定为authorization_code</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="5bf0bb38e8577e9d3ac735c18d27795e" data-type="p" data-lines="2"><strong>权限说明：</strong><br> access_token必须是与小程序关联的企业微信应用secret所获得。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="feca362910fbcea0b8f94a834d484ded" data-type="p" data-lines="1"><strong>返回说明</strong></p><div data-sign="461574b0e8d4cfeba74ec86ea3924b54" data-type="codeBlock" data-lines="18">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token comment">//正常返回的JSON数据包</span></span>
<span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">      <span class="token string">"corpid"</span><span class="token operator">:</span> <span class="token string">"CORPID"</span><span class="token punctuation">,</span></span>
<span class="code-line">      <span class="token string">"userid"</span><span class="token operator">:</span> <span class="token string">"USERID"</span><span class="token punctuation">,</span></span>
<span class="code-line">      <span class="token string">"session_key"</span><span class="token operator">:</span> <span class="token string">"kJtdi6RF+Dv67QkbLlPGjw=="</span><span class="token punctuation">,</span></span>
<span class="code-line">      <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">      <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token comment">//错误时返回JSON数据包(示例为Code无效)</span></span>
<span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">40029</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"invalid code"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="21f2fa80eb8f025c07495bc38851fbab" data-type="p" data-lines="1">参数说明</p><div class="cherry-table-container" data-sign="18e1d675ecc581cd129896146501a7c6" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>corpid</td><td>用户所属企业的corpid</td></tr><tr><td>userid</td><td>用户在企业内的UserID，对应管理端的账号，企业内唯一。注意：第三方小程序此处返回加密的userid</td></tr><tr><td>session_key</td><td>会话密钥</td></tr></tbody></table></div><p data-sign="8a9209e58e40eb2b788e9d9837e848ae" data-type="p" data-lines="2"><strong>注意：</strong><br></p><ol data-sign="1e2fe53742caea382691fc410022784elist4" data-lines="4" class="cherry-list__default" start="1"><li>企业微信的jscode2session请求url与微信的不同</li><li>企业微信的jscode2session返回的是userid，而微信返回的是openid</li><li>获取access_token时请使用企业的corpid参数，请勿使用小程序的appid</li><li>会话密钥 session_key 是对用户数据进行加密签名的密钥，为了应用自身的数据安全，开发者服务器不应该把会话密钥下发到小程序，也不应该对外提供这个密钥。</li></ol></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>