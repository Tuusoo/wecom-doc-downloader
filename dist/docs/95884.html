<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>自建应用与第三方应用的对接 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        自建应用与第三方应用的对接
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/07/18</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="38ac949abd3d5a8d6f554a5451f2ae85-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#userid%E8%BD%AC%E6%8D%A2" class="level-2">userid转换</a></li><li class="toc-li"><a href="#external-userid%E8%BD%AC%E6%8D%A2" class="level-2">external_userid转换</a></li></dir><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="d454c61a0ccab9aa9287f107efa2f214" data-type="p" data-lines="1">为更好地保护企业与用户的数据，企业微信不允许第三方应用获取企业的明文userid与external_userid。而企业的自建应用在一些场景下需要与第三方服务商的应用对接，为此，企业微信提供了自建应用的转换接口，支持将第三方应用获取的userid、external_userid转换为企业主体对应的ID。</p><p data-sign="87a05e794ab716efc197dd95b455c9b1" data-type="p" data-lines="6"><!--<br>corpid转换<br>将代开发应用或第三方应用获取到的open_corpid转换为明文corpid。<br><strong>请求方式：</strong> POST（HTTPS）<br><strong>请求地址：</strong> https://qyapi.weixin.qq.com/cgi-bin/corp/opencorpid_to_corpid?access_token=ACCESS_TOKEN<br><strong>请求参数：</strong></p><div data-sign="6204b54ddd6738541700432af8690562" data-type="codeBlock" data-lines="6">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"open_corpid"</span><span class="token operator">:</span><span class="token string">"aaaa"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"source_agentid"</span><span class="token operator">:</span><span class="token number">100001</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="7bd2e5821fe3e1c17a888d2555b63d98" data-lines="5">
        <table class="cherry-table"><thead><tH align="left">参数</th><tH align="left">必须</th><tH align="left">说明</th></thead></tbody><tr><tD align="left">access_token</td><tD align="left">是</td><tD align="left">企业自建应用的调用接口凭证。获取方法查看“<a href="#15074" rel="nofollow">获取access_token</a>”</td></tr><tr><tD align="left">open_corpid</td><tD align="left">是</td><tD align="left">密文corpid，必须是source_agentid对应的应用所获取</td></tr><tr><tD align="left">source_agentid</td><tD align="left">是</td><tD align="left">企业授权的代开发自建应用或第三方应用的agentid</td></tr></tbody></table></div><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><blockquote data-sign="406d1a7ed7b4b5fa0e1b189b37b66b0e_1" data-lines="1">需要使用自建应用的access_token</blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="1"><strong>返回结果：</strong></p><div data-sign="92ad756d020946fb1a9b0188d823b818" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"errcode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"errmsg"</span><span class="token operator">:</span><span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"corpid"</span><span class="token operator">:</span><span class="token string">"xxxx"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="854f3a43ebde17768fd39e19280ebdd4" data-lines="5">
        <table class="cherry-table"><thead><tH align="left">参数</th><tH align="left">说明</th></thead></tbody><tr><tD align="left">errcode</td><tD align="left">返回码</td></tr><tr><tD align="left">errmsg</td><tD align="left">对返回码的文本描述内容</td></tr><tr><tD align="left">corpid</td><tD align="left">明文corpid</td></tr></tbody></table></div><p data-sign="9a73e5b6a42e4b29fb65c2c7fe12ff01" data-type="p" data-lines="1">--></p><h2 id="userid%E8%BD%AC%E6%8D%A2" data-sign="3668569f6d7807a38e27a6338e5732cd" data-lines="2"><a class="anchor" href="#userid%E8%BD%AC%E6%8D%A2"></a>userid转换</h2><p data-sign="8556900685ec1a6e431be50123e2d27c" data-type="p" data-lines="3">将代开发应用或第三方应用获取的密文open_userid转换为明文userid。<br><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>：https://qyapi.weixin.qq.com/cgi-bin/batch/openuserid_to_userid?access_token=ACCESS_TOKEN</p><p data-sign="25dc236983d258c66e39f907f7c7cc33" data-type="p" data-lines="1"><strong>请求参数：</strong></p><div data-sign="e44435cc88fb052101b5a19281e6683d" data-type="codeBlock" data-lines="6">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">  <span class="token string">"open_userid_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"xxx"</span><span class="token punctuation">,</span> <span class="token string">"yyy"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"source_agentid"</span><span class="token operator">:</span><span class="token number">100001</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="4817e743a0da0678339bb0f35a1f0575" data-lines="5">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">企业自建应用的调用接口凭证。获取方法查看“<a href="#15074" rel="nofollow">获取access_token</a>”</td></tr><tr><td align="left">open_userid_list</td><td align="left">是</td><td align="left">open_userid列表，最多不超过1000个。必须是source_agentid对应的应用所获取</td></tr><tr><td align="left">source_agentid</td><td align="left">是</td><td align="left">企业授权的代开发自建应用或第三方应用的agentid</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><blockquote data-sign="9b8a9fcbd628180b53659d52b1a2c446_1" data-lines="1">需要使用自建应用的access_token<br>成员需要同时在access_token和source_agentid所对应应用的可见范围内</blockquote><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="2"><strong>返回结果：</strong></p><div data-sign="e049a451b3b39f51b13660e20e1c3fb0" data-type="codeBlock" data-lines="14">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"userid_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">        <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">"open_userid"</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"userid"</span><span class="token operator">:</span> <span class="token string">"aaa"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"invalid_open_userid_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"yyy"</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="0c0260e9d38765ce5f30d86dce086ccc" data-lines="8">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">对返回码的文本描述内容</td></tr><tr><td align="left">userid_list</td><td align="left">明文userid</td></tr><tr><td align="left">userid_list.open_userid</td><td align="left">转换成功的open_userid</td></tr><tr><td align="left">userid_list.userid</td><td align="left">转换成功的open_userid对应的userid</td></tr><tr><td align="left">invalid_open_userid_list</td><td align="left">不合法的open_userid列表</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="external-userid%E8%BD%AC%E6%8D%A2" data-sign="c43396c9a8c8905984dcd5f286040df7" data-lines="1"><a class="anchor" href="#external-userid%E8%BD%AC%E6%8D%A2"></a>external_userid转换</h2><p data-sign="43e23cda6d0a53335af1891902f34972" data-type="p" data-lines="1">将代开发应用或第三方应用获取的externaluserid转换成自建应用的externaluserid。</p><p data-sign="8ea662e8130a7d82707a8093d2f47266" data-type="p" data-lines="3"><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>：https://qyapi.weixin.qq.com/cgi-bin/externalcontact/from_service_external_userid?access_token=ACCESS_TOKEN</p><p data-sign="25dc236983d258c66e39f907f7c7cc33" data-type="p" data-lines="1"><strong>请求参数：</strong></p><div data-sign="5416529f950e0fb6eb29ecb456e66893" data-type="codeBlock" data-lines="6">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">  <span class="token string">"external_userid"</span><span class="token operator">:</span><span class="token string">"aaa"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"source_agentid"</span><span class="token operator">:</span><span class="token number">100001</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="de450162a20c144eadfbc4d1ac27db73" data-lines="5">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">企业自建应用的调用接口凭证。获取方法查看“<a href="#15074" rel="nofollow">获取access_token</a>”</td></tr><tr><td align="left">external_userid</td><td align="left">是</td><td align="left">服务商主体的external_userid，必须是source_agentid对应的应用所获取</td></tr><tr><td align="left">source_agentid</td><td align="left">是</td><td align="left">企业授权的代开发自建应用或第三方应用的agentid</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><blockquote data-sign="a3571b1fb47a4c9fc4ef9b5bf36ac7fb_1" data-lines="1">需要使用自建应用的access_token<br>客户的跟进人，或者用户所在客户群的群主，需要同时在access_token和source_agentid所对应应用的可见范围内</blockquote><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="2"><strong>返回结果：</strong></p><div data-sign="30c3ae55820a0cde999fee6255a22f11" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token string">"errcode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"errmsg"</span><span class="token operator">:</span><span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"external_userid"</span><span class="token operator">:</span><span class="token string">"xxx"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="794306bb0a261183ae44d7e32320c86a" data-lines="5">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">对返回码的文本描述内容</td></tr><tr><td align="left">external_userid</td><td align="left">企业主体的external_userid</td></tr></tbody></table></div><p data-sign="br8" data-type="br" data-lines="8">&nbsp;</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>