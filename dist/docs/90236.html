<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>发送应用消息 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        发送应用消息
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/09/24</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="d5b41b66c8bf67e8660f3094b49299c9-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89" class="level-2">接口定义</a></li><li class="toc-li"><a href="#%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B" class="level-2">消息类型</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E6%9C%AC%E6%B6%88%E6%81%AF" class="level-3">文本消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E7%89%87%E6%B6%88%E6%81%AF" class="level-3">图片消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%AF%AD%E9%9F%B3%E6%B6%88%E6%81%AF" class="level-3">语音消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%A7%86%E9%A2%91%E6%B6%88%E6%81%AF" class="level-3">视频消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E4%BB%B6%E6%B6%88%E6%81%AF" class="level-3">文件消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E6%9C%AC%E5%8D%A1%E7%89%87%E6%B6%88%E6%81%AF" class="level-3">文本卡片消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF" class="level-3">图文消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF%EF%BC%88mpnews%EF%BC%89" class="level-3">图文消息（mpnews）</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#markdown%E6%B6%88%E6%81%AF" class="level-3">markdown消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF" class="level-3">小程序通知消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%A8%A1%E6%9D%BF%E5%8D%A1%E7%89%87%E6%B6%88%E6%81%AF" class="level-3">模板卡片消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E6%9C%AC%E9%80%9A%E7%9F%A5%E5%9E%8B" class="level-4">文本通知型</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E6%96%87%E5%B1%95%E7%A4%BA%E5%9E%8B" class="level-4">图文展示型</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%8C%89%E9%92%AE%E4%BA%A4%E4%BA%92%E5%9E%8B" class="level-4">按钮交互型</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%8A%95%E7%A5%A8%E9%80%89%E6%8B%A9%E5%9E%8B" class="level-4">投票选择型</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%A4%9A%E9%A1%B9%E9%80%89%E6%8B%A9%E5%9E%8B" class="level-4">多项选择型</a></li><li class="toc-li"><a href="#%E9%99%84%E5%BD%95" class="level-2">附录</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%94%AF%E6%8C%81%E7%9A%84markdown%E8%AF%AD%E6%B3%95" class="level-3">支持的markdown语法</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#id%E8%BD%AC%E8%AF%91%E8%AF%B4%E6%98%8E" class="level-3">id转译说明</a></li></dir><h2 id="%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89" data-sign="b0c4fa5af57e92d8d68dedac05f1ccfe" data-lines="2"><a class="anchor" href="#%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"></a>接口定义</h2><p data-sign="7c52aae9a4ef3cf865b66d5dd9ced973" data-type="p" data-lines="4">应用支持推送文本、图片、视频、文件、图文等类型。<br> <br><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong> https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=ACCESS_TOKEN</p><p data-sign="04960833317a8fd671d9338bb9535a81" data-type="p" data-lines="2"><strong>参数说明：</strong><br> </p><div class="cherry-table-container" data-sign="c2ad9821e76cb02e5e6c4c3e8953e085" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证</td></tr></tbody></table></div><blockquote data-sign="0bf067a1dc4c9ba76336ed522ebae1b7_6" data-lines="6">- 各个消息类型的具体POST格式请阅后续“消息类型”部分。<br>- 如果有在管理端对应用设置“在微工作台中始终进入主页”，应用在微信端只能接收到文本消息，并且文本消息的长度限制为20字节，超过20字节会被截断。同时其他消息类型也会转换为文本消息，提示用户到企业微信查看。<br>- 支持id转译，将userid/部门id转成对应的用户名/部门名，在企业授权了会话内容存档接口权限时，也可以将消息id和群id转成对应的消息内容/群名称，目前仅<strong>文本/文本卡片/图文/图文（mpnews）/任务卡片/小程序通知/模版消息/模板卡片消息</strong>这八种消息类型的<strong>部分字段</strong>支持。具体支持的范围和语法，请查看附录<a href="#10167/id%E8%BD%AC%E8%AF%91%E8%AF%B4%E6%98%8E" rel="nofollow">id转译说明</a>。<br>- 支持重复消息检查，当指定 <code>"enable_duplicate_check": 1</code>开启: 表示在一定时间间隔内，同样内容（请求json）的消息，不会重复收到；时间间隔可通过<code>duplicate_check_interval</code>指定，默认<code>1800秒</code>。<br>- 从2021年2月4日开始，企业关联添加的「小程序」应用，也可以发送文本、图片、视频、文件、图文等各种类型的消息了。<br><font color="red"><strong>调用建议</strong></font>：大部分企业应用在每小时的0分或30分触发推送消息，容易造成资源挤占，从而投递不够及时，建议尽量避开这两个时间点进行调用。<br><font color="red"><strong>频率限制</strong></font>：每应用不可超过账号上限数*200人次/天（注：若调用api一次发给1000人，算1000人次；若企业账号上限是500人，则每个应用每天可发送100000人次的消息）。每应用对同一个成员不可超过30次/分钟，1000次/小时，超过部分会被丢弃不下发</blockquote><p data-sign="cc39e7d843cf38f5c4bc1ce95b65cf90" data-type="p" data-lines="2"> <strong>返回示例：</strong><br> </p><div data-sign="e0baae97fbb775cff57416ff84dcec50" data-type="codeBlock" data-lines="12">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">  <span class="token string">"errcode"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"errmsg"</span> <span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"invaliduser"</span> <span class="token operator">:</span> <span class="token string">"userid1|userid2"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"invalidparty"</span> <span class="token operator">:</span> <span class="token string">"partyid1|partyid2"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"invalidtag"</span><span class="token operator">:</span> <span class="token string">"tagid1|tagid2"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"unlicenseduser"</span> <span class="token operator">:</span> <span class="token string">"userid3|userid4"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"msgid"</span><span class="token operator">:</span> <span class="token string">"xxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"response_code"</span><span class="token operator">:</span> <span class="token string">"xyzxyz"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><blockquote data-sign="e1caa8c7249fcd7215122429038c23cd_4" data-lines="4">如果部分接收人无权限或不存在，发送仍然执行，但会返回无效的部分（即invaliduser或invalidparty或invalidtag或unlicenseduser），常见的原因是<strong>接收人不在应用的可见范围内</strong>。<br>权限包含<strong>应用可见范围</strong>和<strong>基础接口权限</strong>(基础账号、互通账号均可)，unlicenseduser中的用户在应用可见范围内但没有基础接口权限。<br>如果<strong>全部</strong>接收人无权限或不存在，则本次调用返回失败，errcode为81013。<br>返回包中的userid，不区分大小写，统一转为小写</blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="ad759d87b8cb9a916b94e12c82e1e8e6" data-type="p" data-lines="2">  <strong>参数说明：</strong><br> </p><div class="cherry-table-container" data-sign="ac23efb2160425377f721094954c867b" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>返回码</td></tr><tr><td>errmsg</td><td>对返回码的文本描述内容</td></tr><tr><td>invaliduser</td><td>不合法的userid，不区分大小写，统一转为小写</td></tr><tr><td>invalidparty</td><td>不合法的partyid</td></tr><tr><td>invalidtag</td><td>不合法的标签id</td></tr><tr><td>unlicenseduser</td><td>没有基础接口许可(包含已过期)的userid</td></tr><tr><td>msgid</td><td>消息id，用于<a href="#31947" rel="nofollow">撤回应用消息</a></td></tr><tr><td>response_code</td><td>仅消息类型为“按钮交互型”，“投票选择型”和“多项选择型”，以及填写了action_menu字段的文本通知型、图文展示型的模板卡片消息返回，应用可使用response_code调用<a href="#32086" rel="nofollow">更新模版卡片消息</a>接口，72小时内有效，且只能使用一次</td></tr></tbody></table></div><h2 id="%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B" data-sign="770eda0a918142e2f2cb206a05d6743a" data-lines="2"><a class="anchor" href="#%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B"></a>消息类型</h2><h3 id="%E6%96%87%E6%9C%AC%E6%B6%88%E6%81%AF" data-sign="00bd5ad70e6a422c73658a35dc95c3a7" data-lines="2"><a class="anchor" href="#%E6%96%87%E6%9C%AC%E6%B6%88%E6%81%AF"></a>文本消息</h3><p data-sign="fa377d970a64d86d33472be9b167002f" data-type="p" data-lines="1"> <strong>请求示例：</strong></p><div data-sign="ad5d894bbce5aa11a19c8642f47bca11" data-type="codeBlock" data-lines="17">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1|PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"text"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">       <span class="token string">"content"</span> <span class="token operator">:</span> <span class="token string">"你的快递已到，请携带工卡前往邮件中心领取。\n出发前可查看&lt;a href=\"</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>work<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>qq<span class="token punctuation">.</span>com\<span class="token string">"&gt;邮件中心视频实况&lt;/a&gt;，聪明避开排队。"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"safe"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="9cd2f23f4a14b14e1007e1741c8621da" data-lines="12">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>指定接收消息的成员，成员ID列表（多个接收者用‘|’分隔，最多支持1000个）。<br>特殊情况：指定为"@all"，则向该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>指定接收消息的部门，部门ID列表，多个接收者用‘|’分隔，最多支持100个。<br>当touser为"@all"时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>指定接收消息的标签，标签ID列表，多个接收者用‘|’分隔，最多支持100个。<br>当touser为"@all"时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：text</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>content</td><td>是</td><td>消息内容，最长不超过2048个字节，超过将截断<strong>（支持id转译）</strong></td></tr><tr><td>safe</td><td>否</td><td>表示是否是保密消息，0表示可对外分享，1表示不能分享且内容显示水印，默认为0</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0。</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><blockquote data-sign="6677a8f14e14c5e8dc7113448ec99727_2" data-lines="2"><font color="red">touser、toparty、totag不能同时为空</font>，后面不再强调。</blockquote><p data-sign="02b467e4acf34edaeacb98bb84931fd4" data-type="p" data-lines="3"><strong>文本消息展现：</strong><br><img src="images/90236/5efe5a13.png" style="width:360px;"></p><p data-sign="9bc40854bfe8db70552e2ad32d0330e7" data-type="p" data-lines="3"><strong>特殊说明：</strong><br>其中text参数的content字段可以支持换行、以及A标签，即可打开自定义的网页（可参考以上示例代码）(注意：换行符请用转义过的\n)</p><h3 id="%E5%9B%BE%E7%89%87%E6%B6%88%E6%81%AF" data-sign="0183c545485256ae58601a39f80fb0c4" data-lines="2"><a class="anchor" href="#%E5%9B%BE%E7%89%87%E6%B6%88%E6%81%AF"></a>图片消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="584d1f2a94e884a59f24ce446a603fb4" data-type="codeBlock" data-lines="16">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1|PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"image"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"safe"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="25dc236983d258c66e39f907f7c7cc33" data-type="p" data-lines="2"><strong>请求参数：</strong></p><div class="cherry-table-container" data-sign="272c36dc4533ed5e25fb996c03b91af8" data-lines="11">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：image</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>media_id</td><td>是</td><td>图片媒体文件id，可以调用上传临时素材接口获取</td></tr><tr><td>safe</td><td>否</td><td>表示是否是保密消息，0表示可对外分享，1表示不能分享且内容显示水印，默认为0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h3 id="%E8%AF%AD%E9%9F%B3%E6%B6%88%E6%81%AF" data-sign="582e7c6ac7be4c42bda7bc0e11b34134" data-lines="1"><a class="anchor" href="#%E8%AF%AD%E9%9F%B3%E6%B6%88%E6%81%AF"></a>语音消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="bb706ed4cf154897c5493f5d84de4168" data-type="codeBlock" data-lines="15">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1|PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"voice"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"voice"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="441e95f487149999ade0826dacc4da6c" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：voice</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>media_id</td><td>是</td><td>语音文件id，可以调用<a href="#10112" rel="nofollow">上传临时素材</a>接口获取</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h3 id="%E8%A7%86%E9%A2%91%E6%B6%88%E6%81%AF" data-sign="ea3bd634d7479c7f78da99c830033997" data-lines="2"><a class="anchor" href="#%E8%A7%86%E9%A2%91%E6%B6%88%E6%81%AF"></a>视频消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="9ef4de4bf3739168012a63fd05651340" data-type="codeBlock" data-lines="18">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1|PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"video"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"video"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"Title"</span><span class="token punctuation">,</span></span>
<span class="code-line">       <span class="token string">"description"</span> <span class="token operator">:</span> <span class="token string">"Description"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"safe"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="2691d890b0c8ff3c200de55a7dc1864b" data-lines="13">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：video</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>media_id</td><td>是</td><td>视频媒体文件id，可以调用<a href="#10112" rel="nofollow">上传临时素材</a>接口获取</td></tr><tr><td>title</td><td>否</td><td>视频消息的标题，不超过128个字节，超过会自动截断</td></tr><tr><td>description</td><td>否</td><td>视频消息的描述，不超过512个字节，超过会自动截断</td></tr><tr><td>safe</td><td>否</td><td>表示是否是保密消息，0表示可对外分享，1表示不能分享且内容显示水印，默认为0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="6fbb1f62e6f26e4f2a8f213123cafa4d" data-type="p" data-lines="3">  <br><strong>视频消息展现：</strong><br><img src="images/90236/b9bc3fe3.png" style="width:360px;"></p><h3 id="%E6%96%87%E4%BB%B6%E6%B6%88%E6%81%AF" data-sign="4a62a41fa95c6c5da0265acdc16b2c4d" data-lines="2"><a class="anchor" href="#%E6%96%87%E4%BB%B6%E6%B6%88%E6%81%AF"></a>文件消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="12f833963b40bf16497491c24df24927" data-type="codeBlock" data-lines="16">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1|PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"file"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"media_id"</span> <span class="token operator">:</span> <span class="token string">"1Yv-zXfHjSjU-7LH-GwtYqDGS-zz6w22KmWAT5COgP7o"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"safe"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="08cccb51671f6e126afc1b26952e1378" data-lines="11">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：file</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>media_id</td><td>是</td><td>文件id，可以调用上传临时素材接口获取</td></tr><tr><td>safe</td><td>否</td><td>表示是否是保密消息，0表示可对外分享，1表示不能分享且内容显示水印，默认为0，保密消息支持以下格式文件： txt、pdf、doc、docx、ppt、pptx、xls、xlsx、xml、jpg、jpeg、png、bmp、gif</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="fbed61f8d47cf6664061aedb1403fb21" data-type="p" data-lines="4">  <br><strong>文件消息展现：</strong><br><img src="images/90236/3d0e87b8.jpeg" style="width:360px;"></p><h3 id="%E6%96%87%E6%9C%AC%E5%8D%A1%E7%89%87%E6%B6%88%E6%81%AF" data-sign="9b6483838c012ce6db3a5343c329acd2" data-lines="1"><a class="anchor" href="#%E6%96%87%E6%9C%AC%E5%8D%A1%E7%89%87%E6%B6%88%E6%81%AF"></a>文本卡片消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="e6fdb9189225d2225911a154edf31997" data-type="codeBlock" data-lines="19">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"textcard"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"textcard"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"领奖通知"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"description"</span> <span class="token operator">:</span> <span class="token string">"&lt;div class=\"</span>gray\<span class="token string">"&gt;2016年9月26日&lt;/div&gt; &lt;div class=\"</span>normal\<span class="token string">"&gt;恭喜你抽中iPhone 7一台，领奖码：xxxx&lt;/div&gt;&lt;div class=\"</span>highlight\<span class="token string">"&gt;请于2016年10月10日前联系行政同事领取&lt;/div&gt;"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"url"</span> <span class="token operator">:</span> <span class="token string">"URL"</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token string">"btntxt"</span><span class="token operator">:</span><span class="token string">"更多"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="64684891b5b813715d8836fdea04eb92" data-lines="14">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：textcard</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>title</td><td>是</td><td>标题，不超过128个字符，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>description</td><td>是</td><td>描述，不超过512个字符，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>url</td><td>是</td><td>点击后跳转的链接。最长2048字节，请确保包含了协议头(http/https)</td></tr><tr><td>btntxt</td><td>否</td><td>按钮文字。 默认为“详情”， 不超过4个文字，超过自动截断。</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="473887f69f0eff42612fa9a2cceeb3ca" data-type="p" data-lines="3"><strong>文本卡片消息展现 ：</strong><br><img src="images/90236/c6a16c06.jpeg" style="width:360px"></p><p data-sign="01e18575cce47d23d48de0855615290a" data-type="p" data-lines="3"><strong>特殊说明</strong>：<br>卡片消息的展现形式非常灵活，支持使用br标签或者空格来进行换行处理，也支持使用div标签来使用不同的字体颜色，目前内置了3种文字颜色：灰色(gray)、高亮(highlight)、默认黑色(normal)，将其作为div标签的class属性即可，具体用法请参考上面的示例。</p><h3 id="%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF" data-sign="de46fe2165706d0840990b8d607dbe0a" data-lines="2"><a class="anchor" href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF"></a>图文消息</h3><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="c92ee2171793ff7944bf599bc3353411" data-type="codeBlock" data-lines="25">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"news"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"news"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">       <span class="token string">"articles"</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">           <span class="token punctuation">{</span></span>
<span class="code-line">               <span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"中秋节礼品领取"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"description"</span> <span class="token operator">:</span> <span class="token string">"今年中秋节公司有豪礼相送"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"url"</span> <span class="token operator">:</span> <span class="token string">"URL"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"picurl"</span> <span class="token operator">:</span> <span class="token string">"https://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png"</span><span class="token punctuation">,</span> </span>
<span class="code-line">			   <span class="token string">"appid"</span><span class="token operator">:</span> <span class="token string">"wx123123123123123"</span><span class="token punctuation">,</span></span>
<span class="code-line">        	   <span class="token string">"pagepath"</span><span class="token operator">:</span> <span class="token string">"pages/index?userid=zhangsan&amp;orderid=123123123"</span></span>
<span class="code-line">           <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="d81cee9d2bce89e4f8bb5cb6a624bf93" data-lines="17">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：news</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>articles</td><td>是</td><td>图文消息，一个图文消息支持1到8条图文</td></tr><tr><td>title</td><td>是</td><td>标题，不超过128个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>description</td><td>否</td><td>描述，不超过512个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>url</td><td>否</td><td>点击后跳转的链接。 最长2048字节，请确保包含了协议头(http/https)，小程序或者url必须填写一个</td></tr><tr><td>picurl</td><td>否</td><td>图文消息的图片链接，最长2048字节，支持JPG、PNG格式，较好的效果为大图 1068*455，小图150*150。</td></tr><tr><td>appid</td><td>否</td><td>小程序appid，必须是与当前应用关联的小程序，appid和pagepath必须同时填写，填写后会忽略url字段</td></tr><tr><td>pagepath</td><td>否</td><td>点击消息卡片后的小程序页面，最长128字节，仅限本小程序内的页面。appid和pagepath必须同时填写，填写后会忽略url字段</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="e19be9380de5eec74047fe2fdee83f12" data-type="p" data-lines="3">  <br><strong>图文消息展现：</strong><br><img src="images/90236/ab765e8c.png" style="width:360px;"></p><h3 id="%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF%EF%BC%88mpnews%EF%BC%89" data-sign="f26c1072a2346a359cc86deef82557d5" data-lines="2"><a class="anchor" href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF%EF%BC%88mpnews%EF%BC%89"></a>图文消息（mpnews）</h3><blockquote data-sign="1b89452d63295205ab3299ed6f30cde4_1" data-lines="1">mpnews类型的图文消息，跟普通的图文消息一致，唯一的差异是图文内容存储在企业微信。<br>多次发送mpnews，会被认为是不同的图文，阅读、点赞的统计会被分开计算。</blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="01075ed28b2a8b08fb63a764e8727d76" data-type="codeBlock" data-lines="27">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span><span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"mpnews"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"mpnews"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">       <span class="token string">"articles"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">           <span class="token punctuation">{</span></span>
<span class="code-line">               <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"Title"</span><span class="token punctuation">,</span> </span>
<span class="code-line">               <span class="token string">"thumb_media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"author"</span><span class="token operator">:</span> <span class="token string">"Author"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"content_source_url"</span><span class="token operator">:</span> <span class="token string">"URL"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"content"</span><span class="token operator">:</span> <span class="token string">"Content"</span><span class="token punctuation">,</span></span>
<span class="code-line">               <span class="token string">"digest"</span><span class="token operator">:</span> <span class="token string">"Digest description"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">       <span class="token punctuation">]</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"safe"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="897d91ef7b27b09aeb575ec249a69d83" data-lines="18">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：mpnews</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>articles</td><td>是</td><td>图文消息，一个图文消息支持1到8条图文</td></tr><tr><td>title</td><td>是</td><td>标题，不超过128个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>thumb_media_id</td><td>是</td><td>图文消息缩略图的media_id, 可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得。此处thumb_media_id即上传接口返回的media_id</td></tr><tr><td>author</td><td>否</td><td>图文消息的作者，不超过64个字节</td></tr><tr><td>content_source_url</td><td>否</td><td>图文消息点击“阅读原文”之后的页面链接</td></tr><tr><td>content</td><td>是</td><td>图文消息的内容，支持html标签，不超过666 K个字节<strong>（支持id转译）</strong></td></tr><tr><td>digest</td><td>否</td><td>图文消息的描述，不超过512个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><td>safe</td><td>否</td><td>表示是否是保密消息，0表示可对外分享，1表示不能分享且内容显示水印，2表示仅限在企业内分享，默认为0；注意仅mpnews类型的消息支持safe值为2，其他消息类型不支持</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h3 id="markdown%E6%B6%88%E6%81%AF" data-sign="dd71f66ace353949cd227becc868cf15" data-lines="2"><a class="anchor" href="#markdown%E6%B6%88%E6%81%AF"></a>markdown消息</h3><blockquote data-sign="ad672ca9dafe9b517965949ddf2cad1f_1" data-lines="1">目前仅支持<a href="#10167/%E6%94%AF%E6%8C%81%E7%9A%84markdown%E8%AF%AD%E6%B3%95" rel="nofollow">markdown语法的子集</a><br>微工作台（原企业号）不支持展示markdown消息</blockquote><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="2"><strong>请求示例：</strong></p><div data-sign="e6c7548dc421aec050307dfa35321e0f" data-type="codeBlock" data-lines="15">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1|PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"markdown"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"markdown"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"content"</span><span class="token operator">:</span> <span class="token string">"您的会议室已经预定，稍后会同步到`邮箱`  \n&gt;**事项详情**  \n&gt;事　项：&lt;font color=\"</span>info\<span class="token string">"&gt;开会&lt;/font&gt;  \n&gt;组织者：@miglioguan  \n&gt;参与者：@miglioguan、@kunliu、@jamdeezhou、@kanexiong、@kisonwang  \n&gt;  \n&gt;会议室：&lt;font color=\"</span>info\<span class="token string">"&gt;广州TIT 1楼 301&lt;/font&gt;  \n&gt;日　期：&lt;font color=\"</span>warning\<span class="token string">"&gt;2018年5月18日&lt;/font&gt;  \n&gt;时　间：&lt;font color=\"</span>comment\<span class="token string">"&gt;上午9:00-11:00&lt;/font&gt;  \n&gt;  \n&gt;请准时参加会议。  \n&gt;  \n&gt;如需修改会议信息，请点击：[修改会议信息](https://work.weixin.qq.com)"</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="72e2aa93d867e3bec00806cc752fde42" data-type="p" data-lines="2"><strong>示例效果：</strong><br><img src="images/90236/bac78f98.png" alt=""></p><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="229023de86656a6909e7ef74fbb2af56" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：markdown</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>content</td><td>是</td><td>markdown内容，最长不超过2048个字节，必须是utf8编码</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h3 id="%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF" data-sign="1bd8f108ffd904a11736324c3588b9bf" data-lines="1"><a class="anchor" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF"></a>小程序通知消息</h3><blockquote data-sign="d5eb0fa21c02c14c7338f033ddc9ecf0_3" data-lines="3">小程序通知消息只允许绑定了小程序的应用发送，<del>之前，消息会通过统一的会话【小程序通知】发送给用户</del>。<br>从2019年6月28日起，用户收到的小程序通知会出现在各个独立的应用中。<br>不支持@all全员发送<br>微工作台（原企业号）不支持展示小程序通知消息</blockquote><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="9ad8993c933bb850c5861b8fdd0e2366" data-type="codeBlock" data-lines="36">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"zhangsan|lisi"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span><span class="token operator">:</span> <span class="token string">"1|2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span><span class="token operator">:</span> <span class="token string">"1|2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"miniprogram_notice"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"miniprogram_notice"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"appid"</span><span class="token operator">:</span> <span class="token string">"wx123123123123123"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"page"</span><span class="token operator">:</span> <span class="token string">"pages/index?userid=zhangsan&amp;orderid=123123123"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"会议室预订成功通知"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"4月27日 16:16"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"emphasis_first_item"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"content_item"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"会议室"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"402"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"会议地点"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"广州TIT-402会议室"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"会议时间"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"2018年8月1日 09:00-09:30"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"参与人员"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"周剑轩"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="ac9c6402d908f541c1d1d9667fde5334" data-type="p" data-lines="2"><strong>示例效果：</strong><br><img src="images/90236/135185cc.png" alt=""></p><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="1e0388f99eb27507f994e306b157d0fa" data-lines="17">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：miniprogram_notice</td></tr><tr><td>appid</td><td>是</td><td>小程序appid，必须是与当前应用关联的小程序</td></tr><tr><td>page</td><td>否</td><td>点击消息卡片后的小程序页面，最长1024个字节，仅限本小程序内的页面。该字段不填则消息点击后不跳转。</td></tr><tr><td>title</td><td>是</td><td>消息标题，长度限制4-12个汉字<strong>（支持id转译）</strong></td></tr><tr><td>description</td><td>否</td><td>消息描述，长度限制4-12个汉字<strong>（支持id转译）</strong></td></tr><tr><td>emphasis_first_item</td><td>否</td><td>是否放大第一个content_item</td></tr><tr><td>content_item</td><td>否</td><td>消息内容键值对，最多允许10个item</td></tr><tr><td>key</td><td>否</td><td>长度10个汉字以内</td></tr><tr><td>value</td><td>否</td><td>长度30个汉字以内<strong>（支持id转译）</strong>   <br> key和value两个字段同时为空时，该键值对将被忽略</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="br4" data-type="br" data-lines="4">&nbsp;</p><p data-sign="972c590dce97f2d1210aaf725ff09c82" data-type="p" data-lines="1"><!-- ###任务卡片消息</p><blockquote data-sign="5b8eab239814245de45f34057e12436d_1" data-lines="1">仅企业微信3.1.6及以上版本支持<br><strong>请求示例：</strong></blockquote>

<div data-sign="b10dd6ecef01984723bd56993e59af69" data-type="codeBlock" data-lines="31">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"interactive_taskcard"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"interactive_taskcard"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"赵明登的礼物申请"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"description"</span> <span class="token operator">:</span> <span class="token string">"礼品：A31茶具套装\n用途：赠与小黑科技张总经理"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"url"</span> <span class="token operator">:</span> <span class="token string">"URL"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"task_id"</span> <span class="token operator">:</span> <span class="token string">"taskid123"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"btn"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">			<span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"key111"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"批准"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"color"</span><span class="token operator">:</span><span class="token string">"red"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"is_bold"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="code-line">			<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"key222"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"驳回"</span></span>
<span class="code-line">			<span class="token punctuation">}</span></span>
<span class="code-line">		<span class="token punctuation">]</span></span>
<span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p>

<div class="cherry-table-container" data-sign="2990c6e4a96435555dcc6af4737bab3f" data-lines="19">
        <table class="cherry-table"><thead><tH>参数</th><tH>是否必须</th><tH>说明</th></thead></tbody><tr><tD>touser</td><tD>否</td><tD>成员ID列表（消息接收者，多个接收者用‘&#124;’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><tD>toparty</td><tD>否</td><tD>部门ID列表，多个接收者用‘&#124;’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><tD>totag</td><tD>否</td><tD>标签ID列表，多个接收者用‘&#124;’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><tD>msgtype</td><tD>是</td><tD>消息类型，此时固定为：interactive_taskcard</td></tr><tr><tD>agentid</td><tD>是</td><tD>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><tD>title</td><tD>是</td><tD>标题，不超过128个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><tD>description</td><tD>否</td><tD>描述，不超过512个字节，超过会自动截断<strong>（支持id转译）</strong></td></tr><tr><tD>url</td><tD>否</td><tD>点击后跳转的链接。最长2048字节，请确保包含了协议头(http/https)</td></tr><tr><tD>task_id</td><tD>是</td><tD>任务id，同一个应用发送的任务卡片消息的任务id不能重复，只能由数字、字母和“_-@”组成，最长支持128字节</td></tr><tr><tD>btn</td><tD>是</td><tD>按钮列表，按钮个数为1~2个。</td></tr><tr><tD>btn:key</td><tD>是</td><tD>按钮key值，用户点击后，会产生任务卡片回调事件，回调事件会带上该key值，只能由数字、字母和“_-@”组成，最长支持128字节</td></tr><tr><tD>btn:name</td><tD>是</td><tD>按钮名称，最长支持18个字节，超过则截断</td></tr><tr><tD>btn:color</td><tD>否</td><tD>按钮字体颜色，可选“red”或者“blue”,默认为“blue”</td></tr><tr><tD>btn:is_bold</td><tD>否</td><tD>按钮字体是否加粗，默认false</td></tr><tr><tD>enable_id_trans</td><tD>否</td><tD>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><tD>enable_duplicate_check</td><tD>否</td><tD>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><tD>duplicate_check_interval</td><tD>否</td><tD>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><p data-sign="d1335f1b40900de105d728aa58e31b8b" data-type="p" data-lines="3"><strong>任务卡片消息展现 ：</strong><br><img src="http://p.qpic.cn/pic_wework/80330653/7f798570abf8a20977345ff10631cb998beab632442acd3d/0" style="width:360px;"/></p><p data-sign="678b3a49982bf312686e6b6cd5e826a0" data-type="p" data-lines="1"><strong>特殊说明</strong>：</p><ol data-sign="ad182915a05aca2a5b50c57e8c0f8f1clist5" data-lines="5" class="cherry-list__default" start="1"><li>任务卡片消息的展现支持简单的markdown语法，详情请见附录<strong><a href="#%E6%94%AF%E6%8C%81%E7%9A%84markdown%E8%AF%AD%E6%B3%95" rel="nofollow">支持的markdown语法</a></strong> 。</li><li>要发送该类型的消息，应用<strong>必须配置好回调URL</strong>，详见<strong><a href="#90000/90135/90930" rel="nofollow">配置应用回调</a></strong>，用户点击任务卡片的按钮后，企业微信会回调<strong><a href="#12974/%E4%BB%BB%E5%8A%A1%E5%8D%A1%E7%89%87%E4%BA%8B%E4%BB%B6%E6%8E%A8%E9%80%81" rel="nofollow">任务卡片事件</a></strong>到该URL，配置的URL服务<strong>必须</strong>按照<strong><a href="#90000/90135/90241/%E4%BB%BB%E5%8A%A1%E5%8D%A1%E7%89%87%E6%9B%B4%E6%96%B0%E6%B6%88%E6%81%AF" rel="nofollow">任务卡片更新消息</a></strong>协议返回数据，否则客户端会报错。</li><li>如果不想成员再点击卡片，可以通过<strong><a href="#90000/90135/91579" rel="nofollow">更新任务卡片消息状态</a></strong>接口更新卡片状态（该接口不可代替回调协议的返回数据，配置的回调URL服务<strong>必须按照协议返回数据</strong>）。<br><br>--></p><h3 id="%E6%A8%A1%E6%9D%BF%E5%8D%A1%E7%89%87%E6%B6%88%E6%81%AF" data-sign="6fa3a24419f01e500ebe3dc07a289bb7" data-lines="2"><a class="anchor" href="#%E6%A8%A1%E6%9D%BF%E5%8D%A1%E7%89%87%E6%B6%88%E6%81%AF"></a>模板卡片消息</h3><blockquote data-sign="bb8dd20c8acf413f43d792746fc3c341_2" data-lines="2">投票选择型和多项选择型卡片仅企业微信3.1.12及以上版本支持<br>文本通知型、图文展示型和按钮交互型三种卡片仅企业微信3.1.6及以上版本支持（但附件下载功能仍需更新至3.1.12）<br>微工作台（原企业号）不支持展示模板卡片消息</blockquote><p data-sign="24e3175e559a614cb8705f8442e1635d" data-type="p" data-lines="1"><strong>3.1.18版本新增</strong></p><ol data-sign="401b053cd9aaeba08b72a637bb24e790list4" data-lines="4" class="cherry-list__default" start="1"><li>source字段支持设置字体颜色</li><li>horizontal_content_list新增type 3，代表点击跳转成员详情（仅企业微信3.1.18及以上版本支持）</li><li>新增action_menu(右上角菜单)（仅企业微信3.1.18及以上版本支持）</li><li>quote_area(引用样式)、image_text_area(左图右文样式)、button_selection(按钮型卡片的下拉框样式)等字段</li></ol><p data-sign="4062031f34ec67df7422dc25a423febf" data-type="p" data-lines="1"><strong>特殊说明</strong></p><ol data-sign="ba6e319651806b10a85f6c7a1e207145list4" data-lines="4" class="cherry-list__default" start="1"><li>仅有 按钮交互型、投票选择型、多项选择型 以及填写了action_menu字段的文本通知型、图文展示型的卡片支持回调更新或通过接口更新卡片。</li><li>支持回调更新的卡片可支持用户点击触发交互事件，需要开发者设置的回调接口来处理回调事件，回调协议可见文档 <a href="#12974/%E6%A8%A1%E6%9D%BF%E5%8D%A1%E7%89%87%E4%BA%8B%E4%BB%B6%E6%8E%A8%E9%80%81" rel="nofollow">模板卡片事件推送</a>，注意 <strong>没有配置回调接口的应用不可发送支持回调的卡片</strong>。</li><li>开发者的服务收到回调事件后，需要根据协议返回相应的数据以更新卡片，对应的协议见文档 <a href="#12975/%E6%A8%A1%E6%9D%BF%E5%8D%A1%E7%89%87%E6%9B%B4%E6%96%B0%E6%B6%88%E6%81%AF" rel="nofollow">更新模版卡片消息</a>。</li><li>此接口发送支持回调更新的卡片消息之后，返回的参数里会带上response_code，可使用response_code调用<a href="#32086" rel="nofollow">更新模版卡片消息</a>接口，<strong>response_code 72小时内有效，且只能调用一次接口</strong>。</li></ol><h4 id="%E6%96%87%E6%9C%AC%E9%80%9A%E7%9F%A5%E5%9E%8B" data-sign="6e3a23a962ac4494f39c188cbfa2ed06" data-lines="2"><a class="anchor" href="#%E6%96%87%E6%9C%AC%E9%80%9A%E7%9F%A5%E5%9E%8B"></a>文本通知型</h4><p data-sign="29479108a8fe0599a4e4574e1dc3b274" data-type="p" data-lines="2"><img src="images/90236/9893efb1.png" style="width:640px;"></p><div data-sign="180a2f92c3e369e1a8211f09119c5a76" data-type="codeBlock" data-lines="87">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"template_card"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"template_card"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"card_type"</span> <span class="token operator">:</span> <span class="token string">"text_notice"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"icon_url"</span><span class="token operator">:</span> <span class="token string">"图片的url"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc_color"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"action_menu"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"卡片副交互辅助文本说明"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"action_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                <span class="token punctuation">{</span><span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"接受推送"</span><span class="token punctuation">,</span> <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token punctuation">{</span><span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"不再推送"</span><span class="token punctuation">,</span> <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"B"</span><span class="token punctuation">}</span></span>
<span class="code-line">            <span class="token punctuation">]</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"task_id"</span><span class="token operator">:</span> <span class="token string">"task_id"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"main_title"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"title"</span> <span class="token operator">:</span> <span class="token string">"欢迎使用企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span> <span class="token operator">:</span> <span class="token string">"您的好友正在邀请您加入企业微信"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"quote_area"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"企业微信的引用样式"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"quote_text"</span><span class="token operator">:</span> <span class="token string">"企业微信真好用呀真好用"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"emphasis_content"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"100"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"核心数据"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"sub_title_text"</span> <span class="token operator">:</span> <span class="token string">"下载企业微信还能抢红包！"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"horizontal_content_list"</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"邀请人"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"张三"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"企业微信官网"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"点击访问"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"企业微信下载"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"企业微信.apk"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"media_id"</span><span class="token operator">:</span> <span class="token string">"文件的media_id"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"员工信息"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"点击查看"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"zhangsan"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"jump_list"</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"企业微信官网"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"跳转小程序"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"appid"</span><span class="token operator">:</span> <span class="token string">"小程序的appid"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"pagepath"</span><span class="token operator">:</span> <span class="token string">"/index.html"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"card_action"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"appid"</span><span class="token operator">:</span> <span class="token string">"小程序的appid"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"pagepath"</span><span class="token operator">:</span> <span class="token string">"/index.html"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="6a67a1d56e25879a23ff9bfb59443556" data-lines="52">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：template_card</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>card_type</td><td>是</td><td>模板卡片类型，文本通知型卡片填写 "text_notice"</td></tr><tr><td>source</td><td>否</td><td>卡片来源样式信息，不需要来源样式可不填写</td></tr><tr><td>source.icon_url</td><td>否</td><td>来源图片的url，来源图片的尺寸建议为72*72</td></tr><tr><td>source.desc</td><td>否</td><td>来源图片的描述，建议不超过20个字，<strong>（支持id转译）</strong></td></tr><tr><td>source.desc_color</td><td>否</td><td>来源文字的颜色，目前支持：0(默认) 灰色，1 黑色，2 红色，3 绿色</td></tr><tr><td>action_menu</td><td>否</td><td>卡片右上角更多操作按钮</td></tr><tr><td>action_menu.desc</td><td>否</td><td>更多操作界面的描述</td></tr><tr><td>action_menu.action_list</td><td>是</td><td>操作列表，列表长度取值范围为 [1, 3]</td></tr><tr><td>action_menu.action_list.text</td><td>是</td><td>操作的描述文案</td></tr><tr><td>action_menu.action_list.key</td><td>是</td><td>操作key值，用户点击后，会产生回调事件将本参数作为EventKey返回，回调事件会带上该key值，最长支持1024字节，不可重复</td></tr><tr><td>main_title.title</td><td>否</td><td>一级标题，建议不超过36个字，文本通知型卡片本字段非必填，但不可本字段和sub_title_text都不填，<strong>（支持id转译）</strong></td></tr><tr><td>main_title.desc</td><td>否</td><td>标题辅助信息，建议不超过44个字，<strong>（支持id转译）</strong></td></tr><tr><td>quote_area</td><td>否</td><td>引用文献样式</td></tr><tr><td>quote_area.type</td><td>否</td><td>引用文献样式区域点击事件，0或不填代表没有点击事件，1 代表跳转url，2 代表跳转小程序</td></tr><tr><td>quote_area.url</td><td>否</td><td>点击跳转的url，quote_area.type是1时必填</td></tr><tr><td>quote_area.appid</td><td>否</td><td>点击跳转的小程序的appid，必须是与当前应用关联的小程序，quote_area.type是2时必填</td></tr><tr><td>quote_area.pagepath</td><td>否</td><td>点击跳转的小程序的pagepath，quote_area.type是2时选填</td></tr><tr><td>quote_area.title</td><td>否</td><td>引用文献样式的标题</td></tr><tr><td>quote_area.quote_text</td><td>否</td><td>引用文献样式的引用文案</td></tr><tr><td>emphasis_content</td><td>否</td><td>关键数据样式</td></tr><tr><td>emphasis_content.title</td><td>否</td><td>关键数据样式的数据内容，建议不超过14个字</td></tr><tr><td>emphasis_content.desc</td><td>否</td><td>关键数据样式的数据描述内容，建议不超过22个字</td></tr><tr><td>sub_title_text</td><td>否</td><td>二级普通文本，建议不超过160个字，<strong>（支持id转译）</strong></td></tr><tr><td>horizontal_content_list</td><td>否</td><td>二级标题+文本列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过6</td></tr><tr><td>horizontal_content_list.type</td><td>否</td><td>链接类型，0或不填代表不是链接，1 代表跳转url，2 代表下载附件，3 代表点击跳转成员详情</td></tr><tr><td>horizontal_content_list.keyname</td><td>是</td><td>二级标题，建议不超过5个字</td></tr><tr><td>horizontal_content_list.value</td><td>否</td><td>二级文本，如果horizontal_content_list.type是2，该字段代表文件名称（要包含文件类型），建议不超过30个字，<strong>（支持id转译）</strong></td></tr><tr><td>horizontal_content_list.url</td><td>否</td><td>链接跳转的url，horizontal_content_list.type是1时必填</td></tr><tr><td>horizontal_content_list.media_id</td><td>否</td><td>附件的media_id，horizontal_content_list.type是2时必填</td></tr><tr><td>horizontal_content_list.userid</td><td>否</td><td>成员详情的userid，horizontal_content_list.type是3时必填</td></tr><tr><td>jump_list</td><td>否</td><td>跳转指引样式的列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过3</td></tr><tr><td>jump_list.type</td><td>否</td><td>跳转链接类型，0或不填代表不是链接，1 代表跳转url，2 代表跳转小程序</td></tr><tr><td>jump_list.title</td><td>是</td><td>跳转链接样式的文案内容，建议不超过18个字</td></tr><tr><td>jump_list.url</td><td>否</td><td>跳转链接的url，jump_list.type是1时必填</td></tr><tr><td>jump_list.appid</td><td>否</td><td>跳转链接的小程序的appid，必须是与当前应用关联的小程序，jump_list.type是2时必填</td></tr><tr><td>jump_list.pagepath</td><td>否</td><td>跳转链接的小程序的pagepath，jump_list.type是2时选填</td></tr><tr><td>card_action</td><td>是</td><td>整体卡片的点击跳转事件，text_notice必填本字段</td></tr><tr><td>card_action.type</td><td>是</td><td>跳转事件类型，1 代表跳转url，2 代表打开小程序。text_notice卡片模版中该字段取值范围为[1,2]</td></tr><tr><td>card_action.url</td><td>否</td><td>跳转事件的url，card_action.type是1时必填</td></tr><tr><td>card_action.appid</td><td>否</td><td>跳转事件的小程序的appid，必须是与当前应用关联的小程序，card_action.type是2时必填</td></tr><tr><td>card_action.pagepath</td><td>否</td><td>跳转事件的小程序的pagepath，card_action.type是2时选填</td></tr><tr><td>task_id</td><td>否</td><td>任务id，同一个应用任务id不能重复，只能由数字、字母和“_-@”组成，最长128字节，填了action_menu字段的话本字段必填</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h4 id="%E5%9B%BE%E6%96%87%E5%B1%95%E7%A4%BA%E5%9E%8B" data-sign="3e411b0a39305f6347d87eb1b08f5b3c" data-lines="2"><a class="anchor" href="#%E5%9B%BE%E6%96%87%E5%B1%95%E7%A4%BA%E5%9E%8B"></a>图文展示型</h4><p data-sign="4a9ca2ce8d1ae6be9a5331fe9c9e7e6e" data-type="p" data-lines="2"><img src="images/90236/d9ce2d78.png" style="width:640px;"></p><div data-sign="0371b819c3643216ebeeefe5d3a662ef" data-type="codeBlock" data-lines="99">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"template_card"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"template_card"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"card_type"</span> <span class="token operator">:</span> <span class="token string">"news_notice"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"icon_url"</span><span class="token operator">:</span> <span class="token string">"图片的url"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc_color"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"action_menu"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"卡片副交互辅助文本说明"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"action_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                <span class="token punctuation">{</span><span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"接受推送"</span><span class="token punctuation">,</span> <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token punctuation">{</span><span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"不再推送"</span><span class="token punctuation">,</span> <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"B"</span><span class="token punctuation">}</span></span>
<span class="code-line">            <span class="token punctuation">]</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"task_id"</span><span class="token operator">:</span> <span class="token string">"task_id"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"main_title"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"title"</span> <span class="token operator">:</span> <span class="token string">"欢迎使用企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span> <span class="token operator">:</span> <span class="token string">"您的好友正在邀请您加入企业微信"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"quote_area"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"企业微信的引用样式"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"quote_text"</span><span class="token operator">:</span> <span class="token string">"企业微信真好用呀真好用"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"image_text_area"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"企业微信的左图右文样式"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"企业微信真好用呀真好用"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"image_url"</span><span class="token operator">:</span> <span class="token string">"https://img.iplaysoft.com/wp-content/uploads/2019/free-images/free_stock_photo_2x.jpg"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"card_image"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"图片的url"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"aspect_ratio"</span><span class="token operator">:</span> <span class="token number">1.3</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"vertical_content_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"惊喜红包等你来拿"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"下载企业微信还能抢红包！"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"horizontal_content_list"</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"邀请人"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"张三"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"企业微信官网"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"点击访问"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"企业微信下载"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"企业微信.apk"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"media_id"</span><span class="token operator">:</span> <span class="token string">"文件的media_id"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"员工信息"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"点击查看"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"zhangsan"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"jump_list"</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"企业微信官网"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"跳转小程序"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"appid"</span><span class="token operator">:</span> <span class="token string">"小程序的appid"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"pagepath"</span><span class="token operator">:</span> <span class="token string">"/index.html"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"card_action"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"appid"</span><span class="token operator">:</span> <span class="token string">"小程序的appid"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"pagepath"</span><span class="token operator">:</span> <span class="token string">"/index.html"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="e97061f8f10bc7fbeb9ee05ae4ea57b7" data-lines="62">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：template_card</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>card_type</td><td>是</td><td>模板卡片类型，图文展示型卡片此处填写 "news_notice"</td></tr><tr><td>source</td><td>否</td><td>卡片来源样式信息，不需要来源样式可不填写</td></tr><tr><td>source.icon_url</td><td>否</td><td>来源图片的url，来源图片的尺寸建议为72*72</td></tr><tr><td>source.desc</td><td>否</td><td>来源图片的描述，建议不超过20个字，<strong>（支持id转译）</strong></td></tr><tr><td>source.desc_color</td><td>否</td><td>来源文字的颜色，目前支持：0(默认) 灰色，1 黑色，2 红色，3 绿色</td></tr><tr><td>action_menu</td><td>否</td><td>卡片右上角更多操作按钮</td></tr><tr><td>action_menu.desc</td><td>否</td><td>更多操作界面的描述</td></tr><tr><td>action_menu.action_list</td><td>是</td><td>操作列表，列表长度取值范围为 [1, 3]</td></tr><tr><td>action_menu.action_list.text</td><td>是</td><td>操作的描述文案</td></tr><tr><td>action_menu.action_list.key</td><td>是</td><td>操作key值，用户点击后，会产生回调事件将本参数作为EventKey返回，回调事件会带上该key值，最长支持1024字节，不可重复</td></tr><tr><td>main_title.title</td><td>是</td><td>一级标题，建议不超过36个字，<strong>（支持id转译）</strong></td></tr><tr><td>main_title.desc</td><td>否</td><td>标题辅助信息，建议不超过44个字，<strong>（支持id转译）</strong></td></tr><tr><td>quote_area</td><td>否</td><td>引用文献样式</td></tr><tr><td>quote_area.type</td><td>否</td><td>引用文献样式区域点击事件，0或不填代表没有点击事件，1 代表跳转url，2 代表跳转小程序</td></tr><tr><td>quote_area.url</td><td>否</td><td>点击跳转的url，quote_area.type是1时必填</td></tr><tr><td>quote_area.appid</td><td>否</td><td>点击跳转的小程序的appid，必须是与当前应用关联的小程序，quote_area.type是2时必填</td></tr><tr><td>quote_area.pagepath</td><td>否</td><td>点击跳转的小程序的pagepath，quote_area.type是2时选填</td></tr><tr><td>quote_area.title</td><td>否</td><td>引用文献样式的标题</td></tr><tr><td>quote_area.quote_text</td><td>否</td><td>引用文献样式的引用文案</td></tr><tr><td>image_text_area</td><td>否</td><td>左图右文样式，news_notice类型的卡片，card_image和image_text_area两者必填一个字段，不可都不填</td></tr><tr><td>image_text_area.type</td><td>否</td><td>左图右文样式区域点击事件，0或不填代表没有点击事件，1 代表跳转url，2 代表跳转小程序</td></tr><tr><td>image_text_area.url</td><td>否</td><td>点击跳转的url，image_text_area.type是1时必填</td></tr><tr><td>image_text_area.appid</td><td>否</td><td>点击跳转的小程序的appid，必须是与当前应用关联的小程序，image_text_area.type是2时必填</td></tr><tr><td>image_text_area.pagepath</td><td>否</td><td>点击跳转的小程序的pagepath，image_text_area.type是2时选填</td></tr><tr><td>image_text_area.title</td><td>否</td><td>左图右文样式的标题</td></tr><tr><td>image_text_area.desc</td><td>否</td><td>左图右文样式的描述</td></tr><tr><td>image_text_area.image_url</td><td>是</td><td>左图右文样式的图片url</td></tr><tr><td>card_image</td><td>否</td><td>图片样式，news_notice类型的卡片，card_image和image_text_area两者必填一个字段，不可都不填</td></tr><tr><td>card_image.url</td><td>是</td><td>图片的url</td></tr><tr><td>card_image.aspect_ratio</td><td>否</td><td>图片的宽高比，宽高比要小于2.25，大于1.3，不填该参数默认1.3</td></tr><tr><td>vertical_content_list</td><td>否</td><td>卡片二级垂直内容，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过4</td></tr><tr><td>vertical_content_list.title</td><td>是</td><td>卡片二级标题，建议不超过38个字</td></tr><tr><td>vertical_content_list.desc</td><td>否</td><td>二级普通文本，建议不超过160个字</td></tr><tr><td>horizontal_content_list</td><td>否</td><td>二级标题+文本列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过6</td></tr><tr><td>horizontal_content_list.type</td><td>否</td><td>链接类型，0或不填代表不是链接，1 代表跳转url，2 代表下载附件，3 代表点击跳转成员详情</td></tr><tr><td>horizontal_content_list.keyname</td><td>是</td><td>二级标题，建议不超过5个字</td></tr><tr><td>horizontal_content_list.value</td><td>否</td><td>二级文本，如果horizontal_content_list.type是2，该字段代表文件名称（要包含文件类型），建议不超过30个字，<strong>（支持id转译）</strong></td></tr><tr><td>horizontal_content_list.url</td><td>否</td><td>链接跳转的url，horizontal_content_list.type是1时必填</td></tr><tr><td>horizontal_content_list.media_id</td><td>否</td><td>附件的media_id，horizontal_content_list.type是2时必填</td></tr><tr><td>horizontal_content_list.userid</td><td>否</td><td>成员详情的userid，horizontal_content_list.type是3时必填</td></tr><tr><td>jump_list</td><td>否</td><td>跳转指引样式的列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过3</td></tr><tr><td>jump_list.type</td><td>否</td><td>跳转链接类型，0或不填代表不是链接，1 代表跳转url，2 代表跳转小程序</td></tr><tr><td>jump_list.title</td><td>是</td><td>跳转链接样式的文案内容，建议不超过18个字</td></tr><tr><td>jump_list.url</td><td>否</td><td>跳转链接的url，jump_list.type是1时必填</td></tr><tr><td>jump_list.appid</td><td>否</td><td>跳转链接的小程序的appid，必须是与当前应用关联的小程序，jump_list.type是2时必填</td></tr><tr><td>jump_list.pagepath</td><td>否</td><td>跳转链接的小程序的pagepath，jump_list.type是2时选填</td></tr><tr><td>card_action</td><td>是</td><td>整体卡片的点击跳转事件，news_notice必填本字段</td></tr><tr><td>card_action.type</td><td>是</td><td>跳转事件类型，1 代表跳转url，2 代表打开小程序。news_notice卡片模版中该字段取值范围为[1,2]</td></tr><tr><td>card_action.url</td><td>否</td><td>跳转事件的url，card_action.type是1时必填</td></tr><tr><td>card_action.appid</td><td>否</td><td>跳转事件的小程序的appid，必须是与当前应用关联的小程序，card_action.type是2时必填</td></tr><tr><td>card_action.pagepath</td><td>否</td><td>跳转事件的小程序的pagepath，card_action.type是2时选填</td></tr><tr><td>task_id</td><td>否</td><td>任务id，同一个应用任务id不能重复，只能由数字、字母和“_-@”组成，最长128字节，填了action_menu字段的话本字段必填</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h4 id="%E6%8C%89%E9%92%AE%E4%BA%A4%E4%BA%92%E5%9E%8B" data-sign="3506a358c876cc16a8e7103487521a18" data-lines="2"><a class="anchor" href="#%E6%8C%89%E9%92%AE%E4%BA%A4%E4%BA%92%E5%9E%8B"></a>按钮交互型</h4><p data-sign="9ba9ffca234a6e256491b48426ce716a" data-type="p" data-lines="2"><img src="images/90236/430ee30a.png" style="width:640px;"></p><div data-sign="b31db02c155c43c26e6762ee201bb054" data-type="codeBlock" data-lines="97">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"template_card"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"template_card"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"card_type"</span> <span class="token operator">:</span> <span class="token string">"button_interaction"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"icon_url"</span><span class="token operator">:</span> <span class="token string">"图片的url"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc_color"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"action_menu"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"卡片副交互辅助文本说明"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"action_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                <span class="token punctuation">{</span><span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"接受推送"</span><span class="token punctuation">,</span> <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token punctuation">{</span><span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"不再推送"</span><span class="token punctuation">,</span> <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"B"</span><span class="token punctuation">}</span></span>
<span class="code-line">            <span class="token punctuation">]</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"main_title"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"title"</span> <span class="token operator">:</span> <span class="token string">"欢迎使用企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span> <span class="token operator">:</span> <span class="token string">"您的好友正在邀请您加入企业微信"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"quote_area"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"企业微信的引用样式"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"quote_text"</span><span class="token operator">:</span> <span class="token string">"企业微信真好用呀真好用"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"sub_title_text"</span> <span class="token operator">:</span> <span class="token string">"下载企业微信还能抢红包！"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"horizontal_content_list"</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"邀请人"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"张三"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"企业微信官网"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"点击访问"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"企业微信下载"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"企业微信.apk"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"media_id"</span><span class="token operator">:</span> <span class="token string">"文件的media_id"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"keyname"</span><span class="token operator">:</span> <span class="token string">"员工信息"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"点击查看"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"zhangsan"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"card_action"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://work.weixin.qq.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"appid"</span><span class="token operator">:</span> <span class="token string">"小程序的appid"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"pagepath"</span><span class="token operator">:</span> <span class="token string">"/index.html"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"task_id"</span><span class="token operator">:</span> <span class="token string">"task_id"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"button_selection"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"question_key"</span><span class="token operator">:</span> <span class="token string">"btn_question_key1"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"企业微信评分"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"option_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                <span class="token punctuation">{</span></span>
<span class="code-line">                    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"btn_selection_id1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"100分"</span></span>
<span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token punctuation">{</span></span>
<span class="code-line">                    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"btn_selection_id2"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"101分"</span></span>
<span class="code-line">                <span class="token punctuation">}</span></span>
<span class="code-line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"selected_id"</span><span class="token operator">:</span> <span class="token string">"btn_selection_id1"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"button_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"按钮1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"style"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"button_key_1"</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"按钮2"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"style"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"button_key_2"</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="67ea7bf28f570f39280d494615d0b378" data-lines="52">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：template_card</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>card_type</td><td>是</td><td>模板卡片类型，按钮交互型卡片填写"button_interaction"</td></tr><tr><td>source</td><td>否</td><td>卡片来源样式信息，不需要来源样式可不填写</td></tr><tr><td>source.icon_url</td><td>否</td><td>来源图片的url，来源图片的尺寸建议为72*72</td></tr><tr><td>source.desc</td><td>否</td><td>来源图片的描述，建议不超过20个字，<strong>（支持id转译）</strong></td></tr><tr><td>source.desc_color</td><td>否</td><td>来源文字的颜色，目前支持：0(默认) 灰色，1 黑色，2 红色，3 绿色</td></tr><tr><td>action_menu</td><td>否</td><td>卡片右上角更多操作按钮</td></tr><tr><td>action_menu.desc</td><td>否</td><td>更多操作界面的描述</td></tr><tr><td>action_menu.action_list</td><td>是</td><td>操作列表，列表长度取值范围为 [1, 3]</td></tr><tr><td>action_menu.action_list.text</td><td>是</td><td>操作的描述文案</td></tr><tr><td>action_menu.action_list.key</td><td>是</td><td>操作key值，用户点击后，会产生回调事件将本参数作为EventKey返回，回调事件会带上该key值，最长支持1024字节，不可重复</td></tr><tr><td>main_title.title</td><td>是</td><td>一级标题，建议不超过36个字，<strong>（支持id转译）</strong></td></tr><tr><td>main_title.desc</td><td>否</td><td>标题辅助信息，建议不超过44个字，<strong>（支持id转译）</strong></td></tr><tr><td>quote_area</td><td>否</td><td>引用文献样式</td></tr><tr><td>quote_area.type</td><td>否</td><td>引用文献样式区域点击事件，0或不填代表没有点击事件，1 代表跳转url，2 代表跳转小程序</td></tr><tr><td>quote_area.url</td><td>否</td><td>点击跳转的url，quote_area.type是1时必填</td></tr><tr><td>quote_area.appid</td><td>否</td><td>点击跳转的小程序的appid，必须是与当前应用关联的小程序，quote_area.type是2时必填</td></tr><tr><td>quote_area.pagepath</td><td>否</td><td>点击跳转的小程序的pagepath，quote_area.type是2时选填</td></tr><tr><td>quote_area.title</td><td>否</td><td>引用文献样式的标题</td></tr><tr><td>quote_area.quote_text</td><td>否</td><td>引用文献样式的引用文案</td></tr><tr><td>sub_title_text</td><td>否</td><td>二级普通文本，建议不超过160个字，<strong>（支持id转译）</strong></td></tr><tr><td>horizontal_content_list</td><td>否</td><td>二级标题+文本列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过6</td></tr><tr><td>horizontal_content_list.type</td><td>否</td><td>链接类型，0或不填代表不是链接，1 代表跳转url，2 代表下载附件，3 代表点击跳转成员详情</td></tr><tr><td>horizontal_content_list.keyname</td><td>是</td><td>二级标题，建议不超过5个字</td></tr><tr><td>horizontal_content_list.value</td><td>否</td><td>二级文本，如果horizontal_content_list.type是2，该字段代表文件名称（要包含文件类型），建议不超过30个字，<strong>（支持id转译）</strong></td></tr><tr><td>horizontal_content_list.url</td><td>否</td><td>链接跳转的url，horizontal_content_list.type是1时必填</td></tr><tr><td>horizontal_content_list.media_id</td><td>否</td><td>附件的media_id，horizontal_content_list.type是2时必填</td></tr><tr><td>horizontal_content_list.userid</td><td>否</td><td>成员详情的userid，horizontal_content_list.type是3时必填</td></tr><tr><td>card_action</td><td>否</td><td>整体卡片的点击跳转事件</td></tr><tr><td>card_action.type</td><td>否</td><td>跳转事件类型，0或不填代表不是链接，1 代表跳转url，2 代表打开小程序</td></tr><tr><td>card_action.url</td><td>否</td><td>跳转事件的url，card_action.type是1时必填</td></tr><tr><td>card_action.appid</td><td>否</td><td>跳转事件的小程序的appid，必须是与当前应用关联的小程序，card_action.type是2时必填</td></tr><tr><td>card_action.pagepath</td><td>否</td><td>跳转事件的小程序的pagepath，card_action.type是2时选填</td></tr><tr><td>task_id</td><td>是</td><td>任务id，同一个应用任务id不能重复，只能由数字、字母和“_-@”组成，最长128字节</td></tr><tr><td>button_selection.question_key</td><td>是</td><td>下拉式的选择器的key，用户提交选项后，会产生回调事件，回调事件会带上该key值表示该题，最长支持1024字节</td></tr><tr><td>button_selection.title</td><td>否</td><td>下拉式的选择器左边的标题</td></tr><tr><td>button_selection.option_list</td><td>是</td><td>选项列表，下拉选项不超过 10 个，最少1个</td></tr><tr><td>button_selection.selected_id</td><td>否</td><td>默认选定的id，不填或错填默认第一个</td></tr><tr><td>button_selection.option_list.id</td><td>是</td><td>下拉式的选择器选项的id，用户提交后，会产生回调事件，回调事件会带上该id值表示该选项，最长支持128字节，不可重复</td></tr><tr><td>button_selection.option_list.text</td><td>是</td><td>下拉式的选择器选项的文案，建议不超过16个字</td></tr><tr><td>button_list</td><td>是</td><td>按钮列表，列表长度不超过6</td></tr><tr><td>button_list.type</td><td>否</td><td>按钮点击事件类型，0 或不填代表回调点击事件，1 代表跳转url</td></tr><tr><td>button_list.text</td><td>是</td><td>按钮文案，建议不超过10个字</td></tr><tr><td>button_list.style</td><td>否</td><td>按钮样式，目前可填1~4，不填或错填默认1</td></tr><tr><td>button_list.key</td><td>否</td><td>按钮key值，用户点击后，会产生回调事件将本参数作为EventKey返回，回调事件会带上该key值，最长支持1024字节，不可重复，button_list.type是0时必填</td></tr><tr><td>button_list.url</td><td>否</td><td>跳转事件的url，button_list.type是1时必填</td></tr></tbody></table></div><p data-sign="b14a02f4fe2fd0291c42fd924e058aa7" data-type="p" data-lines="4">备注：<br>按钮样式<br><br><img src="images/90236/6d844f2e.png" width="360/"></p><h4 id="%E6%8A%95%E7%A5%A8%E9%80%89%E6%8B%A9%E5%9E%8B" data-sign="cadb6758d586b82ee0e53b79596603a0" data-lines="2"><a class="anchor" href="#%E6%8A%95%E7%A5%A8%E9%80%89%E6%8B%A9%E5%9E%8B"></a>投票选择型</h4><p data-sign="51a78935c06d3b2a1ebe93d018b0565b" data-type="p" data-lines="2"><img src="images/90236/1dea2041.png" style="width:640px;"></p><div data-sign="91deb426a2e7c7aa949f637de44dd6f7" data-type="codeBlock" data-lines="45">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"template_card"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"template_card"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"card_type"</span> <span class="token operator">:</span> <span class="token string">"vote_interaction"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"icon_url"</span><span class="token operator">:</span> <span class="token string">"图片的url"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"企业微信"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"main_title"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"title"</span> <span class="token operator">:</span> <span class="token string">"欢迎使用企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span> <span class="token operator">:</span> <span class="token string">"您的好友正在邀请您加入企业微信"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"task_id"</span><span class="token operator">:</span> <span class="token string">"task_id"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"checkbox"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"question_key"</span><span class="token operator">:</span> <span class="token string">"question_key1"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"option_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                <span class="token punctuation">{</span></span>
<span class="code-line">                    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"option_id1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"选择题选项1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"is_checked"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token punctuation">{</span></span>
<span class="code-line">                    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"option_id2"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"选择题选项2"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"is_checked"</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="code-line">                <span class="token punctuation">}</span></span>
<span class="code-line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"submit_button"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"提交"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"key"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="3ae08a6974a706115b07fc700b804cb5" data-lines="27">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：template_card</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>card_type</td><td>是</td><td>模板卡片类型，投票选择型卡片填写"vote_interaction"</td></tr><tr><td>source</td><td>否</td><td>卡片来源样式信息，不需要来源样式可不填写</td></tr><tr><td>source.icon_url</td><td>否</td><td>来源图片的url，来源图片的尺寸建议为72*72</td></tr><tr><td>source.desc</td><td>否</td><td>来源图片的描述，建议不超过20个字，<strong>（支持id转译）</strong></td></tr><tr><td>main_title.title</td><td>是</td><td>一级标题，建议不超过16个字，<strong>（支持id转译）</strong></td></tr><tr><td>main_title.desc</td><td>否</td><td>二级普通文本，建议不超过160个字，<strong>（支持id转译）</strong></td></tr><tr><td>task_id</td><td>是</td><td>任务id，同一个应用任务id不能重复，只能由数字、字母和“_-@”组成，最长128字节</td></tr><tr><td>checkbox</td><td>是</td><td>选择题样式</td></tr><tr><td>checkbox.question_key</td><td>是</td><td>选择题key值，用户提交选项后，会产生回调事件，回调事件会带上该key值表示该题，最长支持1024字节</td></tr><tr><td>checkbox.mode</td><td>否</td><td>选择题模式，单选：0，多选：1，不填默认0</td></tr><tr><td>checkbox.option_list</td><td>是</td><td>选项list，选项个数不超过 20 个，最少1个</td></tr><tr><td>checkbox.option_list.id</td><td>是</td><td>选项id，用户提交选项后，会产生回调事件，回调事件会带上该id值表示该选项，最长支持128字节，不可重复</td></tr><tr><td>checkbox.option_list.text</td><td>是</td><td>选项文案描述，建议不超过17个字</td></tr><tr><td>checkbox.option_list.is_checked</td><td>是</td><td>该选项是否要默认选中</td></tr><tr><td>submit_button</td><td>是</td><td>提交按钮样式</td></tr><tr><td>submit_button.text</td><td>是</td><td>按钮文案，建议不超过10个字，不填默认为提交</td></tr><tr><td>submit_button.key</td><td>是</td><td>提交按钮的key，会产生回调事件将本参数作为EventKey返回，最长支持1024字节</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h4 id="%E5%A4%9A%E9%A1%B9%E9%80%89%E6%8B%A9%E5%9E%8B" data-sign="c2053db4892295ea5b37230d2d9c2176" data-lines="2"><a class="anchor" href="#%E5%A4%9A%E9%A1%B9%E9%80%89%E6%8B%A9%E5%9E%8B"></a>多项选择型</h4><p data-sign="30bd0054b4c1f5393f25cd46b29e492d" data-type="p" data-lines="2"><img src="images/90236/d1258fa6.png" style="width:640px;"></p><div data-sign="710f47bf6a6b2185de43485e3ed1f8ea" data-type="codeBlock" data-lines="61">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"touser"</span> <span class="token operator">:</span> <span class="token string">"UserID1|UserID2|UserID3"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"toparty"</span> <span class="token operator">:</span> <span class="token string">"PartyID1 | PartyID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"totag"</span> <span class="token operator">:</span> <span class="token string">"TagID1 | TagID2"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"msgtype"</span> <span class="token operator">:</span> <span class="token string">"template_card"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"agentid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"template_card"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"card_type"</span> <span class="token operator">:</span> <span class="token string">"multiple_interaction"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"icon_url"</span><span class="token operator">:</span> <span class="token string">"图片的url"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"企业微信"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"main_title"</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"title"</span> <span class="token operator">:</span> <span class="token string">"欢迎使用企业微信"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"desc"</span> <span class="token operator">:</span> <span class="token string">"您的好友正在邀请您加入企业微信"</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"task_id"</span><span class="token operator">:</span> <span class="token string">"task_id"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"select_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"question_key"</span><span class="token operator">:</span> <span class="token string">"question_key1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"选择器标签1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"selected_id"</span><span class="token operator">:</span> <span class="token string">"selection_id1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"option_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                    <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"selection_id1"</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"选择器选项1"</span></span>
<span class="code-line">                    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"selection_id2"</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"选择器选项2"</span></span>
<span class="code-line">                    <span class="token punctuation">}</span></span>
<span class="code-line">                <span class="token punctuation">]</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"question_key"</span><span class="token operator">:</span> <span class="token string">"question_key2"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"选择器标签2"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"selected_id"</span><span class="token operator">:</span> <span class="token string">"selection_id3"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"option_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                    <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"selection_id3"</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"选择器选项3"</span></span>
<span class="code-line">                    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"selection_id4"</span><span class="token punctuation">,</span></span>
<span class="code-line">                        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"选择器选项4"</span></span>
<span class="code-line">                    <span class="token punctuation">}</span></span>
<span class="code-line">                <span class="token punctuation">]</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"submit_button"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"提交"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"key"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_id_trans"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"enable_duplicate_check"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"duplicate_check_interval"</span><span class="token operator">:</span> <span class="token number">1800</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="1bf1b07a9532b44afb484b67c73ca654" data-lines="27">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>touser</td><td>否</td><td>成员ID列表（消息接收者，多个接收者用‘|’分隔，最多支持1000个）。特殊情况：指定为@all，则向关注该企业应用的全部成员发送</td></tr><tr><td>toparty</td><td>否</td><td>部门ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>totag</td><td>否</td><td>标签ID列表，多个接收者用‘|’分隔，最多支持100个。当touser为@all时忽略本参数</td></tr><tr><td>msgtype</td><td>是</td><td>消息类型，此时固定为：template_card</td></tr><tr><td>agentid</td><td>是</td><td>企业应用的id，整型。企业内部开发，可在应用的设置页面查看；第三方服务商，可通过接口 <a href="#10975/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E4%BF%A1%E6%81%AF" rel="nofollow">获取企业授权信息</a> 获取该参数值</td></tr><tr><td>card_type</td><td>是</td><td>模板卡片类型，多项选择型卡片填写 "multiple_interaction"</td></tr><tr><td>source</td><td>否</td><td>卡片来源样式信息，不需要来源样式可不填写</td></tr><tr><td>source.icon_url</td><td>否</td><td>来源图片的url，来源图片的尺寸建议为72*72</td></tr><tr><td>source.desc</td><td>否</td><td>来源图片的描述，建议不超过20个字，<strong>（支持id转译）</strong></td></tr><tr><td>main_title.title</td><td>是</td><td>一级标题，建议不超过36个字，<strong>（支持id转译）</strong></td></tr><tr><td>main_title.desc</td><td>否</td><td>标题辅助信息，建议不超过160个字，<strong>（支持id转译）</strong></td></tr><tr><td>task_id</td><td>是</td><td>任务id，同一个应用任务id不能重复，只能由数字、字母和“_-@”组成，最长128字节</td></tr><tr><td>select_list</td><td>是</td><td>下拉式的选择器列表，multiple_interaction类型的卡片该字段不可为空，一个消息最多支持 3 个选择器</td></tr><tr><td>select_list.question_key</td><td>是</td><td>下拉式的选择器题目的key，用户提交选项后，会产生回调事件，回调事件会带上该key值表示该题，最长支持1024字节，不可重复</td></tr><tr><td>select_list.title</td><td>否</td><td>下拉式的选择器上面的title</td></tr><tr><td>select_list.option_list</td><td>是</td><td>选项列表，下拉选项不超过 10 个，最少1个</td></tr><tr><td>select_list.selected_id</td><td>否</td><td>默认选定的id，不填或错填默认第一个</td></tr><tr><td>select_list.option_list.id</td><td>是</td><td>下拉式的选择器选项的id，用户提交选项后，会产生回调事件，回调事件会带上该id值表示该选项，最长支持128字节，不可重复</td></tr><tr><td>select_list.option_list.text</td><td>是</td><td>下拉式的选择器选项的文案，建议不超过16个字</td></tr><tr><td>submit_button</td><td>是</td><td>提交按钮样式</td></tr><tr><td>submit_button.text</td><td>是</td><td>按钮文案，建议不超过10个字，不填默认为提交</td></tr><tr><td>submit_button.key</td><td>是</td><td>提交按钮的key，会产生回调事件将本参数作为EventKey返回，最长支持1024字节</td></tr><tr><td>enable_id_trans</td><td>否</td><td>表示是否开启id转译，0表示否，1表示是，默认0</td></tr><tr><td>enable_duplicate_check</td><td>否</td><td>表示是否开启重复消息检查，0表示否，1表示是，默认0</td></tr><tr><td>duplicate_check_interval</td><td>否</td><td>表示是否重复消息检查的时间间隔，默认1800s，最大不超过4小时</td></tr></tbody></table></div><h2 id="%E9%99%84%E5%BD%95" data-sign="7027f9123b51754d4c9588fad8fab2ce" data-lines="2"><a class="anchor" href="#%E9%99%84%E5%BD%95"></a>附录</h2><h3 id="%E6%94%AF%E6%8C%81%E7%9A%84markdown%E8%AF%AD%E6%B3%95" data-sign="eeb433e2798d98a8d67e3dea66d63649" data-lines="1"><a class="anchor" href="#%E6%94%AF%E6%8C%81%E7%9A%84markdown%E8%AF%AD%E6%B3%95"></a>支持的markdown语法</h3><p data-sign="b29947745537ab38e2d869bd7253f8da" data-type="p" data-lines="1">目前应用消息中支持的markdown语法是如下的子集：</p><ol data-sign="9690bccd253fa07a7c340c3acd8beeb5list12" data-lines="12" class="cherry-list__default" start="1"><li>标题 （支持1至6级标题，注意#与文字中间要有空格） <br><div data-sign="0cecc1ee786ccb7297e484fe45b83451" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"># 标题一</span>
<span class="code-line">## 标题二</span>
<span class="code-line">### 标题三</span>
<span class="code-line">#### 标题四</span>
<span class="code-line">##### 标题五</span>
<span class="code-line">###### 标题六</span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>加粗<br><div data-sign="d9dc9022d400159f32408ff156700834" data-type="codeBlock" data-lines="3">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">**</span>bold<span class="token operator">**</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>链接<br><div data-sign="a64984501dfe28dca7ba5ff39dba025e" data-type="codeBlock" data-lines="3">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">[</span>这是一个链接<span class="token punctuation">]</span><span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>work<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>qq<span class="token punctuation">.</span>com<span class="token operator">/</span>api<span class="token operator">/</span>doc<span class="token punctuation">)</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>行内代码段（暂不支持跨行）<br><div data-sign="2181cee78321b13281e88efb9f181e06" data-type="codeBlock" data-lines="3">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">code</span><span class="token template-punctuation string">`</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>引用<br><div data-sign="aa1492adfffdda1517445f0cb5037f07" data-type="codeBlock" data-lines="3">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&gt;</span> 引用文字</span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>字体颜色(只支持3种内置颜色)<br><div data-sign="3e8b9dc9203505cf044115faa7f06cb3" data-type="codeBlock" data-lines="5">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>font color<span class="token operator">=</span><span class="token string">"info"</span><span class="token operator">&gt;</span>绿色<span class="token operator">&lt;</span><span class="token operator">/</span>font<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>font color<span class="token operator">=</span><span class="token string">"comment"</span><span class="token operator">&gt;</span>灰色<span class="token operator">&lt;</span><span class="token operator">/</span>font<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>font color<span class="token operator">=</span><span class="token string">"warning"</span><span class="token operator">&gt;</span>橙红色<span class="token operator">&lt;</span><span class="token operator">/</span>font<span class="token operator">&gt;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li></ol><h3 id="id%E8%BD%AC%E8%AF%91%E8%AF%B4%E6%98%8E" data-sign="c50d09b5d234d1f87367e4407f5e4923" data-lines="2"><a class="anchor" href="#id%E8%BD%AC%E8%AF%91%E8%AF%B4%E6%98%8E"></a>id转译说明</h3><p data-sign="334a5096ed383bb536e3eca36acc6c71" data-type="p" data-lines="1">1.支持的消息类型和对应的字段</p><div class="cherry-table-container" data-sign="33415ddcdb145548ecf8a7c7ffbe723f" data-lines="9">
        <table class="cherry-table"><thead><tr><th>消息类型</th><th>支持字段</th></tr></thead><tbody><tr><td>文本（text）</td><td>content</td></tr><tr><td>文本卡片（textcard）</td><td>title、description</td></tr><tr><td>图文（news）</td><td>title、description</td></tr><tr><td>图文（mpnews）</td><td>title、digest、content</td></tr><tr><td>小程序通知（miniprogram_notice）</td><td>title、description、content_item.value</td></tr><tr><td>模版消息（template_msg）</td><td>value</td></tr><tr><td>模板卡片消息（template_card）</td><td>source.desc、main_title.title、main_title.desc、sub_title_text、horizontal_content_list.value</td></tr></tbody></table></div><p data-sign="c0b868f3e8315a2b9361656a786a8d93" data-type="p" data-lines="2">2.id转译模版语法</p><div data-sign="0d0e2d06a4ecc0571534f7c8072fcbc5" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">$departmentName<span class="token operator">=</span><span class="token constant">DEPARTMENT_ID</span>$</span>
<span class="code-line">$userName<span class="token operator">=</span><span class="token constant">USERID</span>$</span>
<span class="code-line">$userAlias<span class="token operator">=</span><span class="token constant">USERID</span>$</span>
<span class="code-line">$userAliasOrName<span class="token operator">=</span><span class="token constant">USERID</span>$</span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="ea142d84297b3763ac9905e09731203c" data-type="p" data-lines="6">其中 DEPARTMENT_ID 是数字类型的部门id，USERID 是<a href="#14953/userid" rel="nofollow">成员账号</a>。<br>譬如，<br>将<code>$departmentName=1$</code>替换成部门id为<code>1</code>对应的部门名，如“企业微信部”；<br>将<code>$userName=lisi007$</code>替换成userid为<code>lisi007</code>对应的用户姓名，如“李四”；<br>将<code>$userAlias=lisi007$</code>替换成userid为<code>lisi007</code>对应的用户别名，如“lisi”；<br>将<code>$userAliasOrName=lisi007$</code>替换成userid为<code>lisi007</code>对应的用户别名或姓名，别名优先级高于姓名，如"lisi"。</p><blockquote data-sign="afd108f80188a353bf1b7f79a0d0a2f4_2" data-lines="2">若输入的模板不符合语法、不在权限范围内或无效的userid或者部门ID，则不替换该项内容，保留原样<br>转译userAlias时，如果用户没有别名，则不替换该项内容，保留原样<br>转译userAliasOrName时，如果用户有别名，则替换为别名；否则，将替换为姓名</blockquote><p data-sign="3beb967e5467cfaab10b63b8fb10c884" data-type="p" data-lines="1">在<strong>企业授权了会话内容存档接口权限</strong>时，也支持转译消息内容和群聊名称，语法如下：</p><div data-sign="6f4f48a56a5489248b6ade6d0a378d38" data-type="codeBlock" data-lines="5">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">$chatName<span class="token operator">=</span><span class="token constant">CHATID</span>$</span>
<span class="code-line">$msgContent<span class="token operator">=</span><span class="token constant">MSGID</span><span class="token operator">/</span><span class="token constant">SECRET</span><span class="token operator">-</span><span class="token constant">KEY</span>$</span>
<span class="code-line">$externalUserName<span class="token operator">=</span><span class="token constant">EXTERNAL_USERID</span>$</span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><ul data-sign="7558fe7b785f27f9dc16187fac59bb3elist4" data-lines="4" class="cherry-list__default"><li>CHATID是群聊ID，MSGID是消息ID，SECRET-KEY是<a href="#42660/%E8%8E%B7%E5%8F%96%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95" rel="nofollow">获取会话记录</a>接口返回的这条消息对应的 encrypted_secretkey 字段进行解密得到，参考 <a href="#51799" rel="nofollow">encrypt_secretkey 解密方式</a>。<br></li><li>EXTERNAL_USERID是客户的ID。若是企业客户填：externalUserId<br>若是客户群的外部成员填：chatid/externalUserId，例如：wraaaabbbb/wmccccdddd。若当前企业为K12教育行业，externalUserId在家校通讯录中，则会转译为家长或者学生的名称。</li></ul><p data-sign="a6349b549b75dedf1dbd0f5392c82649" data-type="p" data-lines="4">譬如，<br>将<code>$chatName=xxxxx$</code>替换成群聊ID为<code>xxxxx</code>对应的群聊名称；<br>将<code>$msgContent=xxxxx/yyyyyy$</code>替换成消息ID为<code>xxxxx</code>对应的消息内容，其中<a href="#42660/%E8%8E%B7%E5%8F%96%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95" rel="nofollow">获取会话记录</a>接口返回的这条消息对应的 encrypted_secretkey 字段进行解密得到的密钥为<code>yyyyyy</code>；<br>将 <code>$externalUserName=xxxxx$</code> 替换成客户ID为 <code>xxxxx</code> 对应的客户名称；如果当前企业是K12教育行业，客户ID为家长或者学生的externalUserId，则展示家长或者学生的名称，若非家长或者学生，则展示“非学校家长”。若员工对客户有设置备注名，则展示“备注名(名称）”；若名称和备注名一致时仅展示“备注名”；多个员工给客户有备注的，展示最早添加的员工给客户的备注。</p><blockquote data-sign="8acdd76a8f0992674ab0a1ccaeab1e9b_3" data-lines="3">若输入的模板不符合语法、群聊ID无效、消息ID无效或对应的密钥不正确，则不替换该项内容，保留原样<br>当企业没有授权会话内容存档接口权限是，也不替换该项内容，保留原样<br>为防止意外泄漏，消息ID转译失败的情况下，将只会展示MSGID部分的内容，SECRET-KEY部分的内容不会展示</blockquote><p data-sign="869da9b2341c94c3b65235b77dc5a40a" data-type="p" data-lines="7">群聊ID<br>支持转译内部群和外部群的名称；<br>不包括单聊；<br>对于无名称的企业内部群聊，展示为<code>未命名内部群</code>；<br>对于无名称的企业客户群聊，展示为<code>未命名客户群</code>；<br>对于非企业客户群，展示为<code>非企业客户群</code>。</p><p data-sign="b801b5e3b63771f12ccc720b3dbb6882" data-type="p" data-lines="1">消息ID</p><div class="cherry-table-container" data-sign="00538480858b0fc55174e78e56a38760" data-lines="7">
        <table class="cherry-table"><thead><tr><th>消息类型</th><th>对应转译结果</th></tr></thead><tbody><tr><td>文本消息</td><td>文本消息的内容</td></tr><tr><td>图片消息</td><td><code>[图片]</code></td></tr><tr><td>Markdown消息</td><td>Markdown消息的文本内容</td></tr><tr><td>图文混排消息</td><td>文本的内容，涉及到其他类型的部分用消息类型名称代替，如<code>[图片]</code></td></tr><tr><td>其他</td><td>展示对应的消息类型名称，如<code>[小程序]</code>、<code>[红包消息]</code></td></tr></tbody></table></div><blockquote data-sign="d3391a3fbfa4ae680a19953f8fe21654_3" data-lines="3">其他特殊情况转译结果说明：<br>企微后台系统失败-&gt;消息获取失败<br>msgid不存在或者过期-&gt;消息已过期，消息内容无法展示<br>SECRET-KEY错误-&gt;消息密钥错误</blockquote></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>