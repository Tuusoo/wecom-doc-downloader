<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>iOS应用 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        iOS应用
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/11/25</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="85e2c2bb2f83f63223aa6f08b8c605f7-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#ios%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97" class="level-2">iOS接入指南</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8" class="level-3">创建应用</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E4%B8%8B%E8%BD%BD%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%BB%88%E7%AB%AFsdk%E6%96%87%E4%BB%B6" class="level-3">下载企业微信终端SDK文件</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" class="level-3">搭建开发环境</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9C%A8%E4%BB%A3%E7%A0%81%E4%B8%AD%E4%BD%BF%E7%94%A8sdk%E8%BF%9B%E8%A1%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B3%A8%E5%86%8C" class="level-3">在代码中使用SDK进行初始化注册</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%88%86%E4%BA%ABsdk%E4%BD%BF%E7%94%A8" class="level-3">分享SDK使用</a></li></dir><h2 id="ios%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97" data-sign="a77ceddac3f977e65aab3c2100addd73" data-lines="2"><a class="anchor" href="#ios%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97"></a>iOS接入指南</h2><blockquote data-sign="a3ae63582c910b090dddd7e7f457b726_2" data-lines="2"><strong>接入说明：</strong><br>任何需要调用企业微信API的应用，都需要先在企业微信管理后台创建一个应用，设置完成后，即可使用对应的功能。</blockquote><h3 id="%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8" data-sign="75a599e4313591ae25e60203d73939bf" data-lines="2"><a class="anchor" href="#%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8"></a>创建应用</h3><ol data-sign="69d0265c3c43268f2ef206cfc1e7c79flist5" data-lines="5" class="cherry-list__default" start="1"><li>管理员登录企业微信管理后台，选择<strong>企业应用</strong><br></li><li>选择已有应用或添加应用，进入应用详情页面。</li><li>选择“企业微信授权登录”，在设置界面填写iOS App的Bundleid，设置完成后系统自动生成应用程序<strong>schema</strong>。<br><blockquote data-sign="7a4e69ac50eaecde8906a5faff7e62f4_1" data-lines="1">企业微信分享的设置，复用企业微信授权登录的设置，设置以后登录、分享任何一个都可以使用。</blockquote></li></ol><h3 id="%E4%B8%8B%E8%BD%BD%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%BB%88%E7%AB%AFsdk%E6%96%87%E4%BB%B6" data-sign="ed5d756c91cb7fcd6b64bfaf006ba6e6" data-lines="2"><a class="anchor" href="#%E4%B8%8B%E8%BD%BD%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%BB%88%E7%AB%AFsdk%E6%96%87%E4%BB%B6"></a>下载企业微信终端SDK文件</h3><p data-sign="82a431bd23a3ba6aed9d39c8a8a52113" data-type="p" data-lines="2">SDK文件包括 libWXWorkApi.a，WWKApi.h，WWKApiObject.h 三个。<br>请前往 <a href="#10723" rel="nofollow">资源下载</a> 下载最新SDK包sdk.zip</p><blockquote data-sign="db9bd66a6f3b9706621022b8b9bbd74c_4" data-lines="4">SDK名称：企业微信登录/分享SDK<br>主要功能：通过企业微信登录/分享SDK，企业可在自建的app引入sdk，从而可使用企业微信账号登录app，并且在app中分享消息到企业微信。<br>使用说明：详见本接入指南<br>开发者：深圳市腾讯计算机系统有限公司<br><strong>隐私政策：请接入企业微信登录/分享 SDK的开发者，认真阅读《<a href="https://work.weixin.qq.com/nl/act/p/47eb57a00e9f4ad5" rel="nofollow">企业微信登录/分享SDK个人信息保护规则</a>》，并确保对企业微信登录/分享SDK的接入使用情况符合上述规则的相关要求。</strong></blockquote><p data-sign="bf572c8c61000341ad311988c2b50fc4" data-type="p" data-lines="6">下载包包含4个文件，其名称和含义分别是：<br><strong>WWKApi.h</strong> 定义SDK接口的头文件<br><strong>WWKObject.h</strong> 定义SDK接口用来进行参数传递的对象<br><strong>libWXWorkApi.a</strong> 第三方工程需要引用的SDK静态库文件<br><strong>demo.tar.gz</strong> 一个供参考的企业微信iOS端SDK使用的示例工程，这个工程介绍了当前版本SDK提供的所有接口的使用方法</p><h3 id="%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" data-sign="6fed76c9e2b7c9d4a7384944d79d2b43" data-lines="2"><a class="anchor" href="#%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"></a>搭建开发环境</h3><ol data-sign="bb09776d0078fcfeb959af6c83010214list9" data-lines="9" class="cherry-list__default" start="1"><li>在XCode中建立你的工程。<br></li><li>将SDK文件中包含的 <strong>libWXWorkApi.a</strong>，<strong>WXApi.h</strong>，<strong>WXApiObject.h</strong> 三个文件添加到你所建的工程中。具体实现可参考 <a href="https://developer.work.weixin.qq.com/devtool/introduce?id=36376" rel="nofollow">资源下载</a> 页面中提供的SDK Sample Demo工程(下载sdk.zip压缩包后，解压其中的<strong>demo.tar.gz</strong>即为一个供参考的企业微信iOS端SDK使用的示例工程，这个工程介绍了当前版本SDK提供的所有接口的使用方法)。<br></li><li>在你的工程文件中选中Search Paths，并添加 <strong>libWeChatSDK.a</strong> ，<strong>WXApi.h</strong>，<strong>WXApiObject.h</strong>，文件所在位置。<br></li><li>在XCode中，选择你的工程设置项，选中“TARGETS”一栏，在“info”标签栏的“URL type“添加“URL scheme”，其内容为你所注册的应用程序将获得应用程序<strong>ID</strong>和<strong>schema</strong>。<br></li><li>在你需要使用企业微信终端API的文件中 import WWKApi.h 并增加 WXApiDelegate 协议。</li></ol><div data-sign="bb0c85888163434dc1a6670dfe963149" data-type="codeBlock" data-lines="13">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">#<span class="token keyword">import</span> <span class="token string">"AppDelegate.h"</span></span>
<span class="code-line">#<span class="token keyword">import</span> <span class="token string">"WWKApi.h"</span></span>
<span class="code-line"></span>
<span class="code-line">@<span class="token keyword">interface</span> <span class="token class-name">AppDelegate</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span>WWKApiDelegate<span class="token operator">&gt;</span></span>
<span class="code-line"></span>
<span class="code-line">@end</span>
<span class="code-line"></span>
<span class="code-line">@implementation AppDelegate</span>
<span class="code-line"></span>
<span class="code-line">@end</span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h3 id="%E5%9C%A8%E4%BB%A3%E7%A0%81%E4%B8%AD%E4%BD%BF%E7%94%A8sdk%E8%BF%9B%E8%A1%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B3%A8%E5%86%8C" data-sign="4058d4413e342db53b098f1d0b645b0d" data-lines="2"><a class="anchor" href="#%E5%9C%A8%E4%BB%A3%E7%A0%81%E4%B8%AD%E4%BD%BF%E7%94%A8sdk%E8%BF%9B%E8%A1%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B3%A8%E5%86%8C"></a>在代码中使用SDK进行初始化注册</h3><ol data-sign="3b4f115f4841d6e468946f5c9f2b2ea7list5" data-lines="5" class="cherry-list__default" start="1"><li>要使你的程序启动后企业微信终端能响应你的程序，必须在代码中向企业微信终端注册你的schema。(如下面代码所示，在 AppDelegate 的 didFinishLaunchingWithOptions 函数中向企业微信注册id)。<br><strong>参数说明</strong><br><strong>registerApp :</strong> 必填字段 用户填写第三方应用Bundleid完成上述注册流程后，系统根据corpId(企业ID 见下描述)与agentId(应用ID 见下描述)计算得到的一个schema字符串。用于企业微信完成SSO登录流程后回调返回用户的第三方应用<br><strong>corpId:</strong> 必填字段 用户登录企业管理页面的时候在 “我的企业” 页面会得到一个corpId，这个corpid即为需要填在这里的企业ID<br><strong>agentId:</strong> 必填字段 当用户为自己企业新加一个第三方iOS应用的时候，系统会为每个iOS应用分配不同的企业内部唯一的应用ID</li></ol><div data-sign="6239a848c825edc347712e355e661f22" data-type="codeBlock" data-lines="14">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>application<span class="token operator">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didFinishLaunchingWithOptions<span class="token operator">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>launchOptions <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token comment">/*! @brief 调用这个方法前需要先到管理端进行注册 走管理端的注册方式</span></span>
<span class="code-line"><span class="token comment">     *</span></span>
<span class="code-line"><span class="token comment">     * 在管理端通过注册(可能需要等待审批)，获得schema+corpid+agentid</span></span>
<span class="code-line"><span class="token comment">     * @param registerApp 第三方App的Schema</span></span>
<span class="code-line"><span class="token comment">     * @param corpId 第三方App所属企业的ID</span></span>
<span class="code-line"><span class="token comment">     * @param agentId 第三方App在企业内部的ID</span></span>
<span class="code-line"><span class="token comment">     */</span></span>
<span class="code-line">    <span class="token punctuation">[</span>WWKApi registerApp<span class="token operator">:</span>@<span class="token string">"wwauth700000a5f2191000014"</span> corpId<span class="token operator">:</span>@<span class="token string">"ww700000a5f2191"</span> agentId<span class="token operator">:</span>@<span class="token string">"1000014"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="b9bb58192418edc245a4dfc28e371f33" data-type="p" data-lines="2">2.重写AppDelegate的handleOpenURL和openURL方法，第三方iOS App需要在这两个方法中调用SDK的handleOpenURL接口方法，让SDK有机会在第三方App内部处理SSO结果返回给第三方iOS App后的后续处理工作</p><div data-sign="87796c3f7255a03bd68c38f4682f9e8a" data-type="codeBlock" data-lines="10">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>application<span class="token operator">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application openURL<span class="token operator">:</span><span class="token punctuation">(</span><span class="token constant">NSURL</span> <span class="token operator">*</span><span class="token punctuation">)</span>url sourceApplication<span class="token operator">:</span><span class="token punctuation">(</span>nullable NSString <span class="token operator">*</span><span class="token punctuation">)</span>sourceApplication annotation<span class="token operator">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>annotation <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">[</span>self handleOpenURL<span class="token operator">:</span>url sourceApplication<span class="token operator">:</span>sourceApplication<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>handleOpenURL<span class="token operator">:</span><span class="token punctuation">(</span><span class="token constant">NSURL</span> <span class="token operator">*</span><span class="token punctuation">)</span>url sourceApplication<span class="token operator">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>sourceApplication <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">[</span>WWKApi handleOpenURL<span class="token operator">:</span>url delegate<span class="token operator">:</span>self<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="397d907c41506a22456d6f4d1263e64b" data-type="p" data-lines="1">3.现在，你的程序要实现和企业微信终端交互的具体请求与回应，因此需要实现WWKApiDelegate协议的两个方法。第三方iOS App可以根据自身需求实现这两个方法</p><div data-sign="802f8f9aebd8f7f9a0c6fa07aaefe58c" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token comment">// 如果第三方程序向企业微信发送了sendReq的请求，那么onResp会被回调。sendReq请求调用后，会切到企业微信终端程序界面。</span></span>
<span class="code-line"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>onResp<span class="token operator">:</span><span class="token punctuation">(</span>WWKBaseResp <span class="token operator">*</span><span class="token punctuation">)</span>resp <span class="token punctuation">{</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"><span class="token comment">// onReq是企业微信终端向第三方程序发起请求，要求第三方程序响应。第三方程序响应完后必须调用sendRsp返回。在调用sendRsp返回时，会切回到企业微信终端程序界面。</span></span>
<span class="code-line"><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> onReq<span class="token operator">:</span><span class="token punctuation">(</span>WWKBaseReq<span class="token operator">*</span><span class="token punctuation">)</span>req <span class="token punctuation">{</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="0a4b46dd6f494e0fd89fff41b31e98df" data-type="p" data-lines="1">具体在此两方法中所要完成的内容由你定义，具体可参考企业微信开发工具包中的SDK Sample Demo源码。</p><h3 id="%E5%88%86%E4%BA%ABsdk%E4%BD%BF%E7%94%A8" data-sign="7baaaae2b0d226c2c3455044ff41dd8f" data-lines="2"><a class="anchor" href="#%E5%88%86%E4%BA%ABsdk%E4%BD%BF%E7%94%A8"></a>分享SDK使用</h3><p data-sign="c82b94652bde5263bab33b9ae5b91fe1" data-type="p" data-lines="1">注意，如果使用Xcode16及以上版本构建应用，sendReq需要使用异步接口。</p><div data-sign="3af2acc4145bf57c880bcdff786c893b" data-type="codeBlock" data-lines="3">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sendReq<span class="token operator">:</span><span class="token punctuation">(</span>WWKBaseReq <span class="token operator">*</span><span class="token punctuation">)</span>req completionHandler<span class="token operator">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>WWKApiResponseErrorCode errorCode<span class="token punctuation">)</span><span class="token punctuation">)</span>completionHandler <span class="token constant">API_AVAILABLE</span><span class="token punctuation">(</span><span class="token function">ios</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><ol data-sign="6059c86e44847a50e74f61acb94dcb8blist14" data-lines="14" class="cherry-list__default" start="1"><li>分享文字到企业微信<br><div data-sign="7135fd7e8e51cdfcfa64567fc94250a2" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">WWKSendMessageReq <span class="token operator">*</span>req <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKSendMessageReq alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">WWKMessageTextAttachment <span class="token operator">*</span>attachment <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageTextAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"惊天魔盗团2 / 三人行 / 独立日2 IMAX特惠票来袭，仅需40元不补差看巨幕3D影片，全城最低，等你来团"</span><span class="token punctuation">;</span> <span class="token comment">// 示例用文字，请填写你想分享的实际文字内容</span></span>
<span class="code-line">req<span class="token punctuation">.</span>attachment <span class="token operator">=</span> attachment<span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">[</span>WWKApi sendReq<span class="token operator">:</span>req<span class="token punctuation">]</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>分享文件到企业微信<br><div data-sign="21984c10b22f748a7b5112e96b6194a8" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">WWKSendMessageReq <span class="token operator">*</span>req <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKSendMessageReq alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">WWKMessageFileAttachment <span class="token operator">*</span>attachment <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageFileAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token comment">// 示例用文件，请填写你想分享的实际文件路径和名称</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>filename <span class="token operator">=</span> @<span class="token string">"Download.pdf"</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"About Downloads"</span> ofType<span class="token operator">:</span>@<span class="token string">"pdf"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">req<span class="token punctuation">.</span>attachment <span class="token operator">=</span> attachment<span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">[</span>WWKApi sendReq<span class="token operator">:</span>req<span class="token punctuation">]</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>分享图片<br><div data-sign="b4f7466b6c0eb408b629dd445307a0da" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">WWKSendMessageReq <span class="token operator">*</span>req <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKSendMessageReq alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">WWKMessageImageAttachment <span class="token operator">*</span>attachment <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageImageAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token comment">// 示例用图片，请填写你想分享的实际图片路径和名称</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>filename <span class="token operator">=</span> @<span class="token string">"test.gif"</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"test"</span> ofType<span class="token operator">:</span>@<span class="token string">"gif"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">req<span class="token punctuation">.</span>attachment <span class="token operator">=</span> attachment<span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">[</span>WWKApi sendReq<span class="token operator">:</span>req<span class="token punctuation">]</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>分享小视频<br><div data-sign="8026e0e22ff9cc2d2ac8cb6110ecbd41" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">WWKSendMessageReq <span class="token operator">*</span>req <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKSendMessageReq alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">WWKMessageVideoAttachment <span class="token operator">*</span>attachment <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageVideoAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token comment">// 示例用小视频，请填写你想分享的实际小视频路径和名称</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>filename <span class="token operator">=</span> @<span class="token string">"video.mp4"</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"video"</span> ofType<span class="token operator">:</span>@<span class="token string">"mp4"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">req<span class="token punctuation">.</span>attachment <span class="token operator">=</span> attachment<span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">[</span>WWKApi sendReq<span class="token operator">:</span>req<span class="token punctuation">]</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>分享链接<br><div data-sign="80b6824faed7095c957eea5aa2ece5dd" data-type="codeBlock" data-lines="11">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">WWKSendMessageReq <span class="token operator">*</span>req <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKSendMessageReq alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">WWKMessageLinkAttachment <span class="token operator">*</span>attachment <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageLinkAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token comment">// 示例用链接，请填写你想分享的实际链接的标题、介绍、图标和URL</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">"链接标题"</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>summary <span class="token operator">=</span> @<span class="token string">"链接介绍"</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>url <span class="token operator">=</span> @<span class="token string">"http://www.tencent.com"</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>icon <span class="token operator">=</span> <span class="token punctuation">[</span>NSData dataWithContentsOfFile<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"icon"</span> ofType<span class="token operator">:</span>@<span class="token string">"jpg"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">req<span class="token punctuation">.</span>attachment <span class="token operator">=</span> attachment<span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">[</span>WWKApi sendReq<span class="token operator">:</span>req<span class="token punctuation">]</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></li><li>转发聊天记录<br><div data-sign="690fde55afd71ab0014765664043fc67" data-type="codeBlock" data-lines="111">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">    WWKSendMessageReq <span class="token operator">*</span>req <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKSendMessageReq alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    WWKMessageGroupAttachment <span class="token operator">*</span>attachment <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageGroupAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    attachment<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">"XXX的聊天记录"</span><span class="token punctuation">;</span></span>
<span class="code-line">    NSMutableArray <span class="token operator">*</span>array <span class="token operator">=</span> <span class="token punctuation">[</span>NSMutableArray array<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token comment">// 需要转发的内容可以通过addObject进行添加</span></span>
<span class="code-line">    <span class="token comment">// 可以一次性的添加不同类型的聊天记录</span></span>
<span class="code-line">    <span class="token punctuation">[</span>array addObject<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        WWKMessageAttachmentWrapper <span class="token operator">*</span>wrapper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageAttachmentWrapper alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>name <span class="token operator">=</span> @<span class="token string">"小明"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate date<span class="token punctuation">]</span> dateByAddingTimeInterval<span class="token operator">:</span><span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>avatarUrl <span class="token operator">=</span> @<span class="token string">"http://p.qlogo.cn/bizmail/BDHWBviaRjEgxSn7E5dBwXMM0bibQVVFXe6C6dhtAdsGMu7vL7AuNpIQ/100"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>attachment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">            WWKMessageTextAttachment <span class="token operator">*</span>text <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageTextAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            text<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"关注你我健康"</span><span class="token punctuation">;</span></span>
<span class="code-line">            text<span class="token punctuation">;</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    </span>
<span class="code-line">    <span class="token punctuation">[</span>array addObject<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        WWKMessageAttachmentWrapper <span class="token operator">*</span>wrapper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageAttachmentWrapper alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>name <span class="token operator">=</span> @<span class="token string">"小明"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate date<span class="token punctuation">]</span> dateByAddingTimeInterval<span class="token operator">:</span><span class="token operator">-</span><span class="token number">950</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>avatarUrl <span class="token operator">=</span> @<span class="token string">"http://p.qlogo.cn/bizmail/BDHWBviaRjEgxSn7E5dBwXMM0bibQVVFXe6C6dhtAdsGMu7vL7AuNpIQ/100"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>attachment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">            WWKMessageImageAttachment <span class="token operator">*</span>image <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageImageAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            image<span class="token punctuation">.</span>filename <span class="token operator">=</span> @<span class="token string">"test.gif"</span><span class="token punctuation">;</span></span>
<span class="code-line">            image<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"test"</span> ofType<span class="token operator">:</span>@<span class="token string">"gif"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            image<span class="token punctuation">;</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    </span>
<span class="code-line">    <span class="token punctuation">[</span>array addObject<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        WWKMessageAttachmentWrapper <span class="token operator">*</span>wrapper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageAttachmentWrapper alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>name <span class="token operator">=</span> @<span class="token string">"小明"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate date<span class="token punctuation">]</span> dateByAddingTimeInterval<span class="token operator">:</span><span class="token operator">-</span><span class="token number">930</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>avatarUrl <span class="token operator">=</span> @<span class="token string">"http://p.qlogo.cn/bizmail/BDHWBviaRjEgxSn7E5dBwXMM0bibQVVFXe6C6dhtAdsGMu7vL7AuNpIQ/100"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>attachment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">            WWKMessageLocationAttachment <span class="token operator">*</span>loc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageLocationAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            loc<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">"T.I.T创意园"</span><span class="token punctuation">;</span></span>
<span class="code-line">            loc<span class="token punctuation">.</span>address <span class="token operator">=</span> @<span class="token string">"广东省广州市海珠区新港中路397号"</span><span class="token punctuation">;</span></span>
<span class="code-line">            loc<span class="token punctuation">.</span>lat <span class="token operator">=</span> <span class="token number">23.098837</span><span class="token punctuation">;</span></span>
<span class="code-line">            loc<span class="token punctuation">.</span>lng <span class="token operator">=</span> <span class="token number">113.325119</span><span class="token punctuation">;</span></span>
<span class="code-line">            loc<span class="token punctuation">;</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    </span>
<span class="code-line">    <span class="token punctuation">[</span>array addObject<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        WWKMessageAttachmentWrapper <span class="token operator">*</span>wrapper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageAttachmentWrapper alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>name <span class="token operator">=</span> @<span class="token string">"小码"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate date<span class="token punctuation">]</span> dateByAddingTimeInterval<span class="token operator">:</span><span class="token operator">-</span><span class="token number">900</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>avatarData <span class="token operator">=</span> <span class="token punctuation">[</span>NSData dataWithContentsOfFile<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"icon"</span> ofType<span class="token operator">:</span>@<span class="token string">"jpg"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>attachment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">            WWKMessageTextAttachment <span class="token operator">*</span>text <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageTextAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            text<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"学车找我不愁"</span><span class="token punctuation">;</span></span>
<span class="code-line">            text<span class="token punctuation">;</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    </span>
<span class="code-line">    <span class="token punctuation">[</span>array addObject<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        WWKMessageAttachmentWrapper <span class="token operator">*</span>wrapper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageAttachmentWrapper alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>name <span class="token operator">=</span> @<span class="token string">"小码"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate date<span class="token punctuation">]</span> dateByAddingTimeInterval<span class="token operator">:</span><span class="token operator">-</span><span class="token number">850</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>avatarData <span class="token operator">=</span> <span class="token punctuation">[</span>NSData dataWithContentsOfFile<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"icon"</span> ofType<span class="token operator">:</span>@<span class="token string">"jpg"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>attachment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">            WWKMessageFileAttachment <span class="token operator">*</span>file <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageFileAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            file<span class="token punctuation">.</span>filename <span class="token operator">=</span> @<span class="token string">"Download.pdf"</span><span class="token punctuation">;</span></span>
<span class="code-line">            file<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"About Downloads"</span> ofType<span class="token operator">:</span>@<span class="token string">"pdf"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            file<span class="token punctuation">;</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    </span>
<span class="code-line">    <span class="token punctuation">[</span>array addObject<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        WWKMessageAttachmentWrapper <span class="token operator">*</span>wrapper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageAttachmentWrapper alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>name <span class="token operator">=</span> @<span class="token string">"小码"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate date<span class="token punctuation">]</span> dateByAddingTimeInterval<span class="token operator">:</span><span class="token operator">-</span><span class="token number">850</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>avatarData <span class="token operator">=</span> <span class="token punctuation">[</span>NSData dataWithContentsOfFile<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"icon"</span> ofType<span class="token operator">:</span>@<span class="token string">"jpg"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>attachment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">            WWKMessageVideoAttachment <span class="token operator">*</span>video <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageVideoAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            video<span class="token punctuation">.</span>filename <span class="token operator">=</span> @<span class="token string">"video.mp4"</span><span class="token punctuation">;</span></span>
<span class="code-line">            video<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"video"</span> ofType<span class="token operator">:</span>@<span class="token string">"mp4"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            video<span class="token punctuation">;</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    </span>
<span class="code-line">    <span class="token punctuation">[</span>array addObject<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        WWKMessageAttachmentWrapper <span class="token operator">*</span>wrapper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageAttachmentWrapper alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>name <span class="token operator">=</span> @<span class="token string">"小码"</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate date<span class="token punctuation">]</span> dateByAddingTimeInterval<span class="token operator">:</span><span class="token operator">-</span><span class="token number">800</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>avatarData <span class="token operator">=</span> <span class="token punctuation">[</span>NSData dataWithContentsOfFile<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"icon"</span> ofType<span class="token operator">:</span>@<span class="token string">"jpg"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">.</span>attachment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">            WWKMessageLinkAttachment <span class="token operator">*</span>link <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageLinkAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            link<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">"链接标题"</span><span class="token punctuation">;</span></span>
<span class="code-line">            link<span class="token punctuation">.</span>summary <span class="token operator">=</span> @<span class="token string">"链接介绍"</span><span class="token punctuation">;</span></span>
<span class="code-line">            link<span class="token punctuation">.</span>url <span class="token operator">=</span> @<span class="token string">"http://www.tencent.com"</span><span class="token punctuation">;</span></span>
<span class="code-line">            link<span class="token punctuation">.</span>icon <span class="token operator">=</span> <span class="token punctuation">[</span>NSData dataWithContentsOfFile<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"icon"</span> ofType<span class="token operator">:</span>@<span class="token string">"jpg"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">            link<span class="token punctuation">;</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">        wrapper<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">    </span>
<span class="code-line">    attachment<span class="token punctuation">.</span>contents <span class="token operator">=</span> array<span class="token punctuation">;</span></span>
<span class="code-line">    req<span class="token punctuation">.</span>attachment <span class="token operator">=</span> attachment<span class="token punctuation">;</span></span>
<span class="code-line">    <span class="token punctuation">[</span>WWKApi sendReq<span class="token operator">:</span>req<span class="token punctuation">]</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><br></li><li>分享小程序</li></ol><div data-sign="d8937de8f1fb3e5d5cea3da445e284d7" data-type="codeBlock" data-lines="13">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">WWKSendMessageReq <span class="token operator">*</span>req <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKSendMessageReq alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line">WWKMessageMiniAppAttachment <span class="token operator">*</span>attachment <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>WWKMessageMiniAppAttachment alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token comment">// 示例用小程序，请填写应用关联的小程序username、路径和图片以及标题</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>userName <span class="token operator">=</span> @<span class="token string">"gh_xxxxxxxxxxxx@app"</span><span class="token punctuation">;</span> <span class="token comment">//必须是应用关联的小程序，注意要有@app后缀</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>path <span class="token operator">=</span> @<span class="token string">"pages/index/index.html"</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>hdImageData <span class="token operator">=</span> <span class="token function">UIImageJPEGRepresentation</span><span class="token punctuation">(</span><span class="token punctuation">[</span>UIImage imageWithContentsOfFile<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSBundle mainBundle<span class="token punctuation">]</span> pathForResource<span class="token operator">:</span>@<span class="token string">"test"</span> ofType<span class="token operator">:</span>@<span class="token string">"jpg"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1.0</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">attachment<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">"分享标题"</span><span class="token punctuation">;</span></span>
<span class="code-line">req<span class="token punctuation">.</span>attachment <span class="token operator">=</span> attachment<span class="token punctuation">;</span>        </span>
<span class="code-line"><span class="token punctuation">[</span>WWKApi sendReq<span class="token operator">:</span>req<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>