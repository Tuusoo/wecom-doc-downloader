<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取管理端操作日志 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取管理端操作日志
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/09/13</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="1d284370ae25d519ce323bc993d94ac3-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E6%A6%82%E8%BF%B0" class="level-2">概述</a></li><li class="toc-li"><a href="#%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E8%AF%B4%E6%98%8E" class="level-2">接口调用说明</a></li><li class="toc-li"><a href="#%E6%93%8D%E4%BD%9C%E8%A1%8C%E4%B8%BA%E7%B1%BB%E5%9E%8B%E8%AF%B4%E6%98%8E" class="level-2">操作行为类型说明</a></li></dir><h2 id="%E6%A6%82%E8%BF%B0" data-sign="9a8437ccee43ad66c084b8dfd3d259d3" data-lines="2"><a class="anchor" href="#%E6%A6%82%E8%BF%B0"></a>概述</h2><p data-sign="ca64c22f66f10f8ed85c95bc16059bfe" data-type="p" data-lines="2">管理端操作日志，可以在管理端“使用分析”中查看。为了方便企业对接内部系统，设定相应规则以进行定时的安全预警，允许通过接口读取。</p><p data-sign="2bf868b5ed9bfb1ebcfe8743c783ccf7" data-type="p" data-lines="2"><img src="images/100179/4965f894.png" alt="enter image description here"></p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="87f37537ffa9a080f10d60da8a58a71d" data-type="p" data-lines="2">若要调此接口，需要在上图中“API”栏，配置到“可调用接口应用”列表。<br>因为成员操作记录数据量较大，该接口设计为增量读取接口，且有较严格的频率限制。开发者需酌情定时调用，读取合适的时间段的记录。</p><h2 id="%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E8%AF%B4%E6%98%8E" data-sign="8d8a14c3a979404d7740526dfb74c737" data-lines="2"><a class="anchor" href="#%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E8%AF%B4%E6%98%8E"></a>接口调用说明</h2><p data-sign="5904ab8afad80793b055e70c9e9576f9" data-type="p" data-lines="1"><strong>请求方式</strong>:POST(<strong>HTTPS</strong>)</p><p data-sign="24c30dce1c109b878cf756ae383879a3" data-type="p" data-lines="2"><strong>请求地址:</strong> https://qyapi.weixin.qq.com/cgi-bin/security/admin_oper_log/list?access_token=ACCESS_TOKEN</p><p data-sign="f81de324daf9f94e0f5f5d362044cb86" data-type="p" data-lines="2"><strong>请求示例</strong></p><div data-sign="aa0ed396fdb4110b76654db1b1aa39b4" data-type="codeBlock" data-lines="11">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"start_time"</span><span class="token operator">:</span> <span class="token number">1724256000</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"end_time"</span><span class="token operator">:</span> <span class="token number">1724860799</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"oper_type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"sam"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"cursor"</span><span class="token operator">:</span> <span class="token string">"xxxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"limit"</span><span class="token operator">:</span> <span class="token number">2</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="477ca5ff513692ef9eaf7d3779cd22ac" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="1c210f70623e3b2eed7cb26cdec8ca6c" data-lines="9">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">string</td><td align="left">调用接口凭证</td></tr><tr><td align="left">start_time</td><td align="left">是</td><td align="left">uint64</td><td align="left">开始时间<br>取值范围：不早于180天前</td></tr><tr><td align="left">end_time</td><td align="left">是</td><td align="left">uint64</td><td align="left">结束时间<br>取值范围：大于start_time，小于当前时间。开始时间和结束时间之间的跨度不能超过7天。</td></tr><tr><td align="left">oper_type</td><td align="left">否</td><td align="left">uint32</td><td align="left">操作类型。不填表示全部<br>取值范围目前支持如下：<br>&nbsp;&nbsp;&nbsp;&nbsp;2 - 权限管理变更<br>&nbsp;&nbsp;&nbsp;&nbsp;3 - 成员与部门变更<br>&nbsp;&nbsp;&nbsp;&nbsp;7 - 其它<br>&nbsp;&nbsp;&nbsp;&nbsp;8 - 应用变更<br>&nbsp;&nbsp;&nbsp;&nbsp;11 - 通讯录与聊天管理<br>&nbsp;&nbsp;&nbsp;&nbsp;12 - 企业信息管理<br>&nbsp;&nbsp;&nbsp;&nbsp;13 - 外部联系人管理</td></tr><tr><td align="left">userid</td><td align="left">否</td><td align="left">string</td><td align="left">操作者userid</td></tr><tr><td align="left">cusor</td><td align="left">否</td><td align="left">string</td><td align="left">分页游标。不填表示首页</td></tr><tr><td align="left">limit</td><td align="left">否</td><td align="left">uint32</td><td align="left">最大记录数。不填默认最多获取400个记录<br>取值范围：1 ~ 400<br><code>注意：不保证每次返回的数据刚好为指定limit</code> ，必须用返回的  <code>has_more</code>  判断是否继续请求</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><blockquote data-sign="41843fc14d5f15bc6e35f20e9fc827ff_2" data-lines="2">1. 接口调用产生的操作日志（如通讯录同步助手）不会返回。<br>2. 默认返回所有管理端操作日志，不会进行应用可见范围的筛选。<br>3. 接口调用频率限制为600次/分钟。</blockquote><p data-sign="2fb5389657b87711ff26b655193423d2" data-type="p" data-lines="2"><strong>权限说明</strong>: （需具有「获取管理端操作日志」权限）</p><p data-sign="bcdc322d144bc83f93060c5ca4957e2f" data-type="p" data-lines="2"><strong>返回结果</strong>:</p><div data-sign="a88f04a4a70d6fce8ac3d71aa3b8dee2" data-type="codeBlock" data-lines="27">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"has_more"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"next_cursor"</span><span class="token operator">:</span><span class="token string">"xxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"record_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">	    <span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"time"</span><span class="token operator">:</span> <span class="token number">1724256000</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"sam"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"oper_type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"detail_type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"detail_info"</span><span class="token operator">:</span> <span class="token string">"姓名：shel；手机号：15622244106"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"ip"</span><span class="token operator">:</span> <span class="token string">"183.40.88.11"</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"time"</span><span class="token operator">:</span> <span class="token number">1724256400</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"sam"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"oper_type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"detail_type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"detail_info"</span><span class="token operator">:</span> <span class="token string">"姓名：abel；手机号：15622244108"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"ip"</span><span class="token operator">:</span> <span class="token string">"61.40.122.129"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="477ca5ff513692ef9eaf7d3779cd22ac" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="b8dcd87663c7f91f4f0383b9785aa1f8" data-lines="13">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">int32</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">string</td><td align="left">错误码描述</td></tr><tr><td align="left">has_more</td><td align="left">bool</td><td align="left">是否还有下一页</td></tr><tr><td align="left">next_cursor</td><td align="left">string</td><td align="left">下一页的分页游标。不同过滤条件的的cursor不能混用</td></tr><tr><td align="left">record_list</td><td align="left">obj[]</td><td align="left">记录列表</td></tr><tr><td align="left">record_list.time</td><td align="left">int64</td><td align="left">操作时间</td></tr><tr><td align="left">record_list.userid</td><td align="left">uint64</td><td align="left">操作者userid</td></tr><tr><td align="left">record_list.oper_type</td><td align="left">uint32</td><td align="left">操作类型</td></tr><tr><td align="left">record_list.detail_type</td><td align="left">uint32</td><td align="left">操作行为。详见后面说明</td></tr><tr><td align="left">record_list.detail_info</td><td align="left">string</td><td align="left">相关数据</td></tr><tr><td align="left">record_list.ip</td><td align="left">string</td><td align="left">操作者ip</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E6%93%8D%E4%BD%9C%E8%A1%8C%E4%B8%BA%E7%B1%BB%E5%9E%8B%E8%AF%B4%E6%98%8E" data-sign="639bad9b2a38f4e5faf82cc7e6693db2" data-lines="1"><a class="anchor" href="#%E6%93%8D%E4%BD%9C%E8%A1%8C%E4%B8%BA%E7%B1%BB%E5%9E%8B%E8%AF%B4%E6%98%8E"></a>操作行为类型说明</h2><p data-sign="1c70d0ef189bdeda99648e0d70f7becf" data-type="p" data-lines="1">操作行为，目前有以下类型：</p><p data-sign="3b4cd246961862b1a566070c3fcff3ed" data-type="p" data-lines="184">1 - 绑定手机<br>2 - 解绑手机<br>3 - 修改密保邮箱<br>4 - 修改登录密码<br>5 - 新增分级管理员<br>6 - 删除分级管理员<br>7 - 更改操作权限<br>8 - 更改管理范围<br>9 - 新增部门<br>10 - 删除部门<br>11 - 移动部门<br>12 - 移动成员<br>13 - 删除成员<br>14 - 新增成员<br>15 - 更改成员信息<br>16 - 批量导入<br>17 - 更改企业名称<br>18 - 更改企业logo<br>19 - 更改企业信息<br>20 - 更改消息设置<br>21 - 更改部门信息<br>22 - 发送公告<br>23 - 登录后台<br>24 - 移除成员<br>25 - 发送邀请<br>26 - 新增应用<br>27 - 删除应用<br>28 - 修改应用主页<br>29 - 修改应用可见范围<br>30 - 导出通讯录<br>31 - 新增管理组<br>32 - 删除管理组<br>33 - 修改管理组名称<br>34 - 修改管理组通讯录权限<br>35 - 修改管理组应用权限<br>36 - 修改管理组管理员列表<br>37 - 转让创建人<br>38 - 新增标签<br>39 - 删除标签<br>40 - 变更标签成员<br>41 - 修改标签名称<br>42 - 安装套件应用<br>43 - 删除套件应用<br>44 - 删除通讯录套件<br>45 - 安装通讯录套件<br>46 - 开通企业微信<br>47 - 新增素材<br>48 - 编辑素材<br>49 - 删除素材<br>50 - 隐藏部门/成员<br>51 - 限制查看外部门<br>52 - 限制查看所有人<br>53 - 添加发票信息<br>54 - 修改发票信息<br>55 - 删除发票信息<br>56 - 删除套件应用<br>57 - 开启自动邀请成员使用<br>58 - 关闭自动邀请成员使用<br>59 - 变更应用权限<br>60 - 增量更新成员<br>61 - 全量覆盖成员<br>62 - 全量覆盖部门<br>63 - 导出客服列表<br>64 - 删除客服<br>65 - 启用应用<br>66 - 停用应用<br>67 - 添加审批模板<br>68 - 启用审批模板<br>69 - 停用审批模板<br>70 - 删除审批模板<br>71 - 修改审批模板<br>72 - 修改审批规则<br>73 - 删除审批记录<br>74 - 添加审批假期类型<br>75 - 删除审批假期类型<br>76 - 修改审批假期类型<br>77 - 导入审批假期余额<br>78 - 修改个人假期余额<br>79 - 添加打卡规则<br>80 - 修改打卡规则<br>81 - 删除打卡规则<br>82 - 修改外出打卡设置<br>83 - 添加汇报模板<br>84 - 启用汇报模板<br>85 - 停用汇报模板<br>86 - 删除汇报模板<br>87 - 修改汇报模板<br>88 - 修改汇报规则<br>89 - 导出汇报记录<br>90 - 导出审批假期余额<br>91 - 导出审批记录<br>92 - 导出打卡记录<br>93 - 通过提交资料认证<br>94 - 法定代表人验证<br>95 - 支付验证<br>96 - 通过微信公众号授权验证<br>97 - 通过微信公众号授权认证<br>98 - 设置进入企业二次验证<br>99 - 修改申请加入企业设置<br>100 - 修改客户端启动页<br>101 - 离职成员管理<br>102 - 设置一周小结<br>103 - 修改微信插件logo<br>104 - 修改微信插件功能介绍<br>105 - 修改微信插件设置<br>106 - 设置邀请同事领红包<br>107 - 设置群成员人数上限<br>108 - 设置消息阅读状态<br>109 - 设置全员群<br>110 - 自动创建部门群<br>111 - 设置成员资料显示<br>112 - 设置成员可修改字段<br>113 - 设置成员排序规则<br>114 - 设置聊天显示水印<br>115 - 设置通讯录水印<br>116 - 设置未使用成员接收消息提醒<br>117 - 设置手机号安全查看<br>118 - 设置成员对外联系人信息显示<br>119 - 修改外部联系人权限设置<br>120 - 导出相关操作记录<br>121 - 修改工作台显示<br>122 - 设置成员可见第三方应用入口<br>123 - 启用小程序<br>124 - 停用小程序<br>125 - 添加聊天附件栏小程序页面<br>126 - 编辑聊天附件栏小程序页面<br>127 - 删除聊天附件栏小程序页面<br>128 - 应用与小程序分组编辑<br>129 - 设置成员可见连接微信入口<br>130 - 设置通讯录API同步<br>132 - 设置安全查看信息<br>133 - 导出全量成员查看记录<br>134 - 导出指定成员的查看记录<br>135 - 会话内容存档修改IP地址<br>136 - 会话内容存档修改消息加密公钥<br>137 - 设置会话内容存档成员的语音/视频通话功能<br>138 - 设置会话内容存档成员的文件传输助手<br>139 - 设置会话内容存档的服务须知<br>140 - 会话内容存档修改开启范围<br>141 - 设置会话内容存档的会话限制<br>142 - 主体资料验证<br>146 - 会话内容存档设置消息关键词拦截<br>147 - 新增部门<br>148 - 删除部门<br>149 - 修改部门<br>150 - 新增学生<br>151 - 删除学生<br>152 - 修改学生信息<br>153 - 新增家长<br>154 - 删除家长<br>155 - 修改家长信息<br>156 - 批量导入<br>157 - 修改设置<br>158 - 设置家校通讯录API同步<br>159 - 查看Secret<br>160 - 设置接收事件服务器回调<br>161 - 重置Secret<br>162 - 批量设置成员信息<br>163 - 删除并禁用应用<br>164 - 关闭成员授权<br>165 - 取消应用禁用<br>166 - 修改应用授权方式<br>167 - 开启成员授权<br>168 - 开启管理端登录短信验证<br>169 - 关闭管理端登录短信验证<br>170 - 调整自建应用为代开发自建应用<br>171 - 设置通讯录人数显示<br>172 - 企业可信IP<br>173 - 授权通讯录编辑权限<br>174 - 取消授权通讯录编辑权限<br>175 - 群成员列表展示性别<br>176 - 删除成员（操作离职）<br>177 - 批量导入花名册<br>178 - 批量更新花名册<br>179 - 代运营服务人员权限变更<br>180 - 导出通讯录（花名册）<br>181 - 企业微信认证<br>182 - 批量导出<br>185 - 停用Secret<br>186 - 停用接收事件服务器<br>189 - 创建知识集<br>190 - 修改知识集<br>191 - 删除知识集</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>