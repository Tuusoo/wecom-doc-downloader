<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>ww.register - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        ww.register
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/11/26</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir data-sign="4f6121c690b98d1f24c3a9f7ec388fc8-1" data-lines="1" class="toc"><p class="toc-title">目录</p><li class="toc-li"><a href="#wwregisteroptions" class="level-2">ww.register(options)</a></li><li class="toc-li"><a href="#%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0" class="level-3">功能描述</a></li><li class="toc-li"><a href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E" class="level-3">参数说明</a></li><li class="toc-li"><a href="#options-object" class="level-4">options: Object</a></li><li class="toc-li"><a href="#%E9%99%84%E5%8A%A0%E8%AF%B4%E6%98%8E" class="level-3">附加说明</a></li><li class="toc-li"><a href="#%E6%97%A7%E7%89%88jweixin%E8%B0%83%E7%94%A8" class="level-2">旧版jweixin调用</a></li><li class="toc-li"><a href="#%E9%80%9A%E8%BF%87config%E6%B3%A8%E5%85%A5%E4%BC%81%E4%B8%9A%E8%BA%AB%E4%BB%BD%E6%9D%83%E9%99%90" class="level-3">通过config注入企业身份权限</a></li><li class="toc-li"><a href="#%E9%80%9A%E8%BF%87agentconfig%E6%B3%A8%E5%85%A5%E5%BA%94%E7%94%A8%E7%9A%84%E6%9D%83%E9%99%90" class="level-3">通过agentConfig注入应用的权限</a></li></dir><div data-sign="fc54230e7e3f03dc05ccbb068ea04b3e" data-type="div" data-lines="2"><div class="js_sdkImport" data-package="@wecom/jssdk" data-method="register" tmpid="88" data-tmpid="89"><section><h2 id="wwregisteroptions">ww.register(options)</h2><section><h3 id="%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0">功能描述</h3><p data-type="p">注册应用信息。</p></section><div data-sign="b34097218d9dd85db5d7036cd36f7478" data-type="codeBlock" data-lines="7">
      <div class="cherry-copy-code-block" style="display:none;"><i class="ch-icon ch-icon-copy" title="copy"></i></div>
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line">ww<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">  corpId<span class="token operator">:</span> <span class="token string">'ww7ca4776b2a70000'</span><span class="token punctuation">,</span></span>
<span class="code-line">  jsApiList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'getExternalContact'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">  getConfigSignature</span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><section><h3 id="%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E">参数说明</h3><section><h4 id="options-object">options: Object</h4><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">corpId</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">当前用户所属企业 ID</p></td></tr><tr><td></td><td data-title="属性">agentId</td><td data-title="类型">string | number</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">当前应用 AgentID</p></td></tr><tr><td></td><td data-title="属性">suiteId</td><td data-title="类型">string</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">应用套件 ID</p></td></tr><tr><td></td><td data-title="属性">jsApiList</td><td data-title="类型">string[]</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">需要使用的JS接口列表</p></td></tr><tr><td></td><td data-title="属性">openTagList</td><td data-title="类型">string[]</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">需要使用的开放标签列表，例如['wx-open-launch-app']</p></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">getConfigSignature</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">config 签名生成函数</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>url: string</b></p><p data-type="p">用于生成签名的 URL</p><p><b>返回值</b></p><p><b>Object | Promise&lt;Object&gt;</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">timestamp</td><td data-title="类型">string | number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">生成签名的时间戳</p></td></tr><tr><td></td><td data-title="属性">nonceStr</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">生成签名的随机串</p></td></tr><tr><td></td><td data-title="属性">signature</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">签名</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">onConfigSuccess</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">config 成功回调</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>res: Object</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">checkResult</td><td data-title="类型">Object</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">jsApiList 权限检查结果</p></td></tr><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">onConfigFail</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">config 失败回调</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>res: Error | Object</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">onConfigComplete</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">config 完成回调</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>res: Error | Object</b></p><p><b>可能为以下类型</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div><p><b>或</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">checkResult</td><td data-title="类型">Object</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">jsApiList 权限检查结果</p></td></tr><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">getAgentConfigSignature</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">agentConfig 签名生成函数</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>url: string</b></p><p data-type="p">用于生成签名的 URL</p><p><b>返回值</b></p><p><b>Object | Promise&lt;Object&gt;</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">timestamp</td><td data-title="类型">string | number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">生成签名的时间戳</p></td></tr><tr><td></td><td data-title="属性">nonceStr</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">生成签名的随机串</p></td></tr><tr><td></td><td data-title="属性">signature</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">签名</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">onAgentConfigSuccess</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">agentConfig 成功回调</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>res: Object</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">checkResult</td><td data-title="类型">Object</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">jsApiList 权限检查结果</p></td></tr><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">onAgentConfigFail</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">agentConfig 失败回调</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>res: Error | Object</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">onAgentConfigComplete</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">agentConfig 完成回调</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>res: Error | Object</b></p><p><b>可能为以下类型</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div><p><b>或</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">checkResult</td><td data-title="类型">Object</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">jsApiList 权限检查结果</p></td></tr><tr><td></td><td data-title="属性">errMsg</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误信息</p></td></tr><tr><td></td><td data-title="属性">errCode</td><td data-title="类型">number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">通用错误码</p></td></tr></tbody></table></div></td></tr><tr class="docgenTable-row--expandable"><td><i class="docgenTable-toggle"></i></td><td data-title="属性">getSuiteConfigSignature</td><td data-title="类型">Function</td><td data-title="必填">否</td><td data-title="说明"><p data-type="p">suiteConfig 签名生成函数</p></td></tr><tr><td></td><td colspan="4"><p><b>参数</b></p><p><b>url: string</b></p><p data-type="p">用于生成签名的 URL</p><p><b>返回值</b></p><p><b>Object | Promise&lt;Object&gt;</b></p><div class="docgenTable-wrap"><table class="docgenTable-table"><thead><tr><th></th><th data-title="属性">属性</th><th data-title="类型">类型</th><th data-title="必填">必填</th><th data-title="说明">说明</th></tr></thead><tbody><tr><td></td><td data-title="属性">timestamp</td><td data-title="类型">string | number</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">生成签名的时间戳</p></td></tr><tr><td></td><td data-title="属性">nonceStr</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">生成签名的随机串</p></td></tr><tr><td></td><td data-title="属性">signature</td><td data-title="类型">string</td><td data-title="必填">是</td><td data-title="说明"><p data-type="p">签名</p></td></tr></tbody></table></div></td></tr></tbody></table></div></section></section></section></div></div><h3 id="%E9%99%84%E5%8A%A0%E8%AF%B4%E6%98%8E" data-sign="762f7cd828f6324506435c318378f2ee" data-lines="2"><a class="anchor" href="#%E9%99%84%E5%8A%A0%E8%AF%B4%E6%98%8E"></a>附加说明</h3><p data-sign="b90f281942175a2340e432930352d245" data-type="p" data-lines="2"><strong>参数中的回调函数（如 <code>getConfigSignature</code>、<code>onConfigSuccess</code> 等）调用时机由 JSSDK 自行控制，开发者无需关心具体的调用顺序。在非微信、企业微信内置浏览器的环境下，JSSDK 不会主动调用 <code>getConfigSignature</code> 回调。</strong></p><h2 data-sign="a85268b36c0f2b8268280d97d4ab3b0b" data-lines="2" id="%E6%97%A7%E7%89%88jweixin%E8%B0%83%E7%94%A8"><a class="anchor" href="#%E6%97%A7%E7%89%88jweixin%E8%B0%83%E7%94%A8"></a>旧版jweixin调用</h2><blockquote data-sign="9865efa60aeb4decbfaaf2bd50afb526_3" data-lines="3">此接口为旧版jweixin中进行应用身份鉴权的方式<br>在新版的wecom-jssdk.js中，统一使用ww.register进行身份注册，通过传入getAgentConfigSignature参数来进行应用身份权限的注册<br>如果你的应用正在使用旧版 jweixin-1.2.0.js进行接口调用，我们强烈建议<a href="#14931/%E6%97%A7%E7%89%88jweixin%E8%BF%81%E7%A7%BB" rel="nofollow">进行升级</a> </blockquote><h3 data-sign="bf5097c1576a8c46199bcc1fb8f990ac" data-lines="2" id="%E9%80%9A%E8%BF%87config%E6%B3%A8%E5%85%A5%E4%BC%81%E4%B8%9A%E8%BA%AB%E4%BB%BD%E6%9D%83%E9%99%90"><a class="anchor" href="#%E9%80%9A%E8%BF%87config%E6%B3%A8%E5%85%A5%E4%BC%81%E4%B8%9A%E8%BA%AB%E4%BB%BD%E6%9D%83%E9%99%90"></a>通过config注入企业身份权限</h3><div data-sign="ca8a04d1f30290e18d27ec37ddcfa4ab" data-type="codeBlock" data-lines="11">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">wx<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">    beta<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">// 必须这么写，否则wx.invoke调用形式的jsapi会有问题</span></span>
<span class="code-line">    debug<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></span>
<span class="code-line">    appId<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 必填，企业微信的corpID，必须是本企业的corpID，不允许跨企业使用</span></span>
<span class="code-line">    timestamp<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 必填，生成签名的时间戳</span></span>
<span class="code-line">    nonceStr<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 必填，生成签名的随机串</span></span>
<span class="code-line">    signature<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><span class="token comment">// 必填，签名，见 附录-JS-SDK使用权限签名算法</span></span>
<span class="code-line">    jsApiList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 必填，需要使用的JS接口列表，凡是要调用的接口都需要传进来</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h3 id="%E9%80%9A%E8%BF%87agentconfig%E6%B3%A8%E5%85%A5%E5%BA%94%E7%94%A8%E7%9A%84%E6%9D%83%E9%99%90" data-sign="910d6f845e9dd1a68548b1f1fc1122e6" data-lines="2"><a class="anchor" href="#%E9%80%9A%E8%BF%87agentconfig%E6%B3%A8%E5%85%A5%E5%BA%94%E7%94%A8%E7%9A%84%E6%9D%83%E9%99%90"></a>通过agentConfig注入应用的权限</h3><p data-sign="05d14ac21a4be8c3492b4eb48918f7ac" data-type="p" data-lines="1">调用 wx.agentConfig需要引入 jwxwork sdk</p><div data-sign="3f79cb709f78222024093abc0f25f493" data-type="codeBlock" data-lines="3">
      <pre class="language-html"><code class="language-html wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://open.work.weixin.qq.com/wwopen/js/jwxwork-1.0.0.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div data-sign="69a257ad5fca1112d6bd4e0af202c302" data-type="codeBlock" data-lines="19">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">wx<span class="token punctuation">.</span><span class="token function">agentConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">    corpid<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 必填，企业微信的corpid，必须与当前登录的企业一致</span></span>
<span class="code-line">    agentid<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 必填，企业微信的应用id （e.g. 1000247）</span></span>
<span class="code-line">    timestamp<span class="token operator">:</span> <span class="token punctuation">,</span> <span class="token comment">// 必填，生成签名的时间戳</span></span>
<span class="code-line">    nonceStr<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 必填，生成签名的随机串</span></span>
<span class="code-line">    signature<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><span class="token comment">// 必填，签名，见附录-JS-SDK使用权限签名算法</span></span>
<span class="code-line">    jsApiList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'selectExternalContact'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//必填，传入需要使用的接口名称</span></span>
<span class="code-line">	<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token comment">// 回调</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'function not exist'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'版本过低请升级'</span><span class="token punctuation">)</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="18e5bad76df38c913486097554f7bfb2" data-type="p" data-lines="1">生成签名算法详见：<a href="#14924" rel="nofollow">附录-JS-SDK使用权限签名算法</a></p><blockquote data-sign="48fcc9741a1b566e44e9189b27d8cdfd_1" data-lines="1">注意，参数agentid为企业微信的<a href="#14953/agentid" rel="nofollow">应用id</a></blockquote><p data-sign="d3fc0147723875360f91c26ef074a98c" data-type="p" data-lines="3"><strong>agentConfig的作用</strong><br>config注入的是企业的身份与权限，而agentConfig注入的是应用的身份与权限。尤其是当调用者为第三方服务商时，通过config无法准确区分出调用者是哪个第三方应用，而在部分场景下，又必须严谨区分出第三方应用的身份，此时即需要通过agentConfig来注入应用的身份信息。</p><p data-sign="d7cdf4ef121f444692cc622710998ef8" data-type="p" data-lines="1"><strong>调用agentConfig的注意事项</strong></p><ol data-sign="e901755136da68ca38c7eb6d98876cf7list6" data-lines="6" class="cherry-list__default" start="1"><li>agentConfig与config的签名算法完全一样，但是jsapi_ticket的获取方法不一样，请特别注意，查看"<a href="/document/path/90539#%E8%8E%B7%E5%8F%96%E5%BA%94%E7%94%A8%E7%9A%84jsapi-ticket" rel="nofollow">获取应用身份的ticket</a>".</li><li>企业微信3.0.24以前的老版本（可通过<a href="#12067/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%9A%84UA" rel="nofollow">企业微信UA</a>判断版本号），在调用wx.agentConfig之前，必须确保先成功调用wx.config</li><li>当前页面url中的域名必须是在该应用中设置的可信域名。 </li><li>agentConfig仅在企业微信2.5.0及以后版本支持，微信客户端不支持（微信开发者工具也不支持）</li><li>仅部分接口才需要调用agentConfig，需注意每个接口的说明</li><li>企业微信ios/mac 端如果出现 "wx.agentConfig undefined" 的报错，可将调用放在异步操作中进行，例如使用：setTimeout 包裹</li></ol></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>