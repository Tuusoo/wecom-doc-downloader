<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取已服务的外部联系人 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取已服务的外部联系人
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2023/11/30</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="95b59e8d59db6e2ec5bd6d179161af49" data-type="p" data-lines="1">企业可通过此接口获取所有已服务的外部联系人，及其添加人和加入的群聊。外部联系人分为客户和其他外部联系人，如果是客户，接口将返回外部联系人临时ID和externaluserid；如果是其他外部联系人，接口将只返回外部联系人临时ID。</p><p data-sign="6c36f98780c6db24eaf04690bc5a5be4" data-type="p" data-lines="2">企业可通过外部联系人临时ID排除重复数据，外部联系人临时ID有效期为4小时。</p><p data-sign="br4" data-type="br" data-lines="4">&nbsp;</p><p data-sign="d24270eaf9be61b0ad2b5824687a6868" data-type="p" data-lines="2"><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong>https://qyapi.weixin.qq.com/cgi-bin/externalcontact/contact_list?access_token=ACCESS_TOKEN</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="2"><strong>请求示例：</strong></p><div data-sign="0bfa311b4c0bcd0a8ed1f8f6b6dfa9d9" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"cursor"</span><span class="token operator">:</span><span class="token string">"CURSOR"</span><span class="token punctuation">,</span></span>
<span class="code-line">  	<span class="token string">"limit"</span><span class="token operator">:</span><span class="token number">1000</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="2c98102ca26fb785c0f8b396d6188f24" data-lines="5">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">调用接口凭证</td></tr><tr><td align="left">cursor</td><td align="left">否</td><td align="left">用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填</td></tr><tr><td align="left">limit</td><td align="left">否</td><td align="left">返回的最大记录数，整型，默认为1000</td></tr></tbody></table></div><div data-sign="e210d1c9626de7e0515b6d7cb4e10721" data-type="div" data-lines="4"><strong><div class="colorful_tips colorful_tips_warning"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSI4IiBmaWxsPSIjQjM2NzFEIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDNDNy40NDc3MiAzIDcgMy40NDc3MiA3IDRWOEM3IDguNTUyMjggNy40NDc3MiA5IDggOUM4LjU1MjI4IDkgOSA4LjU1MjI4IDkgOFY0QzkgMy40NDc3MiA4LjU1MjI4IDMgOCAzWk04IDExQzcuNDQ3NzIgMTEgNyAxMS40NDc3IDcgMTJDNyAxMi41NTIzIDcuNDQ3NzIgMTMgOCAxM0M4LjU1MjI4IDEzIDkgMTIuNTUyMyA5IDEyQzkgMTEuNDQ3NyA4LjU1MjI4IDExIDggMTFaIiBmaWxsPSJ3aGl0ZSIvPjwvc3ZnPg==">注意</div><div class="colorful_tips_cnt">	cursor具有有效期，请勿缓存后使用<br></div></div><br></strong></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="2c2aae388b7c1ca66917a9d8fa290f29" data-type="p" data-lines="2"><strong>权限说明：</strong><br>调用的应用需要满足如下的权限</p><div class="cherry-table-container" data-sign="de752fbccf401d87e86afd3e30399e91" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<a href="#13473/%E9%85%8D%E7%BD%AE%E5%8F%AF%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BA%94%E7%94%A8" rel="nofollow">客户联系 可调用接口的应用</a>」中</td></tr><tr><td>代开发应用</td><td>暂不支持</td></tr><tr><td>第三方应用</td><td>暂不支持</td></tr></tbody></table></div><p data-sign="0d9e8df569fd1af08e5af1a04c3f7f01" data-type="p" data-lines="1"> <em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></p><p data-sign="br6" data-type="br" data-lines="6">&nbsp;</p><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="1"><strong>返回结果：</strong></p><div data-sign="00027ddc32b3f2b3e8ca4e013dd5260e" data-type="codeBlock" data-lines="40">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"info_list"</span><span class="token operator">:</span></span>
<span class="code-line">   <span class="token punctuation">[</span></span>
<span class="code-line">   		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"is_customer"</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"***开"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"tmp_openid"</span><span class="token operator">:</span><span class="token string">"TMP_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"follow_userid"</span><span class="token operator">:</span><span class="token string">"USER_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"chat_name"</span><span class="token operator">:</span><span class="token string">"外联群1"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"add_time"</span><span class="token operator">:</span><span class="token number">1694418699</span></span>
<span class="code-line">		  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		  <span class="token punctuation">{</span></span>
<span class="code-line">		  	<span class="token string">"is_customer"</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"tmp_openid"</span><span class="token operator">:</span><span class="token string">"TMP_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"external_userid"</span><span class="token operator">:</span><span class="token string">"woAJ2GCAAAXtWyujaWJHDDGi0mACHAAA"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"follow_userid"</span><span class="token operator">:</span><span class="token string">"USER_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"add_time"</span><span class="token operator">:</span><span class="token number">1694418699</span></span>
<span class="code-line">		  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		  <span class="token punctuation">{</span></span>
<span class="code-line">		  	<span class="token string">"is_customer"</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"tmp_openid"</span><span class="token operator">:</span><span class="token string">"TMP_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"external_userid"</span><span class="token operator">:</span><span class="token string">"woAJ2GCAAAXtWyujaWJHDDGi0mACHAAA"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"chat_id"</span><span class="token operator">:</span><span class="token string">"CHATID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"add_time"</span><span class="token operator">:</span><span class="token number">1694418699</span></span>
<span class="code-line">		  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		    <span class="token punctuation">{</span></span>
<span class="code-line">		  	<span class="token string">"is_customer"</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"tmp_openid"</span><span class="token operator">:</span><span class="token string">"TMP_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"***开"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"follow_userid"</span><span class="token operator">:</span><span class="token string">"USER_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"add_time"</span><span class="token operator">:</span><span class="token number">1694418699</span></span>
<span class="code-line">		  <span class="token punctuation">}</span></span>
<span class="code-line">   <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"next_cursor"</span><span class="token operator">:</span><span class="token string">"NEXT_CURSOR"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="f63b41e8c844aaf65f09eec45453659a" data-lines="13">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">对返回码的文本描述内容</td></tr><tr><td align="left">info_list.is_customer</td><td align="left">是否被成员标记为客户</td></tr><tr><td align="left">info_list.tmp_openid</td><td align="left"><strong>外部联系人临时ID</strong></td></tr><tr><td align="left">info_list.external_userid</td><td align="left">外部联系人的externaluserid（如果是客户才返回）</td></tr><tr><td align="left">info_list.name</td><td align="left">脱敏后的外部联系人昵称（如果是其他外部联系人才返回）</td></tr><tr><td align="left">info_list.follow_userid</td><td align="left">添加此外部联系人的企业成员或外部联系人所在群聊的群主userid</td></tr><tr><td align="left">info_list.chat_id</td><td align="left">外部联系人所在的群聊ID（如果群聊被成员标记为客户群才返回）</td></tr><tr><td align="left">info_list.chat_name</td><td align="left">外部联系人所在群聊的群名（如果群聊未被成员标记为客户群才返回）</td></tr><tr><td align="left">info_list.add_time</td><td align="left">外部联系人首次添加/进群的时间</td></tr><tr><td align="left">next_cursor</td><td align="left">分页游标，再下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空,<strong>有效期为4小时</strong></td></tr></tbody></table></div><h1 id="%E6%8F%90%E7%A4%BA%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%B8%B4%E6%97%B6id%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E7%9A%84%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%EF%BC%8C%E4%BC%81%E4%B8%9A%E5%8F%AF%E6%A0%B9%E6%8D%AE%E6%AD%A4id%E5%AF%B9%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E8%BF%9B%E8%A1%8C%E5%8E%BB%E9%87%8D%E7%BB%9F%E8%AE%A1%E3%80%82%E4%BD%86%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%B8%B4%E6%97%B6id%E4%BB%85%E5%9C%A8%E4%B8%80%E8%BD%AE%E9%81%8D%E5%8E%86%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%BB%8E%E9%A6%96%E4%B8%AA%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%BC%80%E5%A7%8B%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%AE%8C%E6%AF%95%EF%BC%89%E4%B8%AD%E5%94%AF%E4%B8%80%EF%BC%9B%E6%AF%8F%E6%AC%A1%E8%AF%B7%E6%B1%82%E9%A6%96%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%88%86%E9%A1%B5%EF%BC%88cursor%E4%B8%BA%E7%A9%BA%EF%BC%89%E6%97%B6%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%9A%84%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%B8%B4%E6%97%B6id%E5%92%8Cnext-cursor%E5%B0%86%E5%8F%91%E7%94%9F%E5%8F%98%E5%8C%96%E3%80%82" data-sign="bef356034d8f1bad0a362976a71bdf71" data-lines="2"><a class="anchor" href="#%E6%8F%90%E7%A4%BA%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%B8%B4%E6%97%B6id%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E7%9A%84%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%EF%BC%8C%E4%BC%81%E4%B8%9A%E5%8F%AF%E6%A0%B9%E6%8D%AE%E6%AD%A4id%E5%AF%B9%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E8%BF%9B%E8%A1%8C%E5%8E%BB%E9%87%8D%E7%BB%9F%E8%AE%A1%E3%80%82%E4%BD%86%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%B8%B4%E6%97%B6id%E4%BB%85%E5%9C%A8%E4%B8%80%E8%BD%AE%E9%81%8D%E5%8E%86%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%BB%8E%E9%A6%96%E4%B8%AA%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%BC%80%E5%A7%8B%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%AE%8C%E6%AF%95%EF%BC%89%E4%B8%AD%E5%94%AF%E4%B8%80%EF%BC%9B%E6%AF%8F%E6%AC%A1%E8%AF%B7%E6%B1%82%E9%A6%96%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%88%86%E9%A1%B5%EF%BC%88cursor%E4%B8%BA%E7%A9%BA%EF%BC%89%E6%97%B6%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%9A%84%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%B8%B4%E6%97%B6id%E5%92%8Cnext-cursor%E5%B0%86%E5%8F%91%E7%94%9F%E5%8F%98%E5%8C%96%E3%80%82"></a><div class="colorful_tips colorful_tips_tip"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSI4IiBmaWxsPSIjMTU4ODMxIi8+PHBhdGggZD0iTTUgNS44NTkwOUM1IDYuMjczMyA1LjMzNTc5IDYuNjA5MDkgNS43NSA2LjYwOTA5QzYuMTY0MjEgNi42MDkwOSA2LjUgNi4yNzMzIDYuNSA1Ljg1OTA5SDVaTTcuMjUgOS4yNUM3LjI1IDkuNjY0MjEgNy41ODU3OSAxMCA4IDEwQzguNDE0MjEgMTAgOC43NSA5LjY2NDIxIDguNzUgOS4yNUg3LjI1Wk04LjEwMDA2IDcuOTY2MTNMOC4wNjkzMiA3LjIxNjc2TDguMTAwMDYgNy45NjYxM1pNOS41IDUuODU5MDlDOS41IDYuNTQ2MjkgOC45MDkgNy4xODIzMiA4LjA2OTMyIDcuMjE2NzZMOC4xMzA4IDguNzE1NUM5LjY4MzUzIDguNjUxODEgMTEgNy40Mzg2NyAxMSA1Ljg1OTA5SDkuNVpNNi41IDUuODU5MDlDNi41IDUuMTUzNDQgNy4xMjUxNCA0LjUgOCA0LjVWM0M2LjM4OTU4IDMgNSA0LjIzNTExIDUgNS44NTkwOUg2LjVaTTggNC41QzguODc0ODYgNC41IDkuNSA1LjE1MzQ0IDkuNSA1Ljg1OTA5SDExQzExIDQuMjM1MTEgOS42MTA0MiAzIDggM1Y0LjVaTTcuMjUgOC4wNjgxOFY5LjI1SDguNzVWOC4wNjgxOEg3LjI1Wk04LjA2OTMyIDcuMjE2NzZDNy42MzI4MyA3LjIzNDY3IDcuMjUgNy41OTAzOCA3LjI1IDguMDY4MThIOC43NUM4Ljc1IDguNDM1NTMgOC40NTY5MiA4LjcwMjEzIDguMTMwOCA4LjcxNTVMOC4wNjkzMiA3LjIxNjc2WiIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTIiIHI9IjEiIGZpbGw9IndoaXRlIi8+PC9zdmc+">提示</div><div class="colorful_tips_cnt">外部联系人临时id是一个外部联系人的唯一标识，企业可根据此id对外部联系人进行去重统计。但外部联系人临时id仅在一轮遍历查询（从首个分页查询开始到最后一个分页查询完毕）中唯一；每次请求首个数据分页（cursor为空）时，返回的外部联系人临时id和next_cursor将发生变化。</div></div></h1><p data-sign="e179902ddcdb84524c7cb423884a5621" data-type="p" data-lines="1"></p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>