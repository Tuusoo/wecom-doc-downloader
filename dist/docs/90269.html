<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>审批流程引擎 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        审批流程引擎
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2023/11/29</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="a87eb70df76f51af99a394d1ef170232-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E6%A6%82%E8%BF%B0" class="level-2">概述</a></li><li class="toc-li"><a href="#1%E5%88%9B%E5%BB%BA%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E6%A8%A1%E6%9D%BF" class="level-2">1.创建自建应用审批模板</a></li><li class="toc-li"><a href="#2%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%8F%91%E8%B5%B7%E5%AE%A1%E6%89%B9" class="level-2">2.自建应用发起审批</a></li><li class="toc-li"><a href="#3%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E7%8A%B6%E6%80%81%E5%8F%98%E5%8C%96%E9%80%9A%E7%9F%A5%E5%9B%9E%E8%B0%83" class="level-2">3.自建应用审批状态变化通知回调</a></li><li class="toc-li"><a href="#4%E6%9F%A5%E8%AF%A2%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E5%8D%95%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81" class="level-2">4.查询自建应用审批单当前状态</a></li></dir><h2 id="%E6%A6%82%E8%BF%B0" data-sign="9a8437ccee43ad66c084b8dfd3d259d3" data-lines="2"><a class="anchor" href="#%E6%A6%82%E8%BF%B0"></a>概述</h2><p data-sign="6a8ffba16f3aa29cf35a09d962dba8eb" data-type="p" data-lines="3">企业微信向开发者提供审批流程引擎，此特性可将审批流程相关功能嵌入到自建应用中。<br>开发者可在自建应用中直接调用接口发起审批申请，系统根据审批流程自动通知相关人员进行审批操作。<br>提交申请后审批流程的每次状态变化，都会通知开发者，可按需进行拓展开发。</p><blockquote data-sign="9cf2429f530f3a85160631638f041ad9_2" data-lines="2">此套接口在自建应用中闭环，与“企业微信审批应用”相关接口无关。</blockquote><p data-sign="ce9b5a07f3bd4fbe017942f65c9b405e" data-type="p" data-lines="2"><a href="http://p.qpic.cn/pic_wework/2464461863/3533ac3923dfe3c9ac3a54f574d02284a27c5f71807bf954/0" rel="nofollow" title="自建应用审批流程引擎示意图"><img src="images/90269/c0a89e0f.png" alt="自建应用审批流程引擎示意图" title="自建应用审批流程引擎示意图"></a></p><h2 id="1%E5%88%9B%E5%BB%BA%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E6%A8%A1%E6%9D%BF" data-sign="4449cac8f0803172c796d4fc27309be3" data-lines="2"><a class="anchor" href="#1%E5%88%9B%E5%BB%BA%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E6%A8%A1%E6%9D%BF"></a>1.创建自建应用审批模板</h2><p data-sign="2d7e6909f646996c38c84ea427b3bf3b" data-type="p" data-lines="2">开发者可在“管理后台-自建应用-审批接口”中，创建审批模板。</p><p data-sign="5e152a0c9fbd7ba0e5362c5ca69acdca" data-type="p" data-lines="2"><strong>功能说明：</strong></p><div class="cherry-table-container" data-sign="40503ae18108d38727b007595497a947" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>模板ID</td><td>用于审批申请类型区分。在后续发起审批申请时，将申请和审批流程进行关联。</td></tr><tr><td>审批流程</td><td>审批流程相关配置。后续以此模板ID发起的审批申请，都将按照设置的流程进行通知和流转。</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h2 id="2%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%8F%91%E8%B5%B7%E5%AE%A1%E6%89%B9" data-sign="9cb3c8682af05c75e5c2f9c41064a09d" data-lines="1"><a class="anchor" href="#2%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%8F%91%E8%B5%B7%E5%AE%A1%E6%89%B9"></a>2.自建应用发起审批</h2><p data-sign="0be2b43a891ddd614a43a33280bc0ad6" data-type="p" data-lines="5">通过JS-SDK，可在自建应用中发起审批。<a href="#14931" rel="nofollow">查看JS-SDK调用详细说明</a><br>具体步骤：<br>1.通过config接口注入权限验证配置。<a href="#14931/%E6%AD%A5%E9%AA%A4%E4%BA%8C%EF%BC%9A%E9%80%9A%E8%BF%87config%E6%8E%A5%E5%8F%A3%E6%B3%A8%E5%85%A5%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE" rel="nofollow">查看</a><br>2.通过agentConfig注入应用的权限。<a href="#14932" rel="nofollow">查看</a><br>3.调用审批流程引擎JS-API（如下文请求示例）。</p><blockquote data-sign="14f930935259ad0b7ea83b62f6fd44a9_1" data-lines="1">注：企业微信客户端2.5.0及以上版本支持。</blockquote><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="c7e7dc512c519fd67b88603af1ebd35f" data-type="codeBlock" data-lines="23">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">wx<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'thirdPartyOpenPage'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token string">"oaType"</span><span class="token operator">:</span> <span class="token string">"10001"</span><span class="token punctuation">,</span><span class="token comment">// String</span></span>
<span class="code-line">    <span class="token string">"templateId"</span><span class="token operator">:</span> <span class="token string">"46af67a118a6ebf000002"</span><span class="token punctuation">,</span><span class="token comment">// String</span></span>
<span class="code-line">    <span class="token string">"thirdNo"</span><span class="token operator">:</span> <span class="token string">"thirdNo"</span><span class="token punctuation">,</span><span class="token comment">// String</span></span>
<span class="code-line">    <span class="token string">"extData"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">'fieldList'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">'title'</span><span class="token operator">:</span> <span class="token string">'采购类型'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">'type'</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">'value'</span><span class="token operator">:</span> <span class="token string">'市场活动'</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">'title'</span><span class="token operator">:</span> <span class="token string">'订单链接'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">'type'</span><span class="token operator">:</span> <span class="token string">'link'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">'value'</span><span class="token operator">:</span> <span class="token string">'https://work.weixin.qq.com'</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token comment">// 输出接口的回调信息</span></span>
<span class="code-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="6e9bd023cbbe1a69b1c81a7601c6b376" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>oaType</td><td>是</td><td>操作类型，目前支持：10001-发起审批；10002-查看审批详情。</td></tr><tr><td>templateId</td><td>是</td><td>发起审批的模板ID，在自建应用-审批接口中创建模板可获取。</td></tr><tr><td>thirdNo</td><td>是</td><td>审批单号，由开发者自行定义，不可重复。</td></tr><tr><td>extData</td><td>是</td><td>详情数据，Json格式，用于审批详情页信息展示。</td></tr></tbody></table></div><p data-sign="223dc91ad0156eee2626a56533f813fa" data-type="p" data-lines="5"><strong>extData数据说明：</strong><br>extData在发起时由开发者传入，其中数据将全部展示在审批申请中：<br>1.开发者可利用此特性，在发起审批时，传入需要申请人、审批人、抄送人看到的信息；<br>2.若需用户填写数据，可在自行使用表单收集，并传入extData中，用于展示。</p><div data-sign="b787e1f845ffeb3737374d3619fb7e13" data-type="codeBlock" data-lines="35">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span>  </span>
<span class="code-line">    <span class="token string">"extData"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">'fieldList'</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">'title'</span><span class="token operator">:</span> <span class="token string">'采购类型'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'type'</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'value'</span><span class="token operator">:</span> <span class="token string">'市场活动'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">'title'</span><span class="token operator">:</span> <span class="token string">'采购说明'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'type'</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'value'</span><span class="token operator">:</span> <span class="token string">'购买个人办公电脑'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">'title'</span><span class="token operator">:</span> <span class="token string">'采购金额'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'type'</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'value'</span><span class="token operator">:</span> <span class="token string">'4839.00元'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">'title'</span><span class="token operator">:</span> <span class="token string">'申请时间'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'type'</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'value'</span><span class="token operator">:</span> <span class="token string">'2018/06/20'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token string">'title'</span><span class="token operator">:</span> <span class="token string">'订单链接'</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token string">'type'</span><span class="token operator">:</span> <span class="token string">'link'</span><span class="token punctuation">,</span>		<span class="token comment">// link类型，用于在审批详情页展示第三方订单跳转地址</span></span>
<span class="code-line">                <span class="token string">'value'</span><span class="token operator">:</span> <span class="token string">'https://www.qq.com'</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="d1e80af2adb9c9ecf01f22546f5fac3a" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>title</td><td>否</td><td>字段标题，将会在审批详情页中展示。</td></tr><tr><td>type</td><td>否</td><td>字段类型，目前支持：text-文本；link:链接。link仅展示在审批详情页。</td></tr><tr><td>value</td><td>否</td><td>字段值，将会在审批详情页中展示。</td></tr></tbody></table></div><p data-sign="0be5475ec20788fd60322d08598315a7" data-type="p" data-lines="2"><strong>错误说明：</strong></p><div class="cherry-table-container" data-sign="93be8ea3e3d91b623bed9e494317e828" data-lines="6">
        <table class="cherry-table"><thead><tr><th>错误提示</th><th>说明</th></tr></thead><tbody><tr><td>已存在相同的审批编号</td><td>oaType为10001时，传入的thirdNo已经被其他审批单占用。</td></tr><tr><td>审批申请不存在</td><td>oaType为10002时，在历史记录中，传入的thirdNo对应的审批单不存在。</td></tr><tr><td>审批模板ID不正确</td><td>调用接口时传入了错误的templateId</td></tr><tr><td>应用ID不正确</td><td>使用了错误的 agentId</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h2 id="3%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E7%8A%B6%E6%80%81%E5%8F%98%E5%8C%96%E9%80%9A%E7%9F%A5%E5%9B%9E%E8%B0%83" data-sign="195613c99657e4614b27afc4a824f930" data-lines="1"><a class="anchor" href="#3%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E7%8A%B6%E6%80%81%E5%8F%98%E5%8C%96%E9%80%9A%E7%9F%A5%E5%9B%9E%E8%B0%83"></a>3.自建应用审批状态变化通知回调</h2><p data-sign="842d745fff96bd5bd6392dbfd70c1e33" data-type="p" data-lines="3">企业可以在管理后台-自建应用-设置API接收中，设置并开启审批状态通知事件。<br>开启后，自建应用每一个审批申请的审批状态变化，都会通知给开发者。<a href="https://work.weixin.qq.com/api/doc#12974/%E5%AE%A1%E6%89%B9%E7%8A%B6%E6%80%81%E9%80%9A%E7%9F%A5%E4%BA%8B%E4%BB%B6" rel="nofollow" title="查看事件回调详细说明">查看事件回调详细说明</a></p><div class="cherry-table-container" data-sign="e8816f84169043f427e1d53381e73b94" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th><th>接收事件开关</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「审批- 可调用接口的应用」中</td><td><a href="#12977/%E5%BC%80%E5%90%AF%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF" rel="nofollow">审批状态通知事件</a></td></tr><tr><td>代开发应用</td><td>具有「<span style="color: rgb(255, 0, 0);">审批</span>」权限</td><td>无</td></tr><tr><td>第三方应用</td><td>具有「<span style="color: rgb(255, 0, 0);">审批</span>」权限</td><td>无</td></tr></tbody></table></div><p data-sign="bae00daaf74d8c562924003900cfd776" data-type="p" data-lines="2">其中，配置可调用接口的自建应用入口如下：<br><img src="images/90269/e7b85778.png" alt="enter image description here"></p><p data-sign="87195cc037b99e4c8da0dcfce451dd43" data-type="p" data-lines="2"><strong>回调通知示例：</strong></p><div data-sign="6e75717be83cd75e7f77594dd3b53e52" data-type="codeBlock" data-lines="50">
      <pre class="language-xml"><code class="language-xml wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xml</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ToUserName</span><span class="token punctuation">&gt;</span></span>wwd08c8e7c775abaaa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ToUserName</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FromUserName</span><span class="token punctuation">&gt;</span></span>sys<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FromUserName</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CreateTime</span><span class="token punctuation">&gt;</span></span>1527838022<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CreateTime</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MsgType</span><span class="token punctuation">&gt;</span></span>event<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MsgType</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Event</span><span class="token punctuation">&gt;</span></span>open_approval_change<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Event</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AgentID</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AgentID</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApprovalInfo</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThirdNo</span><span class="token punctuation">&gt;</span></span>thirdNoxxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ThirdNo</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OpenSpName</span><span class="token punctuation">&gt;</span></span>付款<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OpenSpName</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OpenTemplateId</span><span class="token punctuation">&gt;</span></span>1234567111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OpenTemplateId</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OpenSpStatus</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OpenSpStatus</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApplyTime</span><span class="token punctuation">&gt;</span></span>1527837645<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApplyTime</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApplyUserName</span><span class="token punctuation">&gt;</span></span>jackiejjwu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApplyUserName</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApplyUserId</span><span class="token punctuation">&gt;</span></span>WuJunJie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApplyUserId</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApplyUserParty</span><span class="token punctuation">&gt;</span></span>产品部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApplyUserParty</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApplyUserImage</span><span class="token punctuation">&gt;</span></span>http://www.qq.com/xxx.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApplyUserImage</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApprovalNodes</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApprovalNode</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NodeStatus</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NodeStatus</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NodeAttr</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NodeAttr</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NodeType</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NodeType</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Items</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Item</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemName</span><span class="token punctuation">&gt;</span></span>chauvetxiao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemName</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemUserid</span><span class="token punctuation">&gt;</span></span>XiaoWen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemUserid</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemParty</span><span class="token punctuation">&gt;</span></span>产品部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemParty</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemImage</span><span class="token punctuation">&gt;</span></span>http://www.qq.com/xxx.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemImage</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemStatus</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemStatus</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemSpeech</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemSpeech</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemOpTime</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemOpTime</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Item</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Items</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApprovalNode</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApprovalNodes</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NotifyNodes</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NotifyNode</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemName</span><span class="token punctuation">&gt;</span></span>jinhuiguo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemName</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemUserid</span><span class="token punctuation">&gt;</span></span>GuoJinHui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemUserid</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemParty</span><span class="token punctuation">&gt;</span></span>行政部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemParty</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemImage</span><span class="token punctuation">&gt;</span></span>http://www.qq.com/xxx.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemImage</span><span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NotifyNode</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NotifyNodes</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ApproverStep</span> <span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApproverStep</span> <span class="token punctuation">&gt;</span></span>  </span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ApprovalInfo</span><span class="token punctuation">&gt;</span></span> </span>
<span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xml</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="0ff3de839c3a63b8809c3da75d20f929" data-lines="39">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>ToUserName</td><td>接收方企业Corpid</td></tr><tr><td>FromUserName</td><td>发送方：企业微信</td></tr><tr><td>CreateTime</td><td>消息发送时间</td></tr><tr><td>MsgType</td><td>消息类型</td></tr><tr><td>Event</td><td>事件名称：审批状态变化</td></tr><tr><td>AgentID</td><td>企业应用的id，整型。可在应用的设置页面查看</td></tr><tr><td>ApprovalInfo</td><td>审批信息</td></tr><tr><td>ThirdNo</td><td>审批单编号，由开发者在发起申请时自定义</td></tr><tr><td>OpenSpName</td><td>审批模板名称</td></tr><tr><td>OpenTemplateId</td><td>审批模板id</td></tr><tr><td>OpenSpStatus</td><td>申请单当前审批状态：1-审批中；2-已通过；3-已驳回；4-已撤销</td></tr><tr><td>ApplyTime</td><td>提交申请时间</td></tr><tr><td>ApplyUserName</td><td>提交者姓名</td></tr><tr><td>ApplyUserId</td><td>提交者userid</td></tr><tr><td>ApplyUserParty</td><td>提交者所在部门</td></tr><tr><td>ApplyUserImage</td><td>提交者头像</td></tr><tr><td>ApprovalNodes</td><td>审批流程信息</td></tr><tr><td>ApprovalNode</td><td>审批流程信息，可以有多个审批节点</td></tr><tr><td>NodeStatus</td><td>节点审批操作状态：1-审批中；2-已同意；3-已驳回；4-已转审</td></tr><tr><td>NodeAttr</td><td>审批节点属性：1-或签；2-会签</td></tr><tr><td>NodeType</td><td>审批节点类型：1-固定成员；2-标签；3-上级</td></tr><tr><td>Items</td><td>审批节点信息，当节点为标签或上级时，一个节点可能有多个分支</td></tr><tr><td>Item</td><td>审批节点分支，当节点为标签或上级时，一个节点可能有多个分支</td></tr><tr><td>ItemName</td><td>分支审批人姓名</td></tr><tr><td>ItemUserid</td><td>分支审批人userid</td></tr><tr><td>ItemParty</td><td>分支审批人所在部门</td></tr><tr><td>ItemImage</td><td>分支审批人头像</td></tr><tr><td>ItemStatus</td><td>分支审批审批操作状态：1-审批中；2-已同意；3-已驳回；4-已转审</td></tr><tr><td>ItemSpeech</td><td>分支审批人审批意见</td></tr><tr><td>ItemOpTime</td><td>分支审批人操作时间</td></tr><tr><td>NotifyNodes</td><td>抄送信息，可能有多个抄送人</td></tr><tr><td>NotifyNode</td><td>抄送人信息</td></tr><tr><td>ItemName</td><td>抄送人姓名</td></tr><tr><td>ItemUserid</td><td>抄送人userid</td></tr><tr><td>ItemParty</td><td>抄送人所在部门</td></tr><tr><td>ItemImage</td><td>抄送人头像</td></tr><tr><td>ApproverStep</td><td>当前审批节点：0-第一个审批节点；1-第二个审批节点…以此类推</td></tr></tbody></table></div><p data-sign="br5" data-type="br" data-lines="5">&nbsp;</p><h2 id="4%E6%9F%A5%E8%AF%A2%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E5%8D%95%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81" data-sign="3766cfc3bdd7fcf78917fa2c1050d76c" data-lines="1"><a class="anchor" href="#4%E6%9F%A5%E8%AF%A2%E8%87%AA%E5%BB%BA%E5%BA%94%E7%94%A8%E5%AE%A1%E6%89%B9%E5%8D%95%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81"></a>4.查询自建应用审批单当前状态</h2><p data-sign="094fda36d1e844f4b890c3efc01370fa" data-type="p" data-lines="2">开发者也可主动查询审批单的当前审批状态。</p><p data-sign="754fd66ef6aa710f582f7710a33e5f0b" data-type="p" data-lines="3"><strong>请求方式：</strong> POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong> https://qyapi.weixin.qq.com/cgi-bin/corp/getopenapprovaldata?access_token=ACCESS_TOKEN</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="2ed52929a10a26e5a4df16adab6f84ef" data-type="codeBlock" data-lines="5">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"thirdNo"</span><span class="token operator">:</span> <span class="token string">"thirdNoxxx"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="8fccfb65a839ae6ce2b2a91bcec470ef" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证</td></tr><tr><td>thirdNo</td><td>是</td><td>开发者发起申请时定义的审批单号</td></tr></tbody></table></div><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="2"><strong>返回结果：</strong></p><div data-sign="f024c2426f122321422335477ede6373" data-type="codeBlock" data-lines="51">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"ThirdNo"</span><span class="token operator">:</span> <span class="token string">"thirdNoxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"OpenTemplateId"</span><span class="token operator">:</span> <span class="token string">"1234567111"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"OpenSpName"</span><span class="token operator">:</span> <span class="token string">"付款"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"OpenSpstatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ApplyTime"</span><span class="token operator">:</span> <span class="token number">1527837645</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ApplyUsername"</span><span class="token operator">:</span> <span class="token string">"jackiejjwu"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ApplyUserParty"</span><span class="token operator">:</span> <span class="token string">"产品部"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ApplyUserImage"</span><span class="token operator">:</span> <span class="token string">"http://www.qq.com/xxx.png"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ApplyUserId"</span><span class="token operator">:</span> <span class="token string">"WuJunJie"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ApprovalNodes"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"ApprovalNode"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                <span class="token punctuation">{</span></span>
<span class="code-line">                    <span class="token property">"NodeStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"NodeAttr"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"NodeType"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"Items"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">                        <span class="token property">"Item"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                            <span class="token punctuation">{</span></span>
<span class="code-line">                                <span class="token property">"ItemName"</span><span class="token operator">:</span> <span class="token string">"chauvetxiao"</span><span class="token punctuation">,</span></span>
<span class="code-line">                                <span class="token property">"ItemParty"</span><span class="token operator">:</span> <span class="token string">"产品部"</span><span class="token punctuation">,</span></span>
<span class="code-line">                                <span class="token property">"ItemImage"</span><span class="token operator">:</span> <span class="token string">"http://www.qq.com/xxx.png"</span><span class="token punctuation">,</span></span>
<span class="code-line">                                <span class="token property">"ItemUserId"</span><span class="token operator">:</span> <span class="token string">"XiaoWen"</span><span class="token punctuation">,</span></span>
<span class="code-line">                                <span class="token property">"ItemStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                                <span class="token property">"ItemSpeech"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="code-line">                                <span class="token property">"ItemOpTime"</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="code-line">                            <span class="token punctuation">}</span></span>
<span class="code-line">                        <span class="token punctuation">]</span></span>
<span class="code-line">                    <span class="token punctuation">}</span></span>
<span class="code-line">                <span class="token punctuation">}</span></span>
<span class="code-line">            <span class="token punctuation">]</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"NotifyNodes"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"NotifyNode"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">                <span class="token punctuation">{</span></span>
<span class="code-line">                    <span class="token property">"ItemName"</span><span class="token operator">:</span> <span class="token string">"jinhuiguo"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"ItemParty"</span><span class="token operator">:</span> <span class="token string">"行政部"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"ItemImage"</span><span class="token operator">:</span> <span class="token string">"http://www.qq.com/xxx.png"</span><span class="token punctuation">,</span></span>
<span class="code-line">                    <span class="token property">"ItemUserId"</span><span class="token operator">:</span> <span class="token string">"GuoJinHui"</span></span>
<span class="code-line">                <span class="token punctuation">}</span></span>
<span class="code-line">            <span class="token punctuation">]</span></span>
<span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ApproverStep"</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="code-line">    <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="49e3cfd2a291a8d4c4ebafdd42326854" data-lines="38">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>ToUserName</td><td>接收方企业Corpid</td></tr><tr><td>FromUserName</td><td>发送方：企业微信</td></tr><tr><td>CreateTime</td><td>消息发送时间</td></tr><tr><td>MsgType</td><td>消息类型</td></tr><tr><td>Event</td><td>事件名称：审批状态变化</td></tr><tr><td>ApprovalInfo</td><td>审批信息</td></tr><tr><td>ThirdNo</td><td>审批单编号，由开发者在发起申请时自定义</td></tr><tr><td>OpenSpName</td><td>审批模板名称</td></tr><tr><td>OpenTemplateId</td><td>审批模板id</td></tr><tr><td>OpenSpStatus</td><td>申请单当前审批状态：1-审批中；2-已通过；3-已驳回；4-已撤销</td></tr><tr><td>ApplyTime</td><td>提交申请时间</td></tr><tr><td>ApplyUserName</td><td>提交者姓名</td></tr><tr><td>ApplyUserId</td><td>提交者userid</td></tr><tr><td>ApplyUserParty</td><td>提交者所在部门</td></tr><tr><td>ApplyUserImage</td><td>提交者头像</td></tr><tr><td>ApprovalNodes</td><td>审批流程信息</td></tr><tr><td>ApprovalNode</td><td>审批流程信息，可以有多个审批节点</td></tr><tr><td>NodeStatus</td><td>节点审批操作状态：1-审批中；2-已同意；3-已驳回；4-已转审</td></tr><tr><td>NodeAttr</td><td>审批节点属性：1-或签；2-会签</td></tr><tr><td>NodeType</td><td>审批节点类型：1-固定成员；2-标签；3-上级</td></tr><tr><td>Items</td><td>审批节点信息，当节点为标签或上级时，一个节点可能有多个分支</td></tr><tr><td>Item</td><td>审批节点分支，当节点为标签或上级时，一个节点可能有多个分支</td></tr><tr><td>ItemName</td><td>分支审批人姓名</td></tr><tr><td>ItemUserid</td><td>分支审批人userid</td></tr><tr><td>ItemParty</td><td>分支审批人所在部门</td></tr><tr><td>ItemImage</td><td>分支审批人头像</td></tr><tr><td>ItemStatus</td><td>分支审批审批操作状态：1-审批中；2-已同意；3-已驳回；4-已转审</td></tr><tr><td>ItemSpeech</td><td>分支审批人审批意见</td></tr><tr><td>ItemOpTime</td><td>分支审批人操作时间</td></tr><tr><td>NotifyNodes</td><td>抄送信息，可能有多个抄送人</td></tr><tr><td>NotifyNode</td><td>抄送人信息</td></tr><tr><td>ItemName</td><td>抄送人姓名</td></tr><tr><td>ItemUserid</td><td>抄送人userid</td></tr><tr><td>ItemParty</td><td>抄送人所在部门</td></tr><tr><td>ItemImage</td><td>抄送人头像</td></tr><tr><td>ApproverStep</td><td>当前审批节点：0-第一个审批节点；1-第二个审批节点…以此类推</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>