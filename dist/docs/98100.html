<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取资金流水 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取资金流水
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/07/18</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="3f02d318a8c2d3b9f3a66a3d9b3095ae" data-type="p" data-lines="1">企业可通过此接口获取企业的资金流水。</p><p data-sign="f3c93a5d7caf54dfb6b9357f94fb56f0" data-type="p" data-lines="3"><strong>请求方式：</strong>POST(<strong>HTTPS</strong>)<br><strong>请求地址：</strong>https://qyapi.weixin.qq.com/cgi-bin/externalpay/get_fund_flow?access_token=ACCESS_TOKEN</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="2dd0f31dc35e42b1633a26d1b4e73031" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"begin_time"</span><span class="token operator">:</span><span class="token number">1605171726</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"end_time"</span><span class="token operator">:</span><span class="token number">1605172726</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"mch_id"</span><span class="token operator">:</span> <span class="token string">"1234"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"cursor"</span><span class="token operator">:</span><span class="token string">"CURSOR"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"limit"</span><span class="token operator">:</span><span class="token number">10</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="846d8d4e604faa4ab152798449d93a34" data-lines="7">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">begin_time</td><td align="left">是</td><td align="left">资金流水记录开始时间</td></tr><tr><td align="left">end_time</td><td align="left">是</td><td align="left">资金流水记录结束时间</td></tr><tr><td align="left">mch_id</td><td align="left">否</td><td align="left">商户号ID，若不填写则拉取所有商户号的资金流水</td></tr><tr><td align="left">cursor</td><td align="left">否</td><td align="left">用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填</td></tr><tr><td align="left">limit</td><td align="left">否</td><td align="left">返回的最大记录数，默认值100，最大不超过200</td></tr></tbody></table></div><p data-sign="bcce16747e85772b20326ef2e0416930" data-type="p" data-lines="1"><strong>补充说明:</strong></p><blockquote data-sign="177ca628b6b0f0e966031fde3731f392_4" data-lines="4">可以拉取不早于2022年12月1日的资金流水记录，资金流水记录最长保留3年。<br>当日的资金流水会在次日上午11点后生成。<br>资金流水的起止间隔不能超过31天。<br>会过滤操作人不在应用可见范围中的资金流水，因此返回的记录数可能会小于limit设置的最大记录数。<br>如果没有获取到next_cursor，说明已经拉取完所有的数据。</blockquote><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><ul data-sign="466163593918d86443788569c9d97339list4" data-lines="4" class="cherry-list__default"><li>仅返回在企业微信开通的商户号资金流水</li><li>调用的应用需要满足如下的权限<br><div class="cherry-table-container" data-sign="a83e979338e5fcc6876ae9bceee129bb" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<a href="#24952/%E9%85%8D%E7%BD%AE%E5%8F%AF%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BA%94%E7%94%A8" rel="nofollow">对外收款- 可调用接口的应用</a>」中</td></tr><tr><td>代开发应用</td><td>暂不支持</td></tr><tr><td>第三方应用</td><td>暂不支持</td></tr></tbody></table></div><br><em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></li></ul><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="1"><strong>返回结果：</strong></p><div data-sign="fada61ed7924d6db72069812a6c86787" data-type="codeBlock" data-lines="29">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"errcode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"errmsg"</span><span class="token operator">:</span><span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"next_cursor"</span><span class="token operator">:</span><span class="token string">"CURSOR"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"fund_flow_list"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"timestamp"</span><span class="token operator">:</span> <span class="token number">1605171726</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"request_no"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"transaction_type"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"fund_flow_type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"transaction_amount"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"account_balance"</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"out_trade_no"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"mch_id"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"operator_userid"</span><span class="token operator">:</span> <span class="token string">"ZhangSan"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"group_list"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token punctuation">{</span></span>
<span class="code-line">					<span class="token string">"group_name"</span><span class="token operator">:</span> <span class="token string">"Rule1"</span></span>
<span class="code-line">				<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token punctuation">{</span></span>
<span class="code-line">					<span class="token string">"group_name"</span><span class="token operator">:</span> <span class="token string">"Rule2"</span></span>
<span class="code-line">				<span class="token punctuation">}</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"remark"</span><span class="token operator">:</span> <span class="token string">"REMARK"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="e9077e5bbdf255708f50941311c4a46d" data-lines="18">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th>说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td>返回码</td></tr><tr><td align="left">errmsg</td><td>对返回码的文本描述内容</td></tr><tr><td align="left">next_cursor</td><td>分页游标，在下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则不返回该字段</td></tr><tr><td align="left">fund_flow_list</td><td>资金流水记录列表</td></tr><tr><td align="left">fund_flow_list[].timestamp</td><td>动账时间</td></tr><tr><td align="left">fund_flow_list[].request_no</td><td>关联单号，即微信支付资金流水单号</td></tr><tr><td align="left">fund_flow_list[].transaction_type</td><td>动账类型。1：退款，2：交易手续费，3：收款，4：提现，5：其他</td></tr><tr><td align="left">fund_flow_list[].fund_flow_type</td><td>收支类型。1：收入，2：支出</td></tr><tr><td align="left">fund_flow_list[].transaction_amount</td><td>动账金额，整型数据，单位：分</td></tr><tr><td align="left">fund_flow_list[].account_balance</td><td>账户余额，整型数据，单位：分</td></tr><tr><td align="left">fund_flow_list[].out_trade_no</td><td>商户单号，即业务凭证号</td></tr><tr><td align="left">fund_flow_list[].mch_id</td><td>商户号ID</td></tr><tr><td align="left">fund_flow_list[].operator_userid</td><td>操作人userid</td></tr><tr><td align="left">fund_flow_list[].group_list</td><td>所属规则组列表</td></tr><tr><td align="left">fund_flow_list[].group_list[].group_name</td><td>规则组名称</td></tr><tr><td align="left">fund_flow_list[].remark</td><td>备注</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>