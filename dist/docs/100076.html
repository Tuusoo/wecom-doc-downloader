<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>会话展示组件 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        会话展示组件
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/03/14</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="d99b89e2596aea09503b7f666c6790ef-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#1-%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D" class="level-2">1. 背景介绍</a></li><li class="toc-li"><a href="#2-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" class="level-2">2. 使用方法</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#21-%E7%8E%AF%E5%A2%83%E8%A6%81%E6%B1%82" class="level-3">2.1 环境要求</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" class="level-4"><strong>注意事项</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#22-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" class="level-3">2.2 准备工作</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#23-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8" class="level-3">2.3 开始使用</a></li><li class="toc-li"><a href="#3-api-%E8%AF%B4%E6%98%8E" class="level-2">3. API 说明</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#31-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E" class="level-3">3.1 参数说明</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#el-htmlelement-string" class="level-4"><strong>el?: HTMLElement | string</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#data-unknown" class="level-4"><strong>data?: unknown</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#template-string" class="level-4"><strong>template: string</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#style-string" class="level-4"><strong>style?: string</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#32-%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95" class="level-3">3.2 回调方法</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#errorerror-unknown" class="level-4"><strong>error(error: unknown)</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#handlemodalevent-modalurl-modalsize-boolean-promiseltbooleangt" class="level-4"><strong>handleModal(event: { modalUrl, modalSize }): boolean | Promise&lt;boolean&gt;</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#handlemounted-void" class="level-4"><strong>handleMounted(): void</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#handleupdated-void" class="level-4"><strong>handleUpdated(): void</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#33-%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95" class="level-3">3.3 组件方法</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#setdatadata-unknown" class="level-4"><strong>setData(data: unknown)</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#34-%E5%8A%9F%E8%83%BD%E6%A0%87%E7%AD%BE" class="level-3">3.4 功能标签</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#scroll-view" class="level-4"><strong>scroll-view</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ww-media-preview-group" class="level-4"><strong>ww-media-preview-group</strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#35-%E6%A8%A1%E6%9D%BF%E7%BB%84%E4%BB%B6" class="level-3">3.5 模板组件</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#code30aab2d738e26e02df148278c51d0c09" class="level-4"><strong><code>ww-open-data</code></strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codecce235e7bfd55b7770279ae83e7fd8d9" class="level-4"><strong><code>ww-open-message</code></strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codec9e6905f2e10c31acbbc7cf507c88c7e" class="level-4"><strong><code>ww-open-button</code></strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#code9defa16f748acb402ad33bfa6dcacff6" class="level-4"><strong><code>ww-open-result-link</code></strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#code8630c7fb8ebbe45710c8f536b6e7fb1c" class="level-4"><strong><code>ww-open-result-text</code></strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codea2daddf89562feeacfacea8b2f8c1cb3" class="level-4"><strong><code>ww-suspense</code></strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codee13112a99ed55ad5c254989ebd09df42" class="level-4"><strong><code>ww-open-data-export-button</code></strong></a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#36-%E6%A8%A1%E6%9D%BF%E7%BB%84%E4%BB%B6%E9%94%99%E8%AF%AF%E4%BA%8B%E4%BB%B6" class="level-3">3.6 模板组件错误事件</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#37-context" class="level-3">3.7 Context</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#scrollviewcontext" class="level-4"><strong>ScrollViewContext</strong></a></li><li class="toc-li"><a href="#3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" class="level-2">3. 错误处理</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E7%99%BB%E5%BD%95%E6%80%81%E8%BF%87%E6%9C%9F%E6%88%96%E8%80%85%E5%BC%82%E5%B8%B8" class="level-3">登录态过期或者异常</a></li><li class="toc-li"><a href="#4-%E6%8E%A8%E8%8D%90%E7%94%A8%E6%B3%95" class="level-2">4. 推荐用法</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%88%97%E8%A1%A8%E4%B8%AD%E5%B1%95%E7%A4%BA%E4%BC%9A%E8%AF%9D%E7%BB%84%E4%BB%B6" class="level-3">列表中展示会话组件</a></li><li class="toc-li"><a href="#faq" class="level-2">FAQ</a></li><li class="toc-li"><a href="#%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95" class="level-2">更新记录</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2024-09-25" class="level-3">2024-09-25</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2024-09-06" class="level-3">2024-09-06</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2024-05-10" class="level-3">2024-05-10</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2024-04-24" class="level-3">2024-04-24</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2024-04-01" class="level-3">2024-04-01</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2024-02-02" class="level-3">2024-02-02</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2024-01-09" class="level-3">2024-01-09</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#2023-12-27" class="level-3">2023-12-27</a></li></dir><h2 id="1-%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D" data-sign="17a8e99db0b98a645558a98c01ac36aa" data-lines="2"><a class="anchor" href="#1-%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D"></a>1. 背景介绍</h2><p data-sign="5f43288561315b3f4a873b1dc725e93c" data-type="p" data-lines="2">企业会话记录是企业的重要敏感数据，开发者应用不能直接获得授权企业的会话内容数据。开发者页面若需要展示企业的会话记录信息，可使用如下的 『会话展示组件』，以提供安全良好的体验。</p><h2 id="2-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" data-sign="ee9fbfb55e773ae04334dffa8a62c1dd" data-lines="2"><a class="anchor" href="#2-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"></a>2. 使用方法</h2><h3 id="21-%E7%8E%AF%E5%A2%83%E8%A6%81%E6%B1%82" data-sign="170deafc1ff67f901ae53cf9097c4ef5" data-lines="2"><a class="anchor" href="#21-%E7%8E%AF%E5%A2%83%E8%A6%81%E6%B1%82"></a>2.1 环境要求</h3><ul data-sign="b8e833c0269e06929499ab1119727727list2" data-lines="2" class="cherry-list__default"><li>企业微信 2.8.10 及以上版本；</li><li><a href="https://www.npmjs.com/package/@wecom/jssdk" rel="nofollow">@wecom/jssdk</a>  2.0.1 以上版本；</li></ul><h4 id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" data-sign="8b7fee28a94a5fd82dd60eca6fe955ae" data-lines="2"><a class="anchor" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"></a><strong>注意事项</strong></h4><ul data-sign="536754f2c155870f27c34bad7c3ac981list1" data-lines="1" class="cherry-list__default"><li>出于浏览器安全策略的考虑，请务必在 top frame 下使用会话组件，不要在 iframe 里面使用，否则会出现登录态异常的状况；</li></ul><h3 id="22-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" data-sign="f2a9c7a37382219ea60da8a4559ef84e" data-lines="2"><a class="anchor" href="#22-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"></a>2.2 准备工作</h3><ul data-sign="008e94e49c7b2eece5a17a09a2050f94list4" data-lines="4" class="cherry-list__default"><li>准备好一个<a href="#53575" rel="nofollow">自建应用</a>或者<a href="#53518" rel="nofollow">第三方应用或代开发应用</a>（企业需授权“使用会话展示组件”权限），应用保证 <a href="https://developer.work.weixin.qq.com/document/path/94325#90002/90144/94325" rel="nofollow">agentConfig</a> 签名可以正常工作；</li><li>在<strong>非企业微信内置浏览器</strong>中使用时，页面需要使用 <a href="https://developer.work.weixin.qq.com/document/path/98152" rel="nofollow">Web 登录组件</a>进行登录，必须使用企业微信登录组件方式（非构造登录链接），且使用会话展示组件的域名必须与嵌入 Web 登录组件的域名完全一致；</li><li>前端项目引入 sdk：<a href="https://www.npmjs.com/package/@wecom/jssdk" rel="nofollow">@wecom/jssdk</a>；</li><li>页面 html 引入：<a href="https://open.work.weixin.qq.com/wwopen/js/jwxwork-1.0.0.js" rel="nofollow">https://open.work.weixin.qq.com/wwopen/js/jwxwork-1.0.0.js</a></li></ul><h3 id="23-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8" data-sign="5d207831e32ec455e09b5e3d0c44fed3" data-lines="2"><a class="anchor" href="#23-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8"></a>2.3 开始使用</h3><p data-sign="79b318f8b69346383a5098f35166a220" data-type="p" data-lines="2">在初始化阶段，页面需要调用 <code>@wecom/jssdk</code> 提供的 <a href="#46258" rel="nofollow">ww.register</a> 接口初始化应用信息：</p><div data-sign="4a288103fab055e6354fe89f25b5e09d" data-type="codeBlock" data-lines="14">
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line">ww<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">  corpId<span class="token punctuation">,</span> <span class="token comment">// 必填，企业微信的corpid，必须与当前登录的企业一致</span></span>
<span class="code-line">  agentId<span class="token punctuation">,</span> <span class="token comment">// 必填，自建应用id 或 企业授权了第三方应用或代开发应用后的应用id （e.g. 1000247）</span></span>
<span class="code-line">  jsApiList<span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token keyword">async</span> <span class="token function">getAgentConfigSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token comment">// 获取并返回 agentConfig 签名信息</span></span>
<span class="code-line">  <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token comment">// 会话组件需要确保 WWOpenData 初始化成功</span></span>
<span class="code-line"><span class="token keyword">await</span> ww<span class="token punctuation">.</span><span class="token function">initOpenData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="767ab3423f418c0a3518510985fc38c3" data-type="p" data-lines="2">其中 jsApiList 需要在页面现有 JSAPI 列表的基础上增加 <code>wwapp.invokeJsApiByCallInfo</code>：</p><div data-sign="0dce506ca4f7424ce72963dc4731060d" data-type="codeBlock" data-lines="8">
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line">jsApiList <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="code-line">  <span class="token string">'selectExternalContact'</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">'shareAppMessage'</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">'wwapp.invokeJsApiByCallInfo'</span> <span class="token comment">// &lt;- Add this</span></span>
<span class="code-line"><span class="token punctuation">]</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="056cf3222dbc9b56b2a29c4dc4490be6" data-type="p" data-lines="2">初始化完成后，创建“展示组件工厂”对象备用：</p><div data-sign="c76f8d9dfff9233f09e0901a3aded9df" data-type="codeBlock" data-lines="4">
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line"><span class="token keyword">const</span> factory <span class="token operator">=</span> ww<span class="token punctuation">.</span><span class="token function">createOpenDataFrameFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="ac2effdfa194789f329a6112c7944146" data-type="p" data-lines="2">在需要展示会话记录数据时，调用 <code>factory.createOpenDataFrame</code> 函数创建展示组件：</p><div data-sign="a940d8bc803c7880b4f54dd15047e548" data-type="codeBlock" data-lines="45">
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line"><span class="token keyword">const</span> msgList <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="code-line">  <span class="token punctuation">{</span></span>
<span class="code-line">    msgid<span class="token punctuation">,</span>    <span class="token comment">// 消息 ID</span></span>
<span class="code-line">    secretKey <span class="token comment">// 消息密钥</span></span>
<span class="code-line">  <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">]</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token keyword">const</span> instance <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createOpenDataFrame</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">  el<span class="token operator">:</span> containerElement<span class="token punctuation">,</span> <span class="token comment">// “容器”元素，用于挂载展示组件</span></span>
<span class="code-line">  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">    &lt;view</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      wx:for="{{data.msgList}}"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      wx:key="msgid"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      class="msg"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      data-index="{{index}}"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      bindclick="handleClickEvent"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">    &gt;</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      &lt;ww-open-message</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">        message-id="{{item.msgid}}"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">        secret-key="{{item.secretKey}}"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">        open-type="viewMessage"</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      /&gt;</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">    &lt;/view&gt;</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="code-line">  style<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">    .msg {</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      height: 100%;</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">      overflow: auto;</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">    }</span></span></span>
<span class="code-line"><span class="token template-string"><span class="token string">  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="code-line">  data<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">    msgList</span>
<span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">  methods<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token function">handleClickEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">      <span class="token comment">// 响应消息点击事件</span></span>
<span class="code-line">      instance<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">        msgList<span class="token operator">:</span> newMsgList</span>
<span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="code-line">    <span class="token punctuation">}</span></span>
<span class="code-line">  <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="a3d5db169301de895d805492cf306b35" data-type="p" data-lines="2">组件会在容器元素内展示指定的消息数据。</p><h2 id="3-api-%E8%AF%B4%E6%98%8E" data-sign="af7d46813f1538ff92e6cdc67c659879" data-lines="2"><a class="anchor" href="#3-api-%E8%AF%B4%E6%98%8E"></a>3. API 说明</h2><h3 id="31-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E" data-sign="d42ff85ec713f7f52f0401e2cd1c1887" data-lines="2"><a class="anchor" href="#31-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"></a>3.1 参数说明</h3><h4 id="el-htmlelement-string" data-sign="38cc9dd0b5c9643677ee24a5188fd859" data-lines="2"><a class="anchor" href="#el-htmlelement-string"></a><strong>el?: HTMLElement | string</strong></h4><p data-sign="df87be3c3addacd459dc7849a8298cbd" data-type="p" data-lines="2">组件容器，可以是实际的 DOM 元素或 CSS 选择器字符串。</p><h4 id="data-unknown" data-sign="8e0fe24cc1668bad71fa174455c27971" data-lines="2"><a class="anchor" href="#data-unknown"></a><strong>data?: unknown</strong></h4><p data-sign="2146e869bd1ad578fa65b9789eefe3ad" data-type="p" data-lines="2">组件自定义数据，可以在模板中访问。</p><h4 id="template-string" data-sign="d94836993540fbd40d1e7b33497d4007" data-lines="2"><a class="anchor" href="#template-string"></a><strong>template: string</strong></h4><p data-sign="400f013f177d134fddd61ac090c4c97a" data-type="p" data-lines="2">组件模板，用于自定义组件内的展示内容。语法参考 <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/" rel="nofollow">WXML</a>。目前支持以下组件：</p><ul data-sign="de60d4a50808c1317682ca9ef2476217list13" data-lines="13" class="cherry-list__default"><li>block</li><li>view</li><li>scroll-view</li><li>span</li><li>image</li><li>checkbox</li><li>ww-open-data</li><li>ww-open-message</li><li>ww-open-button</li><li>ww-open-result-link</li><li>ww-open-result-text</li><li>ww-suspense</li><li>ww-open-data-export-button</li></ul><h4 id="style-string" data-sign="ae5ccd689438acc6c7a182cffae80be5" data-lines="2"><a class="anchor" href="#style-string"></a><strong>style?: string</strong></h4><p data-sign="616a1dc24875ab094e1d59e90f3e493a" data-type="p" data-lines="2">组件模板样式表，语法是 CSS 的子集，目前仅支持以下语法：</p><ul data-sign="8684a7dddc96499cff715e68f5ba84c4list8" data-lines="8" class="cherry-list__default"><li>Class Selector</li><li>Pseudo</li><li><code>@media</code></li><li><code>@supports</code></li><li><code>@font-face</code></li><li><code>@page</code></li><li><code>@keyframes</code></li><li><code>@counter-style</code></li></ul><p data-sign="7efe127ae57f2268243a67082e07d086" data-type="p" data-lines="1"><strong>其他限制</strong></p><ul data-sign="71e18a4fc8c7e15284f5e103a9d2301dlist2" data-lines="2" class="cherry-list__default"><li>以 <code>ww-</code> 开头的类名为企业微信预留，无法修改样式</li><li>一个选择器组内需要至少包含一个类选择器，如 <code>span.example</code></li></ul><h3 id="32-%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95" data-sign="6d3ad2ac1d9875c8008eebc897550a64" data-lines="2"><a class="anchor" href="#32-%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95"></a>3.2 回调方法</h3><h4 id="errorerror-unknown" data-sign="31a3c757197889f2821df0408e3b90f6" data-lines="2"><a class="anchor" href="#errorerror-unknown"></a><strong>error(error: unknown)</strong></h4><p data-sign="1a1ad687fd46a796377d56b32b0dacc3" data-type="p" data-lines="2">错误回调。</p><h4 id="handlemodalevent-modalurl-modalsize-boolean-promiseltbooleangt" data-sign="bca2f828f77cb223d3bdfb9f0aa832c8" data-lines="2"><a class="anchor" href="#handlemodalevent-modalurl-modalsize-boolean-promiseltbooleangt"></a><strong>handleModal(event: { modalUrl, modalSize }): boolean | Promise&lt;boolean&gt;</strong></h4><p data-sign="0a2bb99f07840b4e750c7c46b21b0f02" data-type="p" data-lines="2">调起模态框回调，当用户点击需要预览的消息时触发。开发者可以根据场景手动创建预览 iframe 展示消息内容。</p><p data-sign="439399b896ab7934f9761dee526fdc39" data-type="p" data-lines="2">在企业微信内置浏览器环境下，展示组件默认会打开新窗口展示消息内容。</p><p data-sign="5477f16037a9e95ffb1ce412685a5e6b" data-type="p" data-lines="2"><strong>参数</strong></p><ul data-sign="f83ee1264dd17ffac7834afd2c7369d8list5" data-lines="5" class="cherry-list__default"><li><strong>modalUrl: string</strong><br>预览 URL，在 iframe 中加载可以展示预览内容。</li><li><strong>modalSize?: { width: number; height: number;  }</strong><br><span style="color:#ff0000">@wecom/jssdk 版本要求：2.2.5 及以上版本。</span><br>预览窗口的建议尺寸，映射的是点击预览内容的原始尺寸，开发者可以根据用户点击的不同内容动态配置预览窗口的大小。</li></ul><p data-sign="e82adf7416542eed5adcd0c893f3f1a5" data-type="p" data-lines="1"><strong>返回</strong></p><p data-sign="97d0c2200fd036ec07b84a0971ca5809" data-type="p" data-lines="2">当返回 <code>false</code> 时表示阻止展示组件处理预览事件。</p><p data-sign="e3100a8b38cad50eaf39717db1b861f6" data-type="p" data-lines="2"><strong>示例代码</strong></p><div data-sign="d0b5a874aa63d0a94de81d6f9918a21b" data-type="codeBlock" data-lines="17">
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line"><span class="token comment">/**</span></span>
<span class="code-line"><span class="token comment"> * 创建 modal iframe、设置 src 并添加到 document.body</span></span>
<span class="code-line"><span class="token comment"> */</span></span>
<span class="code-line"><span class="token function">handleModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> modalUrl<span class="token punctuation">,</span> modalSize <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">  <span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span></span>
<span class="code-line">  iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> modalUrl</span>
<span class="code-line">  iframe<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'modal'</span></span>
<span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>modalSize<span class="token operator">?.</span>width <span class="token operator">&amp;&amp;</span> modalSize<span class="token operator">?.</span>height<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token comment">// 按需动态设置预览窗口的大小</span></span>
<span class="code-line">    iframe<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span></span>
<span class="code-line">    iframe<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span></span>
<span class="code-line">  <span class="token punctuation">}</span></span>
<span class="code-line">  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h4 id="handlemounted-void" data-sign="834a3fa7e382c58ac2feb2ffcdd78b89" data-lines="2"><a class="anchor" href="#handlemounted-void"></a><strong>handleMounted(): void</strong></h4><p data-sign="e49e32733b552b18dde2ab3b7f5b93f8" data-type="p" data-lines="1">视图挂载成功后的回调。</p><h4 id="handleupdated-void" data-sign="152cec7f31ff1e604f6d17bd723227ef" data-lines="2"><a class="anchor" href="#handleupdated-void"></a><strong>handleUpdated(): void</strong></h4><p data-sign="dffa0c50502d9a9eb3bdcd297500e7ad" data-type="p" data-lines="1">视图更新成功后的回调。</p><h3 id="33-%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95" data-sign="aa5d05d26c188ee41f1dd769cf57ccbb" data-lines="2"><a class="anchor" href="#33-%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95"></a>3.3 组件方法</h3><h4 id="setdatadata-unknown" data-sign="e164fcabf44a3818d74a7fd21c3b0312" data-lines="2"><a class="anchor" href="#setdatadata-unknown"></a><strong>setData(data: unknown)</strong></h4><p data-sign="65c808ee5db5001dfb590f25a851e179" data-type="p" data-lines="2">更新组件自定义数据，支持通过对象路径设置深层数据：</p><div data-sign="61475ec7ab3d9d91035e8b1be38096db" data-type="codeBlock" data-lines="22">
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line">instance<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">  key<span class="token operator">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">'data.path["computed member"][1]'</span><span class="token operator">:</span> <span class="token string">'deepValue'</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="code-line"><span class="token comment">/**</span></span>
<span class="code-line"><span class="token comment"> * result:</span></span>
<span class="code-line"><span class="token comment"> *</span></span>
<span class="code-line"><span class="token comment"> * {</span></span>
<span class="code-line"><span class="token comment"> *   key: 'value',</span></span>
<span class="code-line"><span class="token comment"> *   data: {</span></span>
<span class="code-line"><span class="token comment"> *     path: {</span></span>
<span class="code-line"><span class="token comment"> *       'computed member': [</span></span>
<span class="code-line"><span class="token comment"> *         ,</span></span>
<span class="code-line"><span class="token comment"> *         'deepValue'</span></span>
<span class="code-line"><span class="token comment"> *       ]</span></span>
<span class="code-line"><span class="token comment"> *     }</span></span>
<span class="code-line"><span class="token comment"> *   }</span></span>
<span class="code-line"><span class="token comment"> * }</span></span>
<span class="code-line"><span class="token comment"> */</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h3 id="34-%E5%8A%9F%E8%83%BD%E6%A0%87%E7%AD%BE" data-sign="e102d89e73c1bccb0aa453e7f1576141" data-lines="2"><a class="anchor" href="#34-%E5%8A%9F%E8%83%BD%E6%A0%87%E7%AD%BE"></a>3.4 功能标签</h3><h4 id="scroll-view" data-sign="05c702bf12858938bec9f53d9acb2419" data-lines="2"><a class="anchor" href="#scroll-view"></a><strong>scroll-view</strong></h4><p data-sign="9a8b7739fbd361d6a1f390708302d86c" data-type="p" data-lines="2">可滚动视图区域。可以通过 <a href="#ScrollViewContext" rel="nofollow">ScrollViewContext</a> 操作滚动条。</p><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="7ab2dea1c6a299e6354b2ff62d29f14e" data-lines="9">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>scroll-x</td><td>boolean</td><td>false</td><td>否</td><td>是否允许横向滚动</td></tr><tr><td>scroll-y</td><td>boolean</td><td>false</td><td>否</td><td>是否允许纵向滚动</td></tr><tr><td>upper-threshold</td><td>number</td><td>50</td><td>否</td><td>距顶部/左边多远时（单位px），触发 scrolltoupper 事件</td></tr><tr><td>lower-threshold</td><td>number</td><td>50</td><td>否</td><td>距底部/右边多远时（单位px），触发 scrolltolower 事件</td></tr><tr><td>scroll-top</td><td>number</td><td>0</td><td>否</td><td>设置竖向滚动条位置</td></tr><tr><td>scroll-left</td><td>number</td><td>0</td><td>否</td><td>设置横向滚动条位置</td></tr><tr><td>scroll-with-animation</td><td>boolean</td><td>false</td><td>否</td><td>在设置滚动条位置时使用动画过渡</td></tr></tbody></table></div><p data-sign="f472a69254863c676ba2dbf313fc67af" data-type="p" data-lines="1"><strong>事件说明</strong></p><div class="cherry-table-container" data-sign="afc7823dd228863e27798e324fadfd6e" data-lines="5">
        <table class="cherry-table"><thead><tr><th>事件名称</th><th>说明</th><th>event.detail</th></tr></thead><tbody><tr><td>bindscrolltoupper</td><td>滚动到顶部/左边时触发</td><td></td></tr><tr><td>bindscrolltolower</td><td>滚动到底部/右边时触发</td><td></td></tr><tr><td>bindscroll</td><td>滚动时触发</td><td>{ scrollTop, scrollLeft, scrollHeight, scrollWidth }</td></tr></tbody></table></div><p data-sign="cd6440db9e2caa7a046be6043bf9a3a7" data-type="p" data-lines="2"><strong>模板示例</strong></p><div data-sign="f785a0c69b1b7a3dba256d5de0d8f36c" data-type="codeBlock" data-lines="14">
      <pre class="language-html"><code class="language-html wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span></span></span>
<span class="code-line"><span class="token tag">  <span class="token attr-name">scroll-y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{true}}<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag">  <span class="token attr-name">scroll-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{data.scrollTop}}<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag">  <span class="token attr-name">scroll-with-animation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{true}}<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag">  <span class="token attr-name">bindscrolltoupper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onScrollUpper<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag">  <span class="token attr-name">bindscrolltolower</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onScrollLower<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag">  <span class="token attr-name">bindscroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onScroll<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag"><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>员工列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  ...</span>
<span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 id="ww-media-preview-group" data-sign="c4ddf820032cd0d5a3b9ee57d5dcf3c2" data-lines="1"><a class="anchor" href="#ww-media-preview-group"></a><strong>ww-media-preview-group</strong></h4><p data-sign="73cea2e89076bb027f08495f1a130052" data-type="p" data-lines="4">用于预览多媒体（图片、视频）的前后翻页预览功能。<br>开发者可以用该组件包裹多个 <code>ww-open-message</code> 组件，实现多媒体的前后翻页预览功能。<br>如果被包裹的 <code>ww-open-message</code> 组件的内容不是<strong>图片</strong>、<strong>视频</strong>，不会产生任何影响。</p><p data-sign="8e1b4aa413c72e92b73ae95d05c85d0e" data-type="p" data-lines="2">如果开发者想自定义翻页顺序，可以通过设置 <code>ww-open-message</code> 的 <code>preview-index</code> 属性来指定预览顺序。</p><p data-sign="cd6440db9e2caa7a046be6043bf9a3a7" data-type="p" data-lines="1"><strong>模板示例</strong></p><div data-sign="7505caedbba98374742e49ce2cc401e3" data-type="codeBlock" data-lines="16">
      <pre class="language-html"><code class="language-html wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  <span class="token comment">&lt;!-- 第一组 --&gt;</span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-media-preview-group</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">1</span> <span class="token attr-name">xxx</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">2</span> <span class="token attr-name">xxx</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">3</span> <span class="token attr-name">xxx</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ww-media-preview-group</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  <span class="token comment">&lt;!-- 第二组 --&gt;</span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-media-preview-group</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">4</span> <span class="token attr-name">xxx</span> <span class="token attr-name">preview-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">5</span> <span class="token attr-name">xxx</span> <span class="token attr-name">preview-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">6</span> <span class="token attr-name">xxx</span> <span class="token attr-name">preview-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ww-media-preview-group</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="1e5776b702bc86e52a25b5d2f26d6b61" data-type="p" data-lines="1">以上述代码为例，如果用户点击第一组的任意一个消息，预览窗口可以查看的内容为 1、2、3，用户可以通过左右滑动（移动端）或者 点击左右箭头按钮（桌面端）切换预览内容。</p><p data-sign="4bc880fee2806e90ce5e0c8321037635" data-type="p" data-lines="2">第一组的预览顺序为 1 -&gt; 2 -&gt; 3，第二组的预览顺序为 6 -&gt; 5 -&gt; 4。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h3 id="35-%E6%A8%A1%E6%9D%BF%E7%BB%84%E4%BB%B6" data-sign="beec3963186681a4f595f339b5c39147" data-lines="1"><a class="anchor" href="#35-%E6%A8%A1%E6%9D%BF%E7%BB%84%E4%BB%B6"></a>3.5 模板组件</h3><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 id="code30aab2d738e26e02df148278c51d0c09" data-sign="af46c4f3b318c5034125d03ad72f6ab6" data-lines="1"><a class="anchor" href="#code30aab2d738e26e02df148278c51d0c09"></a><strong><code>ww-open-data</code></strong></h4><p data-sign="059582f60351454bd4a2b74e579c6558" data-type="p" data-lines="2">展示单个名称。</p><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="d56cf942147352ca35e0b758bdb7c3e0" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>string</td><td></td><td>是</td><td>名称类型，可选值：userName，chatName</td></tr><tr><td>openid</td><td>string</td><td></td><td>是</td><td>名称对应的 id，当 type 为 userName 时，对应 openUserid；当 type 为 chatName 时，对应 chatid</td></tr></tbody></table></div><p data-sign="db5f69c391fba3fdbfe4a51f76173953" data-type="p" data-lines="1">更多 type 与 openid 组合，详情参考下表：</p><div class="cherry-table-container" data-sign="347c3335cda4ce2e410f5373b48dd039" data-lines="7">
        <table class="cherry-table"><thead><tr><th>type</th><th>openid</th><th>说明</th></tr></thead><tbody><tr><td>userName</td><td>openUserid</td><td>企业用户名称</td></tr><tr><td>userAvatar</td><td>openUserid</td><td>企业用户头像</td></tr><tr><td>externalUserName</td><td>若是企业客户填：externalUserId <br>若是客户群的外部成员填：chatid/externalUserId，例如：wraaaabbbb/wmccccdddd；若当前企业为K12教育行业，externalUserId在家校通讯录中，则会转译为家长或者学生的名称。若非家长或者学生，则展示“非学校家长”</td><td>客户名称。若员工对客户有设置备注名，则展示“备注名(名称）”；若名称和备注名一致时仅展示“备注名”；多个员工给客户有备注的，展示最早添加的员工给客户的备注</td></tr><tr><td>externalUserAvatar</td><td>若是企业客户填：externalUserId <br>若是客户群的外部成员填：chatid/externalUserId，例如：wraaaabbbb/wmccccdddd；若当前企业为K12教育行业，externalUserId在家校通讯录中，则会转译为家长或者学生的头像。</td><td>客户头像</td></tr><tr><td>chatName</td><td>chatid</td><td>内部群或客户群名</td></tr></tbody></table></div><p data-sign="a491c69313a4a44f77d13df86f699523" data-type="p" data-lines="1"><strong>自定义头像样式</strong></p><div data-sign="a19956f231f95fdc0c2c5f78b7aef436" data-type="codeBlock" data-lines="3">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>ww<span class="token operator">-</span>open<span class="token operator">-</span>data type<span class="token operator">=</span><span class="token string">"userAvatar"</span> id<span class="token operator">=</span><span class="token string">"test"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"user-avatar"</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div data-sign="2fb4ca6988410ce8001264254802645b" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">.</span>user<span class="token operator">-</span>avatar <span class="token punctuation">{</span></span>
<span class="code-line">	width<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span></span>
<span class="code-line">	height<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span></span>
<span class="code-line">	border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">4</span>px<span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h4 id="codecce235e7bfd55b7770279ae83e7fd8d9" data-sign="c4f9a5796e530d5a6e51f21c636656b2" data-lines="2"><a class="anchor" href="#codecce235e7bfd55b7770279ae83e7fd8d9"></a><strong><code>ww-open-message</code></strong></h4><p data-sign="3114272caca6be97fbd218429e3ab89d" data-type="p" data-lines="2">展示会话消息内容。</p><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div data-sign="9ea5bbaaeaa9de5261644c686a99f446" data-lines="8" class="cherry-table-container">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>message-id</td><td>string</td><td></td><td>是</td><td>消息 ID</td></tr><tr><td>secret-key</td><td>string</td><td></td><td>是</td><td>消息密钥，对会话记录中的 encrypted_secretkey 字段进行解密得到，参考 <a href="#51799" rel="nofollow">encrypt_secretkey 解密方式</a></td></tr><tr><td>highlight-text</td><td>string</td><td></td><td>否</td><td>需要高亮的文本，文本会由企业微信后台进行智能分词处理</td></tr><tr><td>static-highlight-text-list</td><td>string[]</td><td></td><td>否</td><td>需要高亮的静态文本列表，不会进行智能分词处理，如果存在 <code>highlight-text</code>，最终高亮表现以 <code>hightlight-text</code> 为准</td></tr><tr><td>highlight-color</td><td>string</td><td></td><td>否</td><td>高亮文本的 <code>color</code>，用于自定义高亮文本的字体颜色, e.g. <code>#267EF0</code></td></tr><tr><td>display-type</td><td>string</td><td><code>"normal"</code></td><td>否</td><td>指定组件的显示模式，默认为 <code>"normal"</code>；如果指定为 <code>"text"</code>，组件将会以文本总结的形式展示会话内容，同时组件的 <code>class</code> 可以对文本的颜色、字体大小等文本相关样式进行自定义处理</td></tr></tbody></table></div><p data-sign="e96e3e7652babf4ff02a15a06286c783" data-type="p" data-lines="2"><strong>open-type</strong></p><div class="cherry-table-container" data-sign="88d716869b476fff2fe16419d60f826e" data-lines="3">
        <table class="cherry-table"><thead><tr><th>open-type</th><th>说明</th></tr></thead><tbody><tr><td>viewMessage</td><td>当用户点击消息时，打开新窗口预览消息内容</td></tr></tbody></table></div><p data-sign="8c14731b15cb5c5e6a16c30992d70bc9" data-type="p" data-lines="1"><strong>支持高亮文本的消息类型</strong></p><ul data-sign="f10b65cbe667f67c79c880d7dcdc5385list6" data-lines="6" class="cherry-list__default"><li>文本消息</li><li>链接消息 - 标题</li><li>小程序消息 - 标题</li><li>在线文档消息 - 文档名称</li><li>微盘文件消息 - 文件名称</li><li>混合消息 - 文本部分</li></ul><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 id="codec9e6905f2e10c31acbbc7cf507c88c7e" data-sign="77b42346de97239bd6a5cfb6c385270c" data-lines="1"><a class="anchor" href="#codec9e6905f2e10c31acbbc7cf507c88c7e"></a><strong><code>ww-open-button</code></strong></h4><p data-sign="7d4676eed29729438cf58aafa177371d" data-type="p" data-lines="1">业务授权按钮。</p><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="96ab665d884bd0e4430972651ac1aa5b" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>open-type</td><td>string</td><td></td><td>是</td><td>业务类型：<code>getExportCode</code></td></tr></tbody></table></div><p data-sign="f472a69254863c676ba2dbf313fc67af" data-type="p" data-lines="1"><strong>事件说明</strong></p><div class="cherry-table-container" data-sign="75e1ccc0802427035a1112639993edbe" data-lines="3">
        <table class="cherry-table"><thead><tr><th>事件名称</th><th>说明</th><th>event.detail</th></tr></thead><tbody><tr><td>bindgetexportcode</td><td>open-type 为 <code>getExportCode</code> 时，用户点击后，会触发回调</td><td><code>{ exportCode }</code></td></tr></tbody></table></div><p data-sign="e3100a8b38cad50eaf39717db1b861f6" data-type="p" data-lines="1"><strong>示例代码</strong></p><div data-sign="38cdec7a06d5d1eab036055aae881370" data-type="codeBlock" data-lines="3">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>ww<span class="token operator">-</span>open<span class="token operator">-</span>button open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">"getExportCode"</span> bindgetexportcode<span class="token operator">=</span><span class="token string">"onExportCodeReady"</span><span class="token operator">&gt;</span>点击授权<span class="token operator">&lt;</span><span class="token operator">/</span>ww<span class="token operator">-</span>open<span class="token operator">-</span>button<span class="token operator">&gt;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div data-sign="e1d59f6aa383a05c247f0ef9b8f7f2e2" data-type="codeBlock" data-lines="6">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token function">onExportCodeReady</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>exportCode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 id="code9defa16f748acb402ad33bfa6dcacff6" data-sign="c70b9e90c8900b9a28f9ee31f4cd659e" data-lines="1"><a class="anchor" href="#code9defa16f748acb402ad33bfa6dcacff6"></a><strong><code>ww-open-result-link</code></strong></h4><p data-sign="c556d1724921c315a84bd9d72ca5680d" data-type="p" data-lines="2">以链接形式展示异步任务结果。</p><div class="cherry-table-container" data-sign="23f11fba31848cafaad8cc24a49933a1" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>result-id</td><td>string</td><td></td><td>是</td><td>异步任务结果 ID</td></tr><tr><td>message-id</td><td>string</td><td></td><td>是</td><td>消息密钥（与 result 结果相关的任一消息）</td></tr><tr><td>secret-key</td><td>string</td><td></td><td>是</td><td>消息密钥（与 message-id 配对一致的 secret-key）</td></tr></tbody></table></div><h4 id="code8630c7fb8ebbe45710c8f536b6e7fb1c" data-sign="10120419a74e88ff3d02803cb2c141af" data-lines="2"><a class="anchor" href="#code8630c7fb8ebbe45710c8f536b6e7fb1c"></a><strong><code>ww-open-result-text</code></strong></h4><p data-sign="bca4b428104d9389180dbb45ae06d5cf" data-type="p" data-lines="1">以文本形式展示异步任务结果。</p><div class="cherry-table-container" data-sign="17287dacac4aee9fd86f5b1a4e5eccad" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>result-id</td><td>string</td><td></td><td>是</td><td>异步任务结果 ID</td></tr><tr><td>secret-key</td><td>string</td><td></td><td>是</td><td>异步任务结果解密 key</td></tr><tr><td>encrypt-info（已废弃，后续不再使用）</td><td>object</td><td></td><td>否</td><td>异步任务结果解密信息</td></tr></tbody></table></div><p data-sign="90a1f4fb672d722230f6894a67754302" data-type="p" data-lines="1"><strong>encrypt-info</strong> @deprecated</p><div data-sign="a3f6a3efc6e8c5d2a9a198dd405831e3" data-type="codeBlock" data-lines="5">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"secret_key"</span><span class="token operator">:</span> <span class="token string">""</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 id="codea2daddf89562feeacfacea8b2f8c1cb3" data-sign="ab7ba1bc8841874bf810ae7244962810" data-lines="1"><a class="anchor" href="#codea2daddf89562feeacfacea8b2f8c1cb3"></a><strong><code>ww-suspense</code></strong></h4><p data-sign="b2e4d5fec879b5897e64f73b5e0a4008" data-type="p" data-lines="2">用于 <code>ww-open-data</code>、<code>ww-open-message</code>、<code>ww-open-result-link</code>、<code>ww-open-result-text</code> 在加载数据过程中，提供 fallback 渲染的能力。与 React 的 <code>Suspense</code> 功能类似。</p><p data-sign="e3100a8b38cad50eaf39717db1b861f6" data-type="p" data-lines="2"><strong>示例代码</strong></p><div data-sign="32373494474e8d99646d7de7f66ac55a" data-type="codeBlock" data-lines="9">
      <pre class="language-html"><code class="language-html wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-suspense</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">message-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{data.msgid}}<span class="token punctuation">"</span></span> <span class="token attr-name">secret-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{data.secret_key}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fallback<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msgCnt-fallback<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>消息内容正在加载...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span></span>
<span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ww-suspense</span><span class="token punctuation">&gt;</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h4 id="codee13112a99ed55ad5c254989ebd09df42" data-sign="2a79684e03643a1df1a1dc4ecbf2dd0b" data-lines="2"><a class="anchor" href="#codee13112a99ed55ad5c254989ebd09df42"></a><strong><code>ww-open-data-export-button</code></strong></h4><p data-sign="aa46a62fff905b7a3c1d45e880ba9e21" data-type="p" data-lines="2">导出 包含人名部门名的文件。</p><p data-sign="baa5a47060c3a38754e9aaed988e0290" data-type="p" data-lines="2">关于文件下载 url：先调用“<a href="#17813" rel="nofollow">异步通讯录id转译</a>”接口提交转译任务，然后通过“<a href="#18011" rel="nofollow">获取异步任务结果</a>”获取最终下载文件的url，注意该url仅能在有用户登录态的浏览器打开以下载文件，详情参见“<a href="#90001/90143/91845" rel="nofollow">通讯录ID转译</a>”。</p><p data-sign="031eff738a1840a4706f76f2a92ee34d" data-type="p" data-lines="2"><span style="color:#ff0000">@wecom/jssdk 版本要求：2.1.0 及以上版本。</span></p><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="c565447593b3b42f2ace5cf4c89b017f" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>href</td><td>string</td><td></td><td>是</td><td>文件下载 url</td></tr></tbody></table></div><p data-sign="cd6440db9e2caa7a046be6043bf9a3a7" data-type="p" data-lines="1"><strong>模板示例</strong></p><div data-sign="151d09a8001fae0924dfe5648c56ea0d" data-type="codeBlock" data-lines="9">
      <pre class="language-html"><code class="language-html wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-data-export-button</span></span></span>
<span class="code-line"><span class="token tag">	<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>export-button<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag">	<span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{data.fileUrl}}<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag">	<span class="token attr-name">binderror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onExportError<span class="token punctuation">"</span></span></span></span>
<span class="code-line"><span class="token tag"><span class="token punctuation">&gt;</span></span></span>
<span class="code-line">	点击下载文件</span>
<span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ww-open-data-export-button</span><span class="token punctuation">&gt;</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h3 id="36-%E6%A8%A1%E6%9D%BF%E7%BB%84%E4%BB%B6%E9%94%99%E8%AF%AF%E4%BA%8B%E4%BB%B6" data-sign="2df6e25c959829d73e28e1d00893b0ae" data-lines="2"><a class="anchor" href="#36-%E6%A8%A1%E6%9D%BF%E7%BB%84%E4%BB%B6%E9%94%99%E8%AF%AF%E4%BA%8B%E4%BB%B6"></a>3.6 模板组件错误事件</h3><p data-sign="414fad090c3f12fa947891c98674c620" data-type="p" data-lines="2">模板组件有统一的错误事件回调方式 <code>binderror</code>，通过监听错误事件，开发者可以判断组件的工作状态。</p><p data-sign="e3100a8b38cad50eaf39717db1b861f6" data-type="p" data-lines="2"><strong>示例代码</strong></p><div data-sign="20518689efe186b8ed32a7412f83777d" data-type="codeBlock" data-lines="4">
      <pre class="language-html"><code class="language-html wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ww-open-message</span> <span class="token attr-name">message-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{item.msgid}}<span class="token punctuation">"</span></span> <span class="token attr-name">secret-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{item.encrypt_info.secret_key}}<span class="token punctuation">"</span></span> <span class="token attr-name">binderror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onOpenMsgError<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div data-sign="5cdc61e82c53110fbfb78c0fad6e21d0" data-type="codeBlock" data-lines="11">
      <pre class="language-js"><code class="language-js wrap"><span class="code-line">factory<span class="token punctuation">.</span><span class="token function">createOpenDataFrame</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token operator">...</span></span>
<span class="code-line">	methods<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token operator">...</span></span>
<span class="code-line">		<span class="token function">onOpenMsgError</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">			console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'open message error: '</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h3 id="37-context" data-sign="c477a46fb991a95c607456e46f325be5" data-lines="1"><a class="anchor" href="#37-context"></a>3.7 Context</h3><h4 id="scrollviewcontext" data-sign="e7a84bf29593216fdae76b04148d3000" data-lines="2"><a class="anchor" href="#scrollviewcontext"></a><strong>ScrollViewContext</strong></h4><p data-sign="923a489f30cca1785b48df596c1bd0b2" data-type="p" data-lines="2">增强 scroll-view 实例，可以通过 <code>ww.createScrollViewContext</code> 接口获取。</p><p data-sign="e70d332bedbc55c93172ac11426f4e8a" data-type="p" data-lines="2"><strong>方法</strong></p><p data-sign="d6e732a5d97d56915eb3fe5f56d1b63f" data-type="p" data-lines="2"><strong>ScrollViewContext.scrollTo(options: { top?: number; left?: number })</strong></p><p data-sign="e4551d8886dc6311285136ce59a8be4a" data-type="p" data-lines="2">滚动至指定位置。</p><p data-sign="e14077bd202eee9c62e4cb761cd37a04" data-type="p" data-lines="4"><strong><code>options</code> 参数说明：</strong><br><code>top</code>：垂直位置，单位：像素；<br><code>left</code>：水平位置，单位：像素；</p><p data-sign="1b73ad8b6c65c65dac732dff4a5253e0" data-type="p" data-lines="2"><strong>ScrollViewContext.scrollIntoView(selector: string, options?: { block?: string; inline?: string })</strong></p><p data-sign="e4551d8886dc6311285136ce59a8be4a" data-type="p" data-lines="2">滚动至指定位置。</p><p data-sign="5202096f8e3cee0dc194d9a9b9d60068" data-type="p" data-lines="4"><strong><code>options</code> 参数说明：</strong><br><code>block</code>：定义垂直方向的对齐，可选值有：<code>start</code> | <code>center</code> | <code>end</code> | <code>nearest</code>；<br><code>inline</code>：定义水平方向的对齐，可选值有：<code>start</code> | <code>center</code> | <code>end</code> | <code>nearest</code>；</p><p data-sign="e3100a8b38cad50eaf39717db1b861f6" data-type="p" data-lines="2"><strong>示例代码</strong></p><div data-sign="4e677b489106b6d3fec0ce71aeef247b" data-type="codeBlock" data-lines="4">
      <pre class="language-html"><code class="language-html wrap"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>refName<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div data-sign="55948221072d36babe88577fd7b5d554" data-type="codeBlock" data-lines="6">
      <pre class="language-ts"><code class="language-ts wrap"><span class="code-line"><span class="token keyword">const</span> scrollViewContext <span class="token operator">=</span> <span class="token keyword">await</span> ww<span class="token punctuation">.</span><span class="token function">createScrollViewContext</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> <span class="token string">'refName'</span><span class="token punctuation">)</span></span>
<span class="code-line"></span>
<span class="code-line">scrollViewContext<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> top<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h2 id="3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" data-sign="70b4fbc5c2c4d40e16c7fa33d667b2a3" data-lines="2"><a class="anchor" href="#3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"></a>3. 错误处理</h2><h3 id="%E7%99%BB%E5%BD%95%E6%80%81%E8%BF%87%E6%9C%9F%E6%88%96%E8%80%85%E5%BC%82%E5%B8%B8" data-sign="96f58e866d5650d8aa3a0a0d60aa67a3" data-lines="2"><a class="anchor" href="#%E7%99%BB%E5%BD%95%E6%80%81%E8%BF%87%E6%9C%9F%E6%88%96%E8%80%85%E5%BC%82%E5%B8%B8"></a>登录态过期或者异常</h3><p data-sign="dcc1832fd41dcf7303ab67fa7f009fed" data-type="p" data-lines="1">用户在使用过程中，常见的异常状态为 “当前登录态过期”，此时需要服务商引导用户重新进行扫码登录。</p><p data-sign="77c8d214229ead7bffb4b7914a913bb3" data-type="p" data-lines="2">“登录态异常”的出现时机以及对应特征如下：</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="23058550b6451b73cb0cee9a0f416549" data-type="p" data-lines="1"><strong>使用 <code>ww-xxx</code> 组件过程，登录态失效出错</strong></p><p data-sign="17c4f00221551cdb6b2818a54c1def00" data-type="p" data-lines="2">错误事件会在 <code>ww-xxx</code> 组件的 <code>binderror</code> 回调中返回，有如下错误特征：</p><ul data-sign="55a8afc2f6b98ff0bf4c6fd0a9dc6c81list8" data-lines="8" class="cherry-list__default"><li>组件初始化过程中，判定当前登录态过期，detail.errCode 为 42006：<br><img src="images/100076/ef9af0a2.png" width="180"><br></li><li>组件获取数据时判定登录态过期，detail.errCode 为 42003 或者 40029：<br><img src="images/100076/bd2c2e23.png" width="180"><br></li><li>浏览器判断登录过期后自动删除票据，detail.errMsg 为 “Missing open sid”：<br><img src="images/100076/8e6c55b5.png" width="180"></li></ul><h2 id="4-%E6%8E%A8%E8%8D%90%E7%94%A8%E6%B3%95" data-sign="060a9616fb254ae54c496545f8e607de" data-lines="2"><a class="anchor" href="#4-%E6%8E%A8%E8%8D%90%E7%94%A8%E6%B3%95"></a>4. 推荐用法</h2><h3 id="%E5%88%97%E8%A1%A8%E4%B8%AD%E5%B1%95%E7%A4%BA%E4%BC%9A%E8%AF%9D%E7%BB%84%E4%BB%B6" data-sign="6c2c89d2712e8bf158a59f553395fb7d" data-lines="2"><a class="anchor" href="#%E5%88%97%E8%A1%A8%E4%B8%AD%E5%B1%95%E7%A4%BA%E4%BC%9A%E8%AF%9D%E7%BB%84%E4%BB%B6"></a>列表中展示会话组件</h3><p data-sign="64bbf250c94cad25d969ee9cf7399e5f" data-type="p" data-lines="2">如下图，如果想在列表中渲染会话组件，强烈建议将整个列表放到 OpenDataFrame 里面实现，而不是每一行或者每一个表格都用独立的 OpenDataFrame 展示。</p><p data-sign="b8f2953c77904d5500bf658c3ba747b5" data-type="p" data-lines="2">在列表中进行多个 OpenDataFrame 单独渲染，会增加区域中的白屏时间，同时会触发多次校验请求，若过于频繁，会触发企业微信后台的安全频率限制，导致渲染失败。</p><ul data-sign="b3dd0573f20038db0b703568843f3e9dlist3" data-lines="3" class="cherry-list__default"><li>推荐用法：整个绿框区域使用 OpenDataFrame 实现；</li><li>不推荐用法：红框区域每行数据使用多个 OpenDataFrame 实现；<br><img src="images/100076/ce25c68d.png" alt="enter image description here"></li></ul><h2 id="faq" data-sign="264d9b7cc3602ea606823e3dc373fb92" data-lines="2"><a class="anchor" href="#faq"></a>FAQ</h2><ol data-sign="8a4555188532b758496b355e0dfe912flist2" data-lines="2" class="cherry-list__default" start="1"><li><strong>会话组件 ww-open-message 渲染视频后，在外部浏览器无法点击预览</strong><br>解答：外部浏览器下，如果要在会话组件上点击预览 “图片”、“视频”、“聊天记录详情”，需要服务商开发者通过 <code>handleModal</code> 回调实现预览表现，请仔细参考文档中 <code>handleModal</code> 回调的具体说明。</li></ol><h2 id="%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95" data-sign="12be0b1f3608dcb4a5083b4cfac90f91" data-lines="2"><a class="anchor" href="#%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95"></a>更新记录</h2><h3 id="2024-09-25" data-sign="da19a222789fb649c04fd21668150739" data-lines="1"><a class="anchor" href="#2024-09-25"></a>2024-09-25</h3><ul data-sign="f463999fe459ec6db99b894b09c28831list2" data-lines="2" class="cherry-list__default"><li><code>@wecom/jssdk</code> 更新至 <code>v2.1.0</code></li><li>新增 <code>ww-open-data-export-button</code> 组件以及使用说明</li></ul><h3 id="2024-09-06" data-sign="cbc849d86d94c1b5f3337309d0808ad1" data-lines="2"><a class="anchor" href="#2024-09-06"></a>2024-09-06</h3><ul data-sign="82bae56d1864651e4fc4bbc7b3203ad9list1" data-lines="1" class="cherry-list__default"><li>更新 “登录态失效” 错误事件说明</li></ul><h3 id="2024-05-10" data-sign="e66e565af7946445ca5389ed41764c7a" data-lines="2"><a class="anchor" href="#2024-05-10"></a>2024-05-10</h3><ul data-sign="82bae56d1864651e4fc4bbc7b3203ad9list1" data-lines="1" class="cherry-list__default"><li>更新 “登录态失效” 错误事件说明</li></ul><h3 id="2024-04-24" data-sign="c729ce1aa805bcc41915047075f76632" data-lines="2"><a class="anchor" href="#2024-04-24"></a>2024-04-24</h3><ul data-sign="cef1016598f2ec0caed1c69c8a42cf59list1" data-lines="1" class="cherry-list__default"><li>新增 <code>handleUpdated</code> 回调</li></ul><h3 id="2024-04-01" data-sign="e147d7339d55b1ccfb0239318588a381" data-lines="2"><a class="anchor" href="#2024-04-01"></a>2024-04-01</h3><ul data-sign="74f2845ff11160974fef74a990e9d9a2list3" data-lines="3" class="cherry-list__default"><li><code>@wecom/jssdk</code> 更新至 <code>v1.5.0-beta.6</code></li><li>更新 <code>ScrollViewContext.scrollIntoView</code> 接口说明</li><li>更新 <code>ww-open-data</code> 参数说明</li></ul><h3 id="2024-02-02" data-sign="41ef4aa7c435c9ef1b9e42331edbd61a" data-lines="2"><a class="anchor" href="#2024-02-02"></a>2024-02-02</h3><ul data-sign="e41a856d458450458ffd61d10fea0b27list4" data-lines="4" class="cherry-list__default"><li><code>@wecom/jssdk</code> 更新至 <code>v1.5.0-beta.5</code></li><li>补充 <code>handleMounted</code> 接口</li><li>补充 <code>ww-suspense</code> 说明</li><li>补充 <code>ww-open-result-link</code>、<code>ww-open-result-text</code> 组件说明</li></ul><h3 id="2024-01-09" data-sign="72f9a20cc661dd0ac61727eef7b1a342" data-lines="2"><a class="anchor" href="#2024-01-09"></a>2024-01-09</h3><ul data-sign="eea2d2faebd23d4ddb116790303733f9list3" data-lines="3" class="cherry-list__default"><li><code>@wecom/jssdk</code> 更新至 <code>v1.5.0-beta.4</code></li><li>补充 <code>ScrollViewContext</code> 说明</li><li>补充 API 参数类型说明</li></ul><h3 id="2023-12-27" data-sign="f2ddffcc4594a17bdf055c45a8693365" data-lines="2"><a class="anchor" href="#2023-12-27"></a>2023-12-27</h3><ul data-sign="305e64d96dd4b4049b93344a84d9b764list4" data-lines="4" class="cherry-list__default"><li>更新 <code>@wecom/jssdk</code> 依赖包</li><li>新增 <code>handleModal</code> 回调</li><li>补充 API 参数说明</li><li>补充外部浏览器支持说明</li></ul></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>