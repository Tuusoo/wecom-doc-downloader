<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取文件权限信息 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取文件权限信息
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2023/03/15</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="90ab09212202844a5b3189356b36bc56" data-type="p" data-lines="1">该接口用于获取文件的权限信息。</p><p data-sign="a1f148fe434b1927c652a6e76557ff90" data-type="p" data-lines="3"><strong>请求方式</strong>：POST（<strong>HTTPS</strong>）<br><strong>请求地址</strong>: https://qyapi.weixin.qq.com/cgi-bin/wedrive/get_file_permission?access_token=ACCESS_TOKEN</p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="1"><strong>请求包体</strong></p><div data-sign="9f32ba4614cd601a584b19837131ef47" data-type="codeBlock" data-lines="5">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"fileid"</span><span class="token operator">:</span> <span class="token string">"FILEID"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="2"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="4c1353c3904d2f03c3ca740060c5725c" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>fileid</td><td>string</td><td>是</td><td>文件fileid</td></tr></tbody></table></div><p data-sign="fd1c44250d466f3563712de3fc0f1925" data-type="p" data-lines="1"><strong>权限说明</strong></p><ul data-sign="7d2adec5d518dda75a585f767a61d968list3" data-lines="3" class="cherry-list__default"><li>自建应用需配置到“<a href="#23784" rel="nofollow">可调用应用</a>”列表中的应用secret所获取的accesstoken来调用（<a href="#10013/%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96access_token" rel="nofollow">accesstoken如何获取？</a>）</li><li>第三方应用需具有“微盘”权限</li><li>代开发自建应用需具有“微盘”权限</li></ul><p data-sign="6394de01a40b78c07ec7af6eaecac7f9" data-type="p" data-lines="1"><strong>返回示例</strong></p><div data-sign="22a4283f226d3d22d41b854ac9a42db8" data-type="codeBlock" data-lines="44">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"share_range"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"enable_corp_internal"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"corp_internal_auth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"enable_corp_external"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"corp_external_auth"</span><span class="token operator">:</span> <span class="token number">2</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"secure_setting"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"enable_readonly_copy"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"modify_only_by_admin"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"enable_readonly_comment"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"ban_share_external"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"inherit_father_auth"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"auth_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">            <span class="token punctuation">{</span></span>
<span class="code-line">                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"USERID"</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token property">"auth"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">            <span class="token punctuation">}</span></span>
<span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"inherit"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"file_member_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">        <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"userid"</span><span class="token operator">:</span> <span class="token string">"USERID"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token property">"auth"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"watermark"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"WATERMARK_TEXT"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"margin_type"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"show_visitor_name"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"force_by_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"show_text"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token property">"force_by_space_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="code-line">    <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="00008e9690797eb3369a734424254cd3" data-lines="31">
        <table class="cherry-table"><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>int32</td><td>错误码</td></tr><tr><td>errmsg</td><td>string</td><td>错误码说明</td></tr><tr><td>share_range</td><td>obj</td><td>文件分享设置</td></tr><tr><td>enable_corp_internal</td><td>bool</td><td>是否为企业内可访问</td></tr><tr><td>corp_internal_auth</td><td>uint32</td><td>企业内权限信息<br>普通文档： 1:仅浏览（可下载) 4:仅预览（仅专业版企业可设置）255:无权限或需要审批；如果不填充此字段为保持原有状态<br>微文档： 1:仅浏览（可下载）；如果不填充此字段为保持原有状态</td></tr><tr><td>enable_corp_external</td><td>bool</td><td>是否为企业外可访问</td></tr><tr><td>corp_external_auth</td><td>uint32</td><td>企业外权限信息<br>普通文档： 1:仅浏览（可下载) 4:仅预览（仅专业版企业可设置） 255:无权限或需要审批；如果不填充此字段为保持原有状态<br>微文档： 1:仅浏览（可下载）；如果不填充此字段为保持原有状态</td></tr><tr><td>corp_internal_approve_only_by_admin</td><td>bool</td><td>是否开启企业内管理员审批</td></tr><tr><td>corp_external_approve_only_by_admin</td><td>bool</td><td>是否开启企业外管理员审批</td></tr><tr><td>secure_setting</td><td>obj</td><td>文件安全配置</td></tr><tr><td>enable_readonly_copy</td><td>bool</td><td>是否开启只读备份</td></tr><tr><td>modify_only_by_admin</td><td>bool</td><td>是否只允许管理员进行修改</td></tr><tr><td>enable_readonly_comment</td><td>bool</td><td>是否开启只读评论</td></tr><tr><td>ban_share_external</td><td>bool</td><td>是否禁止分享到企业外部</td></tr><tr><td>inherit_father_auth</td><td>obj</td><td>从文件父路径继承的权限</td></tr><tr><td>inherit</td><td>bool</td><td>文件是否开启父路径权限继承</td></tr><tr><td>member_list</td><td>obj</td><td>文件夹、文档成员</td></tr><tr><td>file_member_list</td><td>obj</td><td>查询fileid为文档时返回，为文档所在目录成员，以及其他授权列表</td></tr><tr><td>co_auth_list</td><td>obj</td><td>分享指定的部门列表</td></tr><tr><td>type(后续将废弃)</td><td>uint32</td><td>成员类型 1:个人 2:部门</td></tr><tr><td>userid</td><td>string</td><td>成员userid,字符串</td></tr><tr><td>departmentid(后续将废弃)</td><td>uint32</td><td>部门departmentid, 32位整型范围是[0, 2^32) (type为2时填写)</td></tr><tr><td>watermark</td><td>obj</td><td>水印相关设置（除show_visitor_name字段外，其余字段仅文档可设置）</td></tr><tr><td>text</td><td>string</td><td>水印文字，此字段不填则保持原样</td></tr><tr><td>margin_type</td><td>uint32</td><td>水印类型。1：低密度水印， 2： 高密度水印，此字段不填则保持原样</td></tr><tr><td>show_visitor_name</td><td>bool</td><td>是否显示访问人名称，此字段不填则保持原样（仅专业版支持）</td></tr><tr><td>force_by_admin</td><td>bool</td><td>管理员是否强制要求使用水印，此字段不填则保持原样</td></tr><tr><td>show_text</td><td>bool</td><td>是否展示水印文本，此字段不填则保持原样</td></tr><tr><td>force_by_space_admin</td><td>bool</td><td>空间管理员是否强制要求使用水印，此字段不填则保持原样</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>