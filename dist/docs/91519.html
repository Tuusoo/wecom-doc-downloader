<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>wx.qy.openEnterpriseChat - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        wx.qy.openEnterpriseChat
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2020/11/05</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><h3 data-sign="54f47833fb37b57c15106cf237e69564" data-lines="1" id="wxqyopenenterprisechatobject-object"><a class="anchor" href="#wxqyopenenterprisechatobject-object"></a>wx.qy.openEnterpriseChat(Object object)</h3><blockquote data-sign="9cf945dc0b1bc98dc84b8a4f7ac8aa10_7" data-lines="7"><strong>调用前提：</strong><br>必须先调用过wx.qy.login，且session_key未过期，开发者可调用checkSession 检查当前登录态<br>当前成员必须在应用的可见范围。<br>externalUserIds由外部联系人选人接口selectExternalContact获得。<br>如果创建的会话有微信联系人，群成员人数不能超过40人。<br>在企业微信3.0.36及以上的版本，创建会话成功之后，接口会返回chatId。<br>在企业微信3.0.36及以上的版本，支持传入chatId打开已有的会话，此时会忽略userIds、externalUserIds与groupName参数。注意：<font color="red">目前仅支持打开客户群</font>，若不是客户群，将报错 unsupported chat.</blockquote><p data-sign="e12fafea06bca75f0ec1980ef40becff" data-type="p" data-lines="2">打开会话接口</p><h4 id="%E5%8F%82%E6%95%B0" data-sign="8cb71f61557fabe1ccf527e1bd04a132" data-lines="1"><a class="anchor" href="#%E5%8F%82%E6%95%B0"></a>参数</h4><h5 data-sign="46276ba891600e417ac243f8fabb1b82" data-lines="2" id="object-object"><a class="anchor" href="#object-object"></a>Object object</h5><div data-sign="de267591ec659b6035fa7289fb00221f" data-lines="9" class="cherry-table-container">
        <table class="cherry-table"><thead><tr><th>参数名</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>userIds</td><td>String</td><td>否（userIds和externalUserIds至少填一个）</td><td>参与会话的企业成员列表，格式为userid1;userid2;...，用分号隔开。</td></tr><tr><td>externalUserIds</td><td>String</td><td>否（userIds和externalUserIds至少填一个）</td><td>参与会话的外部联系人列表，格式为userId1;userId2;…，用分号隔开。</td></tr><tr><td>groupName</td><td>String</td><td>否</td><td>会话名称。单聊时该参数传入空字符串""即可</td></tr><tr><td>chatId</td><td>String</td><td>否</td><td>打开chatId指定的会话</td></tr><tr><td>success</td><td>Function</td><td>否</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td>Function</td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td>Function</td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 data-sign="a3eb661066708b00561e1028019ee536" data-lines="1" id="%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><a class="anchor" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"></a>示例代码：</h4><div data-sign="aa7009fe34cfce8275896367be51835b" data-type="codeBlock" data-lines="19">
      <pre class="language-js"><code class="language-js wrap"><span class="code-line"></span>
<span class="code-line">wx<span class="token punctuation">.</span>qy<span class="token punctuation">.</span><span class="token function">openEnterpriseChat</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token comment">// 注意：userIds和externalUserIds至少选填一个，且userIds+externalUserIds总数不能超过2000，如果externalUserIds有微信联系人，则总数不能超过40人。</span></span>
<span class="code-line">    userIds<span class="token operator">:</span> <span class="token string">'zhangsan;lisi;wangwu'</span><span class="token punctuation">,</span>    <span class="token comment">//参与会话的企业成员列表，格式为userid1;userid2;...，用分号隔开。</span></span>
<span class="code-line">    externalUserIds<span class="token operator">:</span> <span class="token string">'wmSAlECoAAHrbWYDjK5u3Af13xlYAAAA;wmESkECwAAHrNWYDOK5u3Af13xlYAAAA'</span><span class="token punctuation">,</span> <span class="token comment">// 参与会话的外部联系人列表，格式为userId1;userId2;…，用分号隔开。</span></span>
<span class="code-line">    groupName<span class="token operator">:</span> <span class="token string">'讨论组'</span><span class="token punctuation">,</span>  <span class="token comment">// 必填，会话名称。单聊时该参数传入空字符串""即可。</span></span>
<span class="code-line">	chatId<span class="token operator">:</span> <span class="token string">"CHATID"</span><span class="token punctuation">,</span> <span class="token comment">//新建会话时，chatId必须为空串</span></span>
<span class="code-line">    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">      <span class="token comment">// 回调</span></span>
<span class="code-line">	  <span class="token keyword">var</span> chatId <span class="token operator">=</span> res<span class="token punctuation">.</span>chatId<span class="token punctuation">;</span> <span class="token comment">//返回chatId仅在企业微信3.0.36及以后版本支持；</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">      <span class="token comment">// 失败处理</span></span>
<span class="code-line">    <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>