<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取会话内容 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取会话内容
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/05/08</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="e62f9bb007288dbb07cf0ba57369c69d-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B" class="level-2">整体流程</a></li><li class="toc-li"><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8E%A5%E5%8F%A3" class="level-2">初始化接口</a></li><li class="toc-li"><a href="#%E8%8E%B7%E5%8F%96%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE" class="level-2">获取会话记录数据</a></li><li class="toc-li"><a href="#sdk%E8%A7%A3%E5%AF%86%E6%8E%A5%E5%8F%A3" class="level-2">SDK解密接口</a></li><li class="toc-li"><a href="#%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F" class="level-2">消息格式</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E6%9C%AC" class="level-4">文本</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E7%89%87" class="level-4">图片</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%92%A4%E5%9B%9E%E6%B6%88%E6%81%AF" class="level-4">撤回消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%90%8C%E6%84%8F%E4%BC%9A%E8%AF%9D%E8%81%8A%E5%A4%A9%E5%86%85%E5%AE%B9" class="level-4">同意会话聊天内容</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%AF%AD%E9%9F%B3" class="level-4">语音</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%A7%86%E9%A2%91" class="level-4">视频</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%90%8D%E7%89%87" class="level-4">名片</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E4%BD%8D%E7%BD%AE" class="level-4">位置</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%A1%A8%E6%83%85" class="level-4">表情</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%96%87%E4%BB%B6" class="level-4">文件</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E9%93%BE%E6%8E%A5" class="level-4">链接</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B6%88%E6%81%AF" class="level-4">小程序消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF" class="level-4">会话记录消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AFitem" class="level-4">会话记录消息item</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%BE%85%E5%8A%9E%E6%B6%88%E6%81%AF" class="level-4">待办消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%8A%95%E7%A5%A8%E6%B6%88%E6%81%AF" class="level-4">投票消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%A1%AB%E8%A1%A8%E6%B6%88%E6%81%AF" class="level-4">填表消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E7%BA%A2%E5%8C%85%E6%B6%88%E6%81%AF" class="level-4">红包消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E4%BC%9A%E8%AE%AE%E9%82%80%E8%AF%B7%E6%B6%88%E6%81%AF" class="level-4">会议邀请消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E4%BC%9A%E8%AE%AE%E6%8E%A7%E5%88%B6%E6%B6%88%E6%81%AF" class="level-4">会议控制消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%88%87%E6%8D%A2%E4%BC%81%E4%B8%9A%E6%97%A5%E5%BF%97" class="level-4">切换企业日志</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF" class="level-4">在线文档消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#markdown%E6%A0%BC%E5%BC%8F%E6%B6%88%E6%81%AF" class="level-4">MarkDown格式消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF" class="level-4">图文消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%97%A5%E7%A8%8B%E6%B6%88%E6%81%AF" class="level-4">日程消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%B7%B7%E5%90%88%E6%B6%88%E6%81%AF" class="level-4">混合消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E9%9F%B3%E9%A2%91%E5%AD%98%E6%A1%A3%E6%B6%88%E6%81%AF" class="level-4">音频存档消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E9%9F%B3%E9%A2%91%E5%85%B1%E4%BA%AB%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF" class="level-4">音频共享文档消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E4%BA%92%E9%80%9A%E7%BA%A2%E5%8C%85%E6%B6%88%E6%81%AF" class="level-4">互通红包消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%A7%86%E9%A2%91%E5%8F%B7%E6%B6%88%E6%81%AF" class="level-4">视频号消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E9%9F%B3%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D" class="level-4">音视频通话</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E5%BE%AE%E7%9B%98%E6%96%87%E4%BB%B6" class="level-4">微盘文件</a></li><li class="toc-li"><a href="#%E8%8E%B7%E5%8F%96%E5%AA%92%E4%BD%93%E6%96%87%E4%BB%B6" class="level-2">获取媒体文件</a></li><li class="toc-li"><a href="#%E8%8E%B7%E5%8F%96%E6%9C%BA%E5%99%A8%E4%BA%BA%E4%BF%A1%E6%81%AF" class="level-2">获取机器人信息</a></li><li class="toc-li"><a href="#%E5%B7%A5%E5%85%B7%E6%8E%A5%E5%8F%A3" class="level-2">工具接口</a></li></dir><h2 id="%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B" data-sign="eba445f50bee3e1a5824e1ff7649f6c1" data-lines="2"><a class="anchor" href="#%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B"></a>整体流程</h2><p data-sign="f2cf5b3b82f82dc0720f75ab88494458" data-type="p" data-lines="1">业务方通过企业微信提供的sdk，可以进行会话记录数据的获取、媒体数据的获取。</p><blockquote data-sign="af29565dbd4e62458c39d3fddac612e9_3" data-lines="3">linux环境 SDK：<blockquote>x86服务器 <a href="https://wwcdn.weixin.qq.com/node/wework/images/sdk_20240606.tgz" rel="nofollow">下载 SDK v2.0</a> [更新时间：2024-6-6    更新特性：修复一些已知问题]<br>x86服务器 <a href="https://wwcdn.weixin.qq.com/node/wwcomm/sdk_x86_v3_20250205.tgz" rel="nofollow">下载 SDK v3.0</a> [更新时间：2025-2-13    更新特性：openssl 3.0版本]<br>arm服务器  <a href="https://wwcdn.weixin.qq.com/node/wwcomm/sdk_arm_v3_20250205.tgz" rel="nofollow">下载 SDK v3.0</a> [更新时间：2025-2-13    更新特性：openssl 3.0版本]</blockquote></blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><blockquote data-sign="304c218378881bc00b509b99db761540_2" data-lines="2">windows环境 SDK：<br><a href="https://wwcdn.weixin.qq.com/node/liteapp/images/sdk_win_v2.0.zip" rel="nofollow">下载 SDK v2.0</a>[更新时间：2024-6-6    更新特性：修复一些已知问题]<br><a href="https://wwcdn.weixin.qq.com/node/wework/images/sdk_win_v3.zip" rel="nofollow">下载 SDK v3.0</a>[更新时间：2025-2-13    更新特性：openssl3.0版本]</blockquote><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="5d6fe7cea6ebdf7272b10bfcfb55001d" data-type="p" data-lines="1">以下是交互时序图，本文重点介绍sdk的内容。sdk包括如下接口：</p><ol data-sign="ae6a4987f07cab74ab094dceece741c1list5" data-lines="5" class="cherry-list__default" start="1"><li>初始化接口；</li><li>提供分页批量拉取会话记录接口的sdk接口；</li><li>对会话数据进行解密接口；</li><li>对图片、文件等媒体数据，拉取媒体数据内容的sdk接口;</li><li>工具函数，进行数据的析构等处理.</li></ol><p data-sign="3ceb7a12c018bbfcd21847d0eafdf23f" data-type="p" data-lines="1"><img src="images/91774/d41e4f2c.png" alt=""></p><h2 id="%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8E%A5%E5%8F%A3" data-sign="2253bef4979ee2eb68ada49315de9ae2" data-lines="2"><a class="anchor" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8E%A5%E5%8F%A3"></a>初始化接口</h2><p data-sign="5952cd50d528b21086fa9c5161a8b35d" data-type="p" data-lines="1">第一步：</p><div data-sign="ac932831f6d851c0821761796136b17a" data-type="codeBlock" data-lines="4">
      <pre class="language-c"><code class="language-c wrap"><span class="code-line"><span class="token comment">/*获取sdk对象，首次使用初始化*/</span></span>
<span class="code-line">WeWorkFinanceSdk_t<span class="token operator">*</span> <span class="token function">NewSdk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="967e360cb4b4c8c9bd84325cf646ac6e" data-type="p" data-lines="1">第二步：</p><div data-sign="fdaf0a717ce6241818d71b672756c788" data-type="codeBlock" data-lines="17">
      <pre class="language-c"><code class="language-c wrap"><span class="code-line"><span class="token comment">/*</span></span>
<span class="code-line"><span class="token comment">	 * 初始化函数</span></span>
<span class="code-line"><span class="token comment">	 * Return值=0表示该API调用成功</span></span>
<span class="code-line"><span class="token comment">	 * </span></span>
<span class="code-line"><span class="token comment">	 *</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  sdk			NewSdk返回的sdk指针</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  corpid     	调用企业的企业id，例如：wwd08c8exxxx5ab44d，可以在企业微信管理端--我的企业--企业信息查看</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  secret		 聊天内容存档的Secret，可以在企业微信管理端--管理工具--聊天内容存档查看</span></span>
<span class="code-line"><span class="token comment">	 *						</span></span>
<span class="code-line"><span class="token comment">	 *</span></span>
<span class="code-line"><span class="token comment">	 * @return 返回是否初始化成功</span></span>
<span class="code-line"><span class="token comment">	 *      0   - 成功</span></span>
<span class="code-line"><span class="token comment">	 *      !=0 - 失败</span></span>
<span class="code-line"><span class="token comment">*/</span></span>
<span class="code-line"><span class="token keyword">int</span> <span class="token function">Init</span><span class="token punctuation">(</span>WeWorkFinanceSdk_t<span class="token operator">*</span> sdk<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> corpid<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> secret<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h2 id="%E8%8E%B7%E5%8F%96%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE" data-sign="eb43cd8136e4519e298d1f046bf227c1" data-lines="2"><a class="anchor" href="#%E8%8E%B7%E5%8F%96%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE"></a>获取会话记录数据</h2><p data-sign="1e9e621d5425101c3bb7c1f9d9f2ab25" data-type="p" data-lines="1">通过本sdk接口来获取公司一段时间内的会话记录。一次拉取调用上限1000条会话记录，可以通过分页拉取的方式来依次拉取。调用频率不可超过4000次/分钟。</p><div data-sign="d58db77aadbe2add61783f584d45a5b4" data-type="codeBlock" data-lines="25">
      <pre class="language-c"><code class="language-c wrap"><span class="code-line"> <span class="token comment">/**</span></span>
<span class="code-line"><span class="token comment">	 * 拉取聊天记录函数</span></span>
<span class="code-line"><span class="token comment">	 * Return值=0表示该API调用成功</span></span>
<span class="code-line"><span class="token comment">	 * </span></span>
<span class="code-line"><span class="token comment">	 *</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  sdk				NewSdk返回的sdk指针</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  seq				从指定的seq开始拉取消息，注意的是返回的消息从seq+1开始返回，seq为之前接口返回的最大seq值。首次使用请使用seq:0</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  limit			一次拉取的消息条数，最大值1000条，超过1000条会返回错误</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  proxy			使用代理的请求，需要传入代理的链接。如：socks5://10.0.0.1:8081 或者 http://10.0.0.1:8081</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  passwd			代理账号密码，需要传入代理的账号密码。如 user_name:passwd_123</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  timeout			超时时间，单位秒</span></span>
<span class="code-line"><span class="token comment">	 * @param [out] chatDatas		返回本次拉取消息的数据，slice结构体.内容包括errcode/errmsg，以及每条消息内容。示例如下：</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token comment">	 {"errcode":0,"errmsg":"ok","chatdata":[{"seq":196,"msgid":"CAQQ2fbb4QUY0On2rYSAgAMgip/yzgs=","publickey_ver":3,"encrypt_random_key":"ftJ+uz3n/z1DsxlkwxNgE+mL38H42/KCvN8T60gbbtPD+Rta1hKTuQPzUzO6Hzne97MgKs7FfdDxDck/v8cDT6gUVjA2tZ/M7euSD0L66opJ/IUeBtpAtvgVSD5qhlaQjvfKJc/zPMGNK2xCLFYqwmQBZXbNT7uA69Fflm512nZKW/piK2RKdYJhRyvQnA1ISxK097sp9WlEgDg250fM5tgwMjujdzr7ehK6gtVBUFldNSJS7ndtIf6aSBfaLktZgwHZ57ONewWq8GJe7WwQf1hwcDbCh7YMG8nsweEwhDfUz+u8rz9an+0lgrYMZFRHnmzjgmLwrR7B/32Qxqd79A==","encrypt_chat_msg":"898WSfGMnIeytTsea7Rc0WsOocs0bIAerF6de0v2cFwqo9uOxrW9wYe5rCjCHHH5bDrNvLxBE/xOoFfcwOTYX0HQxTJaH0ES9OHDZ61p8gcbfGdJKnq2UU4tAEgGb8H+Q9n8syRXIjaI3KuVCqGIi4QGHFmxWenPFfjF/vRuPd0EpzUNwmqfUxLBWLpGhv+dLnqiEOBW41Zdc0OO0St6E+JeIeHlRZAR+E13Isv9eS09xNbF0qQXWIyNUi+ucLr5VuZnPGXBrSfvwX8f0QebTwpy1tT2zvQiMM2MBugKH6NuMzzuvEsXeD+6+3VRqL"}]}</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token comment">	 *</span></span>
<span class="code-line"><span class="token comment">	 * @return 返回是否调用成功</span></span>
<span class="code-line"><span class="token comment">	 *      0   - 成功</span></span>
<span class="code-line"><span class="token comment">	 *      !=0 - 失败	</span></span>
<span class="code-line"><span class="token comment">	 */</span>		</span>
<span class="code-line">    <span class="token keyword">int</span> <span class="token function">GetChatData</span><span class="token punctuation">(</span>WeWorkFinanceSdk_t<span class="token operator">*</span> sdk<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> seq<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> limit<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>proxy<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> passwd<span class="token punctuation">,</span><span class="token keyword">int</span> timeout<span class="token punctuation">,</span>Slice_t<span class="token operator">*</span> chatDatas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="58f6889c9f40a867c02e8c81a00f7063" data-type="p" data-lines="2"><strong>请求参数说明：</strong></p><div class="cherry-table-container" data-sign="bdb0577af58a032a7e0551f7d3f26e5b" data-lines="9">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>sdk</td><td>是</td><td>初始化的sdk对象</td></tr><tr><td>seq</td><td>是</td><td>本次请求获取消息记录开始的seq值。首次访问填写0，非首次使用上次企业微信返回的最大seq。允许从任意seq重入拉取。Uint64类型，范围0-pow(2,64)-1</td></tr><tr><td>limit</td><td>是</td><td>一次调用限制的limit值，不能超过1000.uint32类型</td></tr><tr><td>proxy</td><td>否</td><td>使用代理的请求，需要传入代理的链接。如：socks5://10.0.0.1:8081 或者 http://10.0.0.1:8081.如不使用代理可以设置为空. 支持sock5跟http代理</td></tr><tr><td>paswd</td><td>否</td><td>代理账号密码，需要传入代理的账号密码。如 user_name:passwd_123</td></tr><tr><td>timeout</td><td>是</td><td>超时时长，单位 秒</td></tr><tr><td>chatDatas</td><td>是</td><td>返回本次拉取消息的数据.密文消息</td></tr></tbody></table></div><p data-sign="254d03cdec50888ad3c56c08cce73ca6" data-type="p" data-lines="2">注：获取会话记录内容不能超过5天，如果企业需要全量数据，则企业需要定期拉取聊天消息。返回的ChatDatas内容为json格式。</p><p data-sign="02f00aa7948774c51fa0439b321b682e" data-type="p" data-lines="1">ChatDatas详解：</p><div data-sign="b04f5e5992d9e05e62ebc5a15eb00ef5" data-type="codeBlock" data-lines="4">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"errcode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"errmsg"</span><span class="token operator">:</span><span class="token string">"ok"</span><span class="token punctuation">,</span><span class="token property">"chatdata"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"seq"</span><span class="token operator">:</span><span class="token number">196</span><span class="token punctuation">,</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"CAQQ2fbb4QUY0On2rYSAgAMgip/yzgs="</span><span class="token punctuation">,</span><span class="token property">"publickey_ver"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"encrypt_random_key"</span><span class="token operator">:</span><span class="token string">"ftJ+uz3n/z1DsxlkwxNgE+mL38H42/KCvN8T60gbbtPD+Rta1hKTuQPzUzO6Hzne97MgKs7FfdDxDck/v8cDT6gUVjA2tZ/M7euSD0L66opJ/IUeBtpAtvgVSD5qhlaQjvfKJc/zPMGNK2xCLFYqwmQBZXbNT7uA69Fflm512nZKW/piK2RKdYJhRyvQnA1ISxK097sp9WlEgDg250fM5tgwMjujdzr7ehK6gtVBUFldNSJS7ndtIf6aSBfaLktZgwHZ57ONewWq8GJe7WwQf1hwcDbCh7YMG8nsweEwhDfUz+u8rz9an+0lgrYMZFRHnmzjgmLwrR7B/32Qxqd79A=="</span><span class="token punctuation">,</span><span class="token property">"encrypt_chat_msg"</span><span class="token operator">:</span><span class="token string">"898WSfGMnIeytTsea7Rc0WsOocs0bIAerF6de0v2cFwqo9uOxrW9wYe5rCjCHHH5bDrNvLxBE/xOoFfcwOTYX0HQxTJaH0ES9OHDZ61p8gcbfGdJKnq2UU4tAEgGb8H+Q9n8syRXIjaI3KuVCqGIi4QGHFmxWenPFfjF/vRuPd0EpzUNwmqfUxLBWLpGhv+dLnqiEOBW41Zdc0OO0St6E+JeIeHlRZAR+E13Isv9eS09xNbF0qQXWIyNUi+ucLr5VuZnPGXBrSfvwX8f0QebTwpy1tT2zvQiMM2MBugKH6NuMzzuvEsXeD+6+3VRqL"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="72b0602c87a86b9a64c0283bb789372b" data-type="p" data-lines="2"><strong>返回参数说明：</strong></p><div class="cherry-table-container" data-sign="82ad0722ace3de3c326893b99c1b78e7" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>0表示成功，错误返回非0错误码，需要参看errmsg。Uint32类型</td></tr><tr><td>errmsg</td><td>返回信息，如非空为错误原因。String类型</td></tr><tr><td>chatdata</td><td>聊天记录数据内容。数组类型。包括seq、msgid等内容</td></tr><tr><td>seq</td><td>消息的seq值，标识消息的序号。再次拉取需要带上上次回包中最大的seq。Uint64类型，范围0-pow(2,64)-1</td></tr><tr><td>msgid</td><td>消息id，消息的唯一标识，企业可以使用此字段进行消息去重。String类型。<strong>msgid以_external结尾的消息，表明该消息是一条外部消息。msgid以_updown_stream结尾的消息，表明该消息是一条上下游消息。</strong></td></tr><tr><td>publickey_ver</td><td>加密此条消息使用的公钥版本号。Uint32类型</td></tr><tr><td>encrypt_random_key</td><td>使用publickey_ver指定版本的公钥进行非对称加密后base64加密的内容，需要业务方先base64 decode处理后，再使用指定版本的私钥进行解密，得出内容。String类型</td></tr><tr><td>encrypt_chat_msg</td><td>消息密文。需要业务方使用将encrypt_random_key解密得到的内容，与encrypt_chat_msg，传入sdk接口DecryptData,得到消息明文。String类型</td></tr></tbody></table></div><p data-sign="2fe17ebcbfbecda73560257728821b59" data-type="p" data-lines="7"><strong>encrypt_random_key内容解密说明：</strong><br>	encrypt_random_key是使用企业在管理端填写的公钥（使用模值为2048bit的秘钥），采用RSA加密算法进行加密处理后base64 encode的内容，加密内容为企业微信产生。RSA使用PKCS1。<br>	企业通过GetChatData获取到会话数据后：<br>	a) 需首先对每条消息的encrypt_random_key内容进行base64 decode,得到字符串str1.<br>	b) 使用publickey_ver指定版本的私钥，使用RSA PKCS1算法对str1进行解密，得到解密内容str2.<br>	c) 得到str2与对应消息的encrypt_chat_msg，调用下方描述的DecryptData接口，即可获得消息明文。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="sdk%E8%A7%A3%E5%AF%86%E6%8E%A5%E5%8F%A3" data-sign="3fbc942fa58940c0dec6e24ec7ae9bdf" data-lines="1"><a class="anchor" href="#sdk%E8%A7%A3%E5%AF%86%E6%8E%A5%E5%8F%A3"></a>SDK解密接口</h2><div data-sign="f04243a3584a04a440e83fda095bcb20" data-type="codeBlock" data-lines="14">
      <pre class="language-cpp"><code class="language-cpp wrap"><span class="code-line"><span class="token comment">/**</span></span>
<span class="code-line"><span class="token comment">     * @brief 解析密文.企业微信自有解密内容</span></span>
<span class="code-line"><span class="token comment">     * @param [in]  encrypt_key, getchatdata返回的encrypt_random_key,使用企业自持对应版本秘钥RSA解密后的内容</span></span>
<span class="code-line"><span class="token comment">     * @param [in]  encrypt_msg, getchatdata返回的encrypt_chat_msg</span></span>
<span class="code-line"><span class="token comment">     * @param [out] msg, 解密的消息明文</span></span>
<span class="code-line"><span class="token comment">	 * @return 返回是否调用成功</span></span>
<span class="code-line"><span class="token comment">	 *      0   - 成功</span></span>
<span class="code-line"><span class="token comment">	 *      !=0 - 失败</span></span>
<span class="code-line"><span class="token comment">     */</span></span>
<span class="code-line"><span class="token keyword">int</span> <span class="token function">DecryptData</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> encrypt_key<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> encrypt_msg<span class="token punctuation">,</span> Slice_t<span class="token operator">*</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="41514f3f7498b860318de91fdee8e217" data-type="p" data-lines="2">请求参数说明：</p><div class="cherry-table-container" data-sign="8bed832a4d8e5d23399148f24074871f" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>encrypt_key</td><td>是</td><td>企业私钥解密encrypt_random_key后的内容</td></tr><tr><td>encrypt_msg</td><td>是</td><td>GetChatdata接口返回的加密消息encrypt_chat_msg</td></tr><tr><td>msg</td><td>是</td><td>消息明文，json格式</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h2 id="%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F" data-sign="98e62066b93e2cf546cd88dcb3a8e7c5" data-lines="1"><a class="anchor" href="#%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F"></a>消息格式</h2><p data-sign="14ad3b10b9f38f89757768845ced028c" data-type="p" data-lines="1">本小节对content对应的消息格式进行说明。消息类型支持：文本、图片、语音、视频、位置等多种消息类型。</p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E6%96%87%E6%9C%AC" data-sign="2152be55ba25e8bc5251eb1e45691ec7" data-lines="1"><a class="anchor" href="#%E6%96%87%E6%9C%AC"></a>文本</h4><div data-sign="e1da55321bf71918c9bf0bf6224165c4" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"CAQQluDa4QUY0On2rYSAgAMgzPrShAE="</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"XuJinSheng"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icefog"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1547087894783</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"text"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token string">"test"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="16ecb573dc78dc09c7a02bcbb1e514e4" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgid</td><td>消息id，消息的唯一标识，企业可以使用此字段进行消息去重。String类型</td></tr><tr><td>action</td><td>消息动作，目前有send(发送消息)/recall(撤回消息)/switch(切换企业日志)三种类型。String类型</td></tr><tr><td>from</td><td>消息发送方id。同一企业内容为userid，非相同企业为external_userid。消息如果是机器人发出，也为external_userid。String类型</td></tr><tr><td>tolist</td><td>消息接收方列表，可能是多个，同一个企业内容为userid，非相同企业为external_userid。数组，内容为string类型</td></tr><tr><td>roomid</td><td>群聊消息的群id。如果是单聊则为空。String类型</td></tr><tr><td>msgtime</td><td>消息发送时间戳，utc时间，ms单位。</td></tr><tr><td>msgtype</td><td>文本消息为：text。String类型</td></tr><tr><td>content</td><td>消息内容。String类型</td></tr></tbody></table></div><p data-sign="a4b9b3738a4cf92f4fb604f10d62634b" data-type="p" data-lines="7">  <br>注：<br>机器人与外部联系人的账号都是external_userid，其中机器人的external_userid是以"wb"开头，例如："wbjc7bDwAAJVylUKpSA3Z5U11tDO4AAA"，外部联系人的external_userid以"wo"或"wm"开头。<br>如果是机器人发出的消息，可以通过openapi拉取机器人详情：<a href="#90000/90135/91774/%E8%8E%B7%E5%8F%96%E6%9C%BA%E5%99%A8%E4%BA%BA%E4%BF%A1%E6%81%AF" rel="nofollow">如何获取机器人详情？</a><br>如果是外部联系人发出的消息，可以通过openapi拉取外部联系人详情：<a href="#13878" rel="nofollow">如何获取外部联系人详情？</a><br>如果是引用/回复消息，发消息的用户的语言设置是中文，消息内容前面会加上“这是一条引用/回复消息：”，如果发消息的用户的语言设置是英文，消息内容的前面会加上“This is a quote/reply:”。<br>如：</p><div data-sign="16c6948ca8c0f422617d3313e05e547e" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"CAQQluDa4QUY0On2rYSAgAMgzPrShAE="</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"XuJinSheng"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icefog"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1547087894783</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"text"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token string">"这是一条引用/回复消息：\nnick\n666\n------\n@nick777"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%9B%BE%E7%89%87" data-sign="fa8c3040ea61ef18d1e65779ae4ba018" data-lines="1"><a class="anchor" href="#%E5%9B%BE%E7%89%87"></a>图片</h4><div data-sign="93d0579cc1ec8961decacb023653caa1" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"CAQQvPnc4QUY0On2rYSAgAMgooLa0Q8="</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"XuJinSheng"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icefog"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"image"</span><span class="token punctuation">,</span><span class="token property">"image"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"md5sum"</span><span class="token operator">:</span><span class="token string">"50de8e5ae8ffe4f1df7a93841f71993a"</span><span class="token punctuation">,</span><span class="token property">"filesize"</span><span class="token operator">:</span><span class="token number">70961</span><span class="token punctuation">,</span><span class="token property">"sdkfileid"</span><span class="token operator">:</span><span class="token string">"CtYBMzA2OTAyMDEwMjA0NjIzMDYwMDIwMTAwMDIwNGI3ZmU0MDZlMDIwMzBmNTliMTAyMDQ1YzliNTQ3NzAyMDQ1YzM3M2NiYzA0MjQ2NjM0MzgzNTM0NjEzNTY1MmQzNDYxMzQzODJkMzQzMTYxNjEyZDM5NjEzOTM2MmQ2MTM2NjQ2NDY0NjUzMDY2NjE2NjM1MzcwMjAxMDAwMjAzMDExNTQwMDQxMDUwZGU4ZTVhZThmZmU0ZjFkZjdhOTM4NDFmNzE5OTNhMDIwMTAyMDIwMTAwMDQwMBI4TkRkZk1UWTRPRGcxTVRBek1ETXlORFF6TWw4eE9UUTVOamN6TkRZMlh6RTFORGN4TWpNNU1ERT0aIGEwNGQwYWUyM2JlYzQ3NzQ5MjZhNWZjMjk0ZTEyNTkz"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="c75c121f126e8f08d1e4e8aa565f4d43" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>图片消息为：image。String类型</td></tr><tr><td>sdkfileid</td><td>媒体资源的id信息。String类型</td></tr><tr><td>md5sum</td><td>图片资源的md5值，供进行校验。String类型</td></tr><tr><td>filesize</td><td>图片资源的文件大小。Uint32类型</td></tr></tbody></table></div><p data-sign="1c5e91ee476e096859f6945361392b63" data-type="p" data-lines="2">  <br>注：以下消息类型不再描述msgid、action、from、tolist、roomid、msgtime等通用字段，着重描述msgtype以及不同消息类型对应的json格式的消息内容。</p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E6%92%A4%E5%9B%9E%E6%B6%88%E6%81%AF" data-sign="d9fb2e5c63780e674a551bde3827c114" data-lines="1"><a class="anchor" href="#%E6%92%A4%E5%9B%9E%E6%B6%88%E6%81%AF"></a>撤回消息</h4><div data-sign="c0af64fda5e433a19a6862ffda04649d" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"15775510700152506326_1603875615"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"recall"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kenshin"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmUu0zBgAALV7ZymkcMyxvbTe8YdWxxA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875615723</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"revoke"</span><span class="token punctuation">,</span><span class="token property">"revoke"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"pre_msgid"</span><span class="token operator">:</span><span class="token string">"14822339130656386894_1603875600"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="c3071ccc0544160c2203a95798234d88" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>撤回消息为：revoke。String类型</td></tr><tr><td>pre_msgid</td><td>标识撤回的原消息的msgid。String类型</td></tr></tbody></table></div><p data-sign="0b3b0b75838635f916a19d77f743decf" data-type="p" data-lines="3"><strong>示例图：</strong><br><img src="images/91774/28d7a2b3.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%90%8C%E6%84%8F%E4%BC%9A%E8%AF%9D%E8%81%8A%E5%A4%A9%E5%86%85%E5%AE%B9" data-sign="e161c555080eb76cbb9cb13e8be1a74b" data-lines="1"><a class="anchor" href="#%E5%90%8C%E6%84%8F%E4%BC%9A%E8%AF%9D%E8%81%8A%E5%A4%A9%E5%86%85%E5%AE%B9"></a>同意会话聊天内容</h4><div data-sign="e3f4ab1e77c33f66b127e34fcf0a9915" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"17972321270926900092_1603875944"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"wmErxtDgAA9AW32YyyuYRimKr7D1KWlw"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"kenshin"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875944122</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"disagree"</span><span class="token punctuation">,</span><span class="token property">"disagree"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"userid"</span><span class="token operator">:</span><span class="token string">"wmErxtDgAA9AW32YyyuYRimKr7D1KWlw"</span><span class="token punctuation">,</span><span class="token property">"disagree_time"</span><span class="token operator">:</span><span class="token number">1603875944122</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div data-sign="0baf788e9747436833fef9d9c7c17d72" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"8891446340739254950_1603875826"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"wmGAgeDQAAvQeaTqWwkMTxGMkvI7OOuQ"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"kenshin"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875826656</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"agree"</span><span class="token punctuation">,</span><span class="token property">"agree"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"userid"</span><span class="token operator">:</span><span class="token string">"wmGAgeDQAAvQeaTqWwkMTxGMkvI7OOuQ"</span><span class="token punctuation">,</span><span class="token property">"agree_time"</span><span class="token operator">:</span><span class="token number">1603875826656</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="50f171dc80dc2f3989ec08c62b23a1d2" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>同意消息为：agree，不同意消息为：disagree。String类型</td></tr><tr><td>userid</td><td>同意/不同意协议者的userid，外部企业默认为external_userid。String类型</td></tr><tr><td>agree_time</td><td>同意/不同意协议的时间，utc时间，ms单位。</td></tr></tbody></table></div><p data-sign="085e96689b6b1b4d0df553a071e4a095" data-type="p" data-lines="3"><strong>示例图：</strong><br><img src="images/91774/9a7c8feb.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E8%AF%AD%E9%9F%B3" data-sign="c3110adf40505a0c7403578e80d09629" data-lines="1"><a class="anchor" href="#%E8%AF%AD%E9%9F%B3"></a>语音</h4><div data-sign="052b778763c18454bc917fc61ce7c865" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"10958372969718811103_1603875609"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"wmGAgeDQAAdBjb8CK4ieMPRm7Cqm-9VA"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"kenshin"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875609704</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"voice"</span><span class="token punctuation">,</span><span class="token property">"voice"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"md5sum"</span><span class="token operator">:</span><span class="token string">"9db09c7fa627c9e53f17736c786a74d5"</span><span class="token punctuation">,</span><span class="token property">"voice_size"</span><span class="token operator">:</span><span class="token number">6810</span><span class="token punctuation">,</span><span class="token property">"play_length"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token property">"sdkfileid"</span><span class="token operator">:</span><span class="token string">"kcyZjZqOXhETGYxajB2Zkp5Rk8zYzh4RVF3ZzZGdXlXNWRjMUoxVGZxbzFTTDJnQ2YxL0NraVcxUUJNK3VUamhEVGxtNklCbjZmMEEwSGRwN0h2cU1GQTU1MDRSMWdTSmN3b25ZMkFOeG5hMS90Y3hTQ0VXRlVxYkR0Ymt5c3JmV2VVcGt6UlNXR1ZuTFRWVGtudXVldDRjQ3hscDBrMmNhMFFXVnAwT3Y5NGVqVGpOcWNQV2wrbUJwV01TRm9xWmNDRVVrcFY5Nk9OUS9GbXIvSmZvOVVZZjYxUXBkWnMvUENkVFQxTHc2N0drb2pJT0FLZnhVekRKZ1FSNDU3ZnZtdmYvTzZDOG9DRXl2SUNIOHc9PRI0TkRkZk56ZzRNVE13TVRjMk5qQTRNak0yTmw4ek5qRTVOalExTjE4eE5qQXpPRGMxTmpBNRogNzM3MDY2NmM2YTc5Njg3NDdhNzU3NDY0NzY3NTY4NjY="</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="7102fc7419c3ece10b8eeaa74b059c0b" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>语音消息为：voice。String类型</td></tr><tr><td>voice_size</td><td>语音消息大小。Uint32类型</td></tr><tr><td>play_length</td><td>播放长度。Uint32类型</td></tr><tr><td>sdkfileid</td><td>媒体资源的id信息。String类型</td></tr><tr><td>md5sum</td><td>资源的md5值，供进行校验。String类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E8%A7%86%E9%A2%91" data-sign="fdfbb1d6fa5c1ba9f82910067b0a318e" data-lines="1"><a class="anchor" href="#%E8%A7%86%E9%A2%91"></a>视频</h4><div data-sign="c5b49edf215a4e758e204a80af563c07" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"17955920891003447432_1603875627"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kenshin"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmGAgeDQAAHuRJbt4ZQI_1cqoQcf41WQ"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875626823</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"video"</span><span class="token punctuation">,</span><span class="token property">"video"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"md5sum"</span><span class="token operator">:</span><span class="token string">"d06fc80c01d6fbffcca3b229ba41eac6"</span><span class="token punctuation">,</span><span class="token property">"filesize"</span><span class="token operator">:</span><span class="token number">15169724</span><span class="token punctuation">,</span><span class="token property">"play_length"</span><span class="token operator">:</span><span class="token number">108</span><span class="token punctuation">,</span><span class="token property">"sdkfileid"</span><span class="token operator">:</span><span class="token string">"MzAzMjYxMzAzNTYzMzgzMjMyMzQwMjAxMDAwMjA0MDBlNzc4YzAwNDEwZDA2ZmM4MGMwMWQ2ZmJmZmNjYTNiMjI5YmE0MWVhYzYwMjAxMDQwMjAxMDAwNDAwEjhORGRmTVRZNE9EZzFNREEyTlRjM056QXpORjgxTWpZeE9USTBOek5mTVRZd016ZzNOVFl5Tnc9PRogNTIzNGQ1NTQ5N2RhNDM1ZDhlZTU5ODk4NDQ4NzRhNDk="</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="012fb3d6dca5c3f2de45da52ac4e94eb" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>视频消息为：video。String类型</td></tr><tr><td>sdkfileid</td><td>媒体资源的id信息。String类型</td></tr><tr><td>md5sum</td><td>资源的md5值，供进行校验。String类型</td></tr><tr><td>filesize</td><td>资源的文件大小。Uint32类型</td></tr><tr><td>play_length</td><td>视频播放长度。Uint32类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%90%8D%E7%89%87" data-sign="85b7de6bb131ad02c7dc52ed3bd51418" data-lines="1"><a class="anchor" href="#%E5%90%8D%E7%89%87"></a>名片</h4><div data-sign="d781cee38c8ddcc0e2bb0ab7b3597972" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"13714216591700685558_1603875680"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kenshin"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmGAgeDQAAy2Dtr0F8aK4dTuatfm-5Rg"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875680377</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"card"</span><span class="token punctuation">,</span><span class="token property">"card"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"corpname"</span><span class="token operator">:</span><span class="token string">"微信联系人"</span><span class="token punctuation">,</span><span class="token property">"userid"</span><span class="token operator">:</span><span class="token string">"wmGAgeDQAAGjFmfnP7A3j2JxQDdLNhSw"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="3238355c36c983b59b5cc8e4cd61e9fc" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>名片消息为：card。String类型</td></tr><tr><td>corpname</td><td>名片所有者所在的公司名称。String类型</td></tr><tr><td>userid</td><td>名片所有者的id，同一公司是userid，不同公司是external_userid。String类型</td></tr></tbody></table></div><p data-sign="a5f66e83772b7dee2f8764153db48ab1" data-type="p" data-lines="3"><strong>示例图：</strong><br><img src="images/91774/9ffb44ce.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E4%BD%8D%E7%BD%AE" data-sign="155d722574e9d460aabc4810a620a84e" data-lines="1"><a class="anchor" href="#%E4%BD%8D%E7%BD%AE"></a>位置</h4><div data-sign="83864399e9aba4925ca8a9902162d558" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"2641513858500683770_1603876152"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"icefog"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmN6etBgAA0sbJ3invMvRxPQDFoq9uWA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603876152141</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"location"</span><span class="token punctuation">,</span><span class="token property">"location"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"longitude"</span><span class="token operator">:</span><span class="token number">116.586285899</span><span class="token punctuation">,</span><span class="token property">"latitude"</span><span class="token operator">:</span><span class="token number">39.911125799</span><span class="token punctuation">,</span><span class="token property">"address"</span><span class="token operator">:</span><span class="token string">"北京市xxx区xxx路xxx大厦x座"</span><span class="token punctuation">,</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"xxx管理中心"</span><span class="token punctuation">,</span><span class="token property">"zoom"</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="a8d242ca0e82edb345fd8058a5ed8d77" data-lines="8">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>位置消息为：location。String类型</td></tr><tr><td>longitude</td><td>经度，单位double</td></tr><tr><td>latitude</td><td>纬度，单位double</td></tr><tr><td>address</td><td>地址信息。String类型</td></tr><tr><td>title</td><td>位置信息的title。String类型</td></tr><tr><td>zoom</td><td>缩放比例。Uint32类型</td></tr></tbody></table></div><p data-sign="be2715520a1586f32cb20a0b5e8867e5" data-type="p" data-lines="3"><strong>示例图：</strong><br><img src="images/91774/68652e06.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E8%A1%A8%E6%83%85" data-sign="d895f374e00f04228e480afe5281db13" data-lines="1"><a class="anchor" href="#%E8%A1%A8%E6%83%85"></a>表情</h4><div data-sign="fdf9809bc15b581ad0b04be8d8821d93" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"6623217619416669654_1603875612"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"icef"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmErxtDgAAhteCglUZH2kUt3rq431qmg"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875611148</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"emotion"</span><span class="token punctuation">,</span><span class="token property">"emotion"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"width"</span><span class="token operator">:</span><span class="token number">290</span><span class="token punctuation">,</span><span class="token property">"height"</span><span class="token operator">:</span><span class="token number">290</span><span class="token punctuation">,</span><span class="token property">"imagesize"</span><span class="token operator">:</span><span class="token number">962604</span><span class="token punctuation">,</span><span class="token property">"md5sum"</span><span class="token operator">:</span><span class="token string">"94c2b0bba52cc456cb8221b248096612"</span><span class="token punctuation">,</span><span class="token property">"sdkfileid"</span><span class="token operator">:</span><span class="token string">"4eE1ESTVNalE1TnprMFh6RTJNRE00TnpVMk1UST0aIDc0NzI2NjY1NzE3NTc0Nzg2ZDZlNzg2YTY5NjY2MTYx"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="94f6fa02bbece6df960abec6468da018" data-lines="9">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>表情消息为：emotion。String类型</td></tr><tr><td>type</td><td>表情类型，png或者gif.1表示gif 2表示png。Uint32类型</td></tr><tr><td>width</td><td>表情图片宽度。Uint32类型</td></tr><tr><td>height</td><td>表情图片高度。Uint32类型</td></tr><tr><td>sdkfileid</td><td>媒体资源的id信息。String类型</td></tr><tr><td>md5sum</td><td>资源的md5值，供进行校验。String类型</td></tr><tr><td>imagesize</td><td>资源的文件大小。Uint32类型</td></tr></tbody></table></div><p data-sign="4cc09f720b44fc42fcef61e762a8f40c" data-type="p" data-lines="2"><strong>示例图：</strong></p><p data-sign="b01796073cc605be84c47bf4fab6e769" data-type="p" data-lines="2"><img src="images/91774/2e4d4401.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E6%96%87%E4%BB%B6" data-sign="21833e6642ea0c042933aa6daeb53a0a" data-lines="1"><a class="anchor" href="#%E6%96%87%E4%BB%B6"></a>文件</h4><div data-sign="c0c0aa890d3e47951f8cef52e471b56e" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"18039699423706571225_1603875608"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kens"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmErxtDgAArDlFIhf76O6w4GxU81al8w"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875608214</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"file"</span><span class="token punctuation">,</span><span class="token property">"file"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"md5sum"</span><span class="token operator">:</span><span class="token string">"18e93fc2ea884df23b3d2d3b8667b9f0"</span><span class="token punctuation">,</span><span class="token property">"filename"</span><span class="token operator">:</span><span class="token string">"资料.docx"</span><span class="token punctuation">,</span><span class="token property">"fileext"</span><span class="token operator">:</span><span class="token string">"docx"</span><span class="token punctuation">,</span><span class="token property">"filesize"</span><span class="token operator">:</span><span class="token number">18181</span><span class="token punctuation">,</span><span class="token property">"sdkfileid"</span><span class="token operator">:</span><span class="token string">"E4ODRkZjIzYjNkMmQzYjg2NjdiOWYwMDIwMTA1MDIwMTAwMDQwMBI4TkRkZk1UWTRPRGcxTURrek9UZzBPVEF6TTE4eE1EUXpOVGcxTlRVNVh6RTJNRE00TnpVMk1EZz0aIDMwMzkzMzY0NjEzNjM3NjY2NDY1NjMzNjYxMzIzNzYx"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="87d01f06ad9cdbdf47832c670ac9d2ca" data-lines="8">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>文件消息为：file。String类型</td></tr><tr><td>sdkfileid</td><td>媒体资源的id信息。String类型</td></tr><tr><td>md5sum</td><td>资源的md5值，供进行校验。String类型</td></tr><tr><td>filename</td><td>文件名称。String类型</td></tr><tr><td>fileext</td><td>文件类型后缀。String类型</td></tr><tr><td>filesize</td><td>文件大小。Uint32类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E9%93%BE%E6%8E%A5" data-sign="56e91d61e4e7516acd5dec0c700d3c0f" data-lines="1"><a class="anchor" href="#%E9%93%BE%E6%8E%A5"></a>链接</h4><div data-sign="adad023d5789166ca1e7a6114be7ceb1" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"11788441727514772650_1603875624"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kenshin"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"0000726"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875624476</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"link"</span><span class="token punctuation">,</span><span class="token property">"link"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"邀请你加入群聊"</span><span class="token punctuation">,</span><span class="token property">"description"</span><span class="token operator">:</span><span class="token string">"技术支持群，进入可查看详情"</span><span class="token punctuation">,</span><span class="token property">"link_url"</span><span class="token operator">:</span><span class="token string">"https://work.weixin.qq.com/wework_admin/external_room/join/exceed?vcode=xxx"</span><span class="token punctuation">,</span><span class="token property">"image_url"</span><span class="token operator">:</span><span class="token string">"https://wework.qpic.cn/wwpic/xxx/0"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="7237dc9661e780437ac6bef05ff25874" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>链接消息为：link。String类型</td></tr><tr><td>title</td><td>消息标题。String类型</td></tr><tr><td>description</td><td>消息描述。String类型</td></tr><tr><td>link_url</td><td>链接url地址。String类型</td></tr><tr><td>image_url</td><td>链接图片url。String类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B6%88%E6%81%AF" data-sign="4c0a09b757f5f74d2a63852d4571d3e3" data-lines="1"><a class="anchor" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B6%88%E6%81%AF"></a>小程序消息</h4><div data-sign="0af67a2f3a490cdf83d1a56e6a4f97b6" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"11930598857592605935_1603875608"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kens"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmGAgeDQAAsgQetTQGqRbMxrkodpM3fA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875608691</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"weapp"</span><span class="token punctuation">,</span><span class="token property">"weapp"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"开始聊天前请仔细阅读服务须知事项"</span><span class="token punctuation">,</span><span class="token property">"description"</span><span class="token operator">:</span><span class="token string">"客户需同意存档聊天记录"</span><span class="token punctuation">,</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">"xxx@app"</span><span class="token punctuation">,</span><span class="token property">"displayname"</span><span class="token operator">:</span><span class="token string">"服务须知"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="4a2d9f9ec1603e294cd34528ed030e3f" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>消息为：weapp。String类型</td></tr><tr><td>title</td><td>消息标题。String类型</td></tr><tr><td>description</td><td>消息描述。String类型</td></tr><tr><td>username</td><td>用户名称。String类型</td></tr><tr><td>displayname</td><td>小程序名称。String类型</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="4cc09f720b44fc42fcef61e762a8f40c" data-type="p" data-lines="1"><strong>示例图：</strong></p><p data-sign="efaf35c62e0a5c8093fb2e3b09ad0baa" data-type="p" data-lines="2"><img src="images/91774/1d8f4de7.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF" data-sign="dcdbc5ff47c5a952344caaaedd6a67bd" data-lines="1"><a class="anchor" href="#%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF"></a>会话记录消息</h4><div data-sign="f9036819e93692c96f6cd44ec6b727dd" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"11354299838102555191_1603875658"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"ken"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icef"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875657905</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"chatrecord"</span><span class="token punctuation">,</span><span class="token property">"chatrecord"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"群聊"</span><span class="token punctuation">,</span><span class="token property">"item"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"ChatRecordText"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875610</span><span class="token punctuation">,</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token string">"{\"</span>content\"<span class="token operator">:</span>\"test\"<span class="token punctuation">}</span><span class="token string">","</span>from_chatroom<span class="token string">":false},{"</span>type<span class="token string">":"</span>ChatRecordText<span class="token string">","</span>msgtime<span class="token string">":1603875620,"</span>content<span class="token string">":"</span><span class="token punctuation">{</span>\"content\"<span class="token operator">:</span>\"test2\"<span class="token punctuation">}</span><span class="token string">","</span>from_chatroom"<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="d43bf0e225cad50ef840e44fafa59dff" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>消息为：chatrecord。String类型</td></tr><tr><td>title</td><td>聊天记录标题。String类型</td></tr><tr><td>item</td><td>消息记录内的消息内容，批量数据</td></tr></tbody></table></div><p data-sign="2cc30d3a7af8817276bfb87721764a23" data-type="p" data-lines="3"><strong>示例图：</strong><br><img src="images/91774/543ea288.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AFitem" data-sign="6fd7cdbad07a87a8f50c335f83cb4937" data-lines="1"><a class="anchor" href="#%E4%BC%9A%E8%AF%9D%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AFitem"></a>会话记录消息item</h4><div data-sign="5ac97f8d2c51cb8baaba45f449912c1a" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token property">"item"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"ChatRecordText"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875610</span><span class="token punctuation">,</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token string">"{\"</span>content\"<span class="token operator">:</span>\"test\"<span class="token punctuation">}</span><span class="token string">","</span>from_chatroom<span class="token string">":false},{"</span>type<span class="token string">":"</span>ChatRecordText<span class="token string">","</span>msgtime<span class="token string">":1603875620,"</span>content<span class="token string">":"</span><span class="token punctuation">{</span>\"content\"<span class="token operator">:</span>\"test2\"<span class="token punctuation">}</span><span class="token string">","</span>from_chatroom"<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">]</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="ed7f602e2cad5e5e4a0d728888b1ac3f" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>每条聊天记录的具体消息类型：ChatRecordText/ ChatRecordFile/ ChatRecordImage/ ChatRecordVideo/ ChatRecordLink/ ChatRecordLocation/ ChatRecordMixed ….</td></tr><tr><td>msgtime</td><td>消息时间，utc时间，单位秒。</td></tr><tr><td>content</td><td>消息内容。Json串，内容为对应类型的json。String类型</td></tr><tr><td>from_chatroom</td><td>是否来自群会话。Bool类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%BE%85%E5%8A%9E%E6%B6%88%E6%81%AF" data-sign="f5da35087be12a4bf5e8e6a0a7dee258" data-lines="1"><a class="anchor" href="#%E5%BE%85%E5%8A%9E%E6%B6%88%E6%81%AF"></a>待办消息</h4><div class="cherry-table-container" data-sign="a3100d95417cbf85a19411ec968293d1" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>todo。String类型</td></tr><tr><td>title</td><td>待办的来源文本。String类型</td></tr><tr><td>content</td><td>待办的具体内容。String类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E6%8A%95%E7%A5%A8%E6%B6%88%E6%81%AF" data-sign="fbfd3d45c924682bbe1ef6bb3534e685" data-lines="1"><a class="anchor" href="#%E6%8A%95%E7%A5%A8%E6%B6%88%E6%81%AF"></a>投票消息</h4><div class="cherry-table-container" data-sign="f770caf629cdb65efd99f81d6e531832" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>vote。String类型</td></tr><tr><td>votetitle</td><td>投票主题。String类型</td></tr><tr><td>voteitem</td><td>投票选项，可能多个内容。String数组</td></tr><tr><td>votetype</td><td>投票类型.101发起投票、102参与投票。Uint32类型</td></tr><tr><td>voteid</td><td>投票id，方便将参与投票消息与发起投票消息进行前后对照。String类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%A1%AB%E8%A1%A8%E6%B6%88%E6%81%AF" data-sign="9a3a301e28611c1ce83b8e3e71f09f88" data-lines="1"><a class="anchor" href="#%E5%A1%AB%E8%A1%A8%E6%B6%88%E6%81%AF"></a>填表消息</h4><div data-sign="5ddb2f954934c551675163c77c2ba2c2" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"2500536226619379797_1576034482"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"nick"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"XuJinSheng"</span><span class="token punctuation">,</span><span class="token string">"15108264797"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wrjc7bDwYAOAhf9quEwRRxyyoMm0QAAA"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1576034482344</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"collect"</span><span class="token punctuation">,</span><span class="token property">"collect"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"room_name"</span><span class="token operator">:</span><span class="token string">"这是一个群"</span><span class="token punctuation">,</span><span class="token property">"creator"</span><span class="token operator">:</span><span class="token string">"nick"</span><span class="token punctuation">,</span><span class="token property">"create_time"</span><span class="token operator">:</span><span class="token string">"2019-12-11 11:21:22"</span><span class="token punctuation">,</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"这是填表title"</span><span class="token punctuation">,</span><span class="token property">"details"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"ques"</span><span class="token operator">:</span><span class="token string">"表项1，文本"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"Text"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">"ques"</span><span class="token operator">:</span><span class="token string">"表项2，数字"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"Number"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"ques"</span><span class="token operator">:</span><span class="token string">"表项3，日期"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"Date"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token property">"ques"</span><span class="token operator">:</span><span class="token string">"表项4，时间"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"Time"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span> </span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="37da48a011cd11ef114342aa32a4aeca" data-lines="11">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>collect。String类型</td></tr><tr><td>room_name</td><td>填表消息所在的群名称。String类型</td></tr><tr><td>creator</td><td>创建者在群中的名字。String类型</td></tr><tr><td>create_time</td><td>创建的时间。String类型</td></tr><tr><td>title</td><td>表名。String类型</td></tr><tr><td>details</td><td>表内容。json数组类型</td></tr><tr><td>id</td><td>表项id。Uint64类型</td></tr><tr><td>ques</td><td>表项名称。String类型</td></tr><tr><td>type</td><td>表项类型，有Text(文本),Number(数字),Date(日期),Time(时间)。String类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E7%BA%A2%E5%8C%85%E6%B6%88%E6%81%AF" data-sign="ddb7556ba552d0e25ae571027a7f61af" data-lines="1"><a class="anchor" href="#%E7%BA%A2%E5%8C%85%E6%B6%88%E6%81%AF"></a>红包消息</h4><div data-sign="5daf061901a8bd347e7a6f118be99228" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"333590477316965370_1603877439"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kens"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"1000000444696"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603877439038</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"redpacket"</span><span class="token punctuation">,</span><span class="token property">"redpacket"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"wish"</span><span class="token operator">:</span><span class="token string">"恭喜发财，大吉大利"</span><span class="token punctuation">,</span><span class="token property">"totalcnt"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"totalamount"</span><span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="db20dbc6c7c3a5295bf3007ba3afa37e" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>redpacket。String类型</td></tr><tr><td>type</td><td>红包消息类型。1 普通红包、2 拼手气群红包、3 激励群红包。Uint32类型</td></tr><tr><td>wish</td><td>红包祝福语。String类型</td></tr><tr><td>totalcnt</td><td>红包总个数。Uint32类型</td></tr><tr><td>totalamount</td><td>红包总金额。Uint32类型，单位为分。</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E4%BC%9A%E8%AE%AE%E9%82%80%E8%AF%B7%E6%B6%88%E6%81%AF" data-sign="84120202e16e475a83e71e371db57c39" data-lines="1"><a class="anchor" href="#%E4%BC%9A%E8%AE%AE%E9%82%80%E8%AF%B7%E6%B6%88%E6%81%AF"></a>会议邀请消息</h4><div data-sign="4471e5ceac081b61cc63e2a8a1939cb3" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"5935786683775673543_1603877328"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"ken"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icef"</span><span class="token punctuation">,</span><span class="token string">"test"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wr2vOpDgAAN4zVWKbS"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603877328914</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"meeting"</span><span class="token punctuation">,</span><span class="token property">"meeting"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"topic"</span><span class="token operator">:</span><span class="token string">"夕会"</span><span class="token punctuation">,</span><span class="token property">"starttime"</span><span class="token operator">:</span><span class="token number">1603877400</span><span class="token punctuation">,</span><span class="token property">"endtime"</span><span class="token operator">:</span><span class="token number">1603881000</span><span class="token punctuation">,</span><span class="token property">"address"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"remarks"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"meetingid"</span><span class="token operator">:</span><span class="token number">1210342560</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="66338764db6dcfa2e0d64de847c2a272" data-lines="9">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>meeting。String类型</td></tr><tr><td>topic</td><td>会议主题。String类型</td></tr><tr><td>starttime</td><td>会议开始时间。Utc时间</td></tr><tr><td>endtime</td><td>会议结束时间。Utc时间。如为快速会议则该字段为空</td></tr><tr><td>address</td><td>会议地址。String类型。如为快速会议则该字段为空</td></tr><tr><td>remarks</td><td>会议备注。String类型。如为快速会议则该字段为空</td></tr><tr><td>meetingid</td><td>会议id。方便将发起、处理消息进行对照。uint64类型</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 id="%E4%BC%9A%E8%AE%AE%E6%8E%A7%E5%88%B6%E6%B6%88%E6%81%AF" data-sign="e6978cbd495176630475c08c5c25ea2a" data-lines="1"><a class="anchor" href="#%E4%BC%9A%E8%AE%AE%E6%8E%A7%E5%88%B6%E6%B6%88%E6%81%AF"></a>会议控制消息</h4><div data-sign="90f7ff50e11e408810b472cff37fa46a" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"action"</span><span class="token operator">:</span> <span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"18510382533"</span><span class="token punctuation">,</span><span class="token property">"info"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"yinhuiyou的快速会议 已结束"</span><span class="token punctuation">,</span><span class="token property">"meeting_id"</span><span class="token operator">:</span> <span class="token number">6072773153468854000</span><span class="token punctuation">,</span><span class="token property">"notification_type"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token property">"msgid"</span><span class="token operator">:</span> <span class="token string">"14158408185591086566_1700815962253"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span> <span class="token number">1700815958880</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span> <span class="token string">"meeting_notification"</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"DuDuDu"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"time"</span><span class="token operator">:</span> <span class="token string">"2023-11-24 16:52:38:880"</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="9a4bd04423b9888522d60f3e041a9d07" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>meeting_notification。String类型</td></tr><tr><td>meetingid</td><td>会议id。Uint64类型</td></tr><tr><td>notification_type</td><td>1表示有人加入了会议，2表示会议已经结束。Uint32类型</td></tr><tr><td>content</td><td>会议系统消息内容。String类型</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h4 id="%E5%88%87%E6%8D%A2%E4%BC%81%E4%B8%9A%E6%97%A5%E5%BF%97" data-sign="f438ac1b7590dc259fd999b93aede303" data-lines="1"><a class="anchor" href="#%E5%88%87%E6%8D%A2%E4%BC%81%E4%B8%9A%E6%97%A5%E5%BF%97"></a>切换企业日志</h4><div data-sign="ce276e8d0f3c2bab38d83f070890068d" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"125289002219525886280"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"switch"</span><span class="token punctuation">,</span><span class="token property">"time"</span><span class="token operator">:</span><span class="token number">1554119421840</span><span class="token punctuation">,</span><span class="token property">"user"</span><span class="token operator">:</span><span class="token string">"XuJinSheng"</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="d0785ae6802a7cfe2e5408cf09138fda" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgid</td><td>消息id，消息的唯一标识，企业可以使用此字段进行消息去重。String类型</td></tr><tr><td>action</td><td>消息动作，切换企业为switch。String类型</td></tr><tr><td>time</td><td>消息发送时间戳，utc时间，ms单位。</td></tr><tr><td>user</td><td>具体为切换企业的成员的userid。String类型</td></tr></tbody></table></div><p data-sign="7f35d3ed79ef24d1f6fd614258fe930e" data-type="p" data-lines="2">注：<strong>切换企业日志不是真正的消息，与上述消息结构不完全相同。</strong></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF" data-sign="b8c1a1bbdc4f7a9a781ba22d727d4848" data-lines="1"><a class="anchor" href="#%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF"></a>在线文档消息</h4><div data-sign="28b272f176d841fb174474fa789e9044" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"9732089160923053207_1603877765"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"ken"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icef"</span><span class="token punctuation">,</span><span class="token string">"test"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wrJawBCQAAStr3jxVxEH"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603877765291</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"docmsg"</span><span class="token punctuation">,</span><span class="token property">"doc"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"测试&amp;演示客户"</span><span class="token punctuation">,</span><span class="token property">"doc_creator"</span><span class="token operator">:</span><span class="token string">"test"</span><span class="token punctuation">,</span><span class="token property">"link_url"</span><span class="token operator">:</span><span class="token string">"https://doc.weixin.qq.com/txdoc/excel?docid=xxx"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="1262152bfbc5154ea2a498a0057e84d3" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>docmsg。String类型, 标识在线文档消息类型</td></tr><tr><td>title</td><td>在线文档名称</td></tr><tr><td>link_url</td><td>在线文档链接</td></tr><tr><td>doc_creator</td><td>在线文档创建者。本企业成员创建为userid；外部企业成员创建为external_userid</td></tr></tbody></table></div><p data-sign="0fe562b75ba40cc2244012434d381bc8" data-type="p" data-lines="2"><strong>示例图：</strong><br><img src="images/91774/1f306c0e.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="markdown%E6%A0%BC%E5%BC%8F%E6%B6%88%E6%81%AF" data-sign="6cd888b6aef6221ff36824984cc8f48f" data-lines="1"><a class="anchor" href="#markdown%E6%A0%BC%E5%BC%8F%E6%B6%88%E6%81%AF"></a>MarkDown格式消息</h4><div data-sign="0e9af34fe5c5ba10503a0216fbf91458" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"7546287934688259248_1603875715"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"ken"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icef"</span><span class="token punctuation">,</span><span class="token string">"test"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wr0SfLCgAAgCaCPeM33UNe"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603875715782</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"markdown"</span><span class="token punctuation">,</span><span class="token property">"info"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token string">"请前往系统查看，谢谢。"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="c8803a1bc6ca45190227c8ec2717bd1a" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>markdown。String类型, 标识MarkDown消息类型</td></tr><tr><td>info</td><td>markdown消息内容，目前为机器人发出的消息</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF" data-sign="46283169255923039912ffba4b0851dc" data-lines="1"><a class="anchor" href="#%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF"></a>图文消息</h4><div data-sign="919d47ea4aa8550fe5871fc0409dfeda" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"118732825779547782215"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"kens"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icef"</span><span class="token punctuation">,</span><span class="token string">"test"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wrErxtDgAA0jgXE5"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603876045165</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"news"</span><span class="token punctuation">,</span><span class="token property">"info"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"item"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"service "</span><span class="token punctuation">,</span><span class="token property">"description"</span><span class="token operator">:</span><span class="token string">"test"</span><span class="token punctuation">,</span><span class="token property">"url"</span><span class="token operator">:</span><span class="token string">"https://xxx"</span><span class="token punctuation">,</span><span class="token property">"picurl"</span><span class="token operator">:</span><span class="token string">"https://www.qq.com/xxx.jpg"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="fc572bd694cdbf2bbc9a555bc5d0af66" data-lines="9">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>news。String类型, 标识图文消息类型</td></tr><tr><td>info</td><td>图文消息的内容</td></tr><tr><td>item</td><td>图文消息数组，每个item结构包含title、description、url、picurl等结构</td></tr><tr><td>title</td><td>图文消息标题。String类型</td></tr><tr><td>description</td><td>图文消息描述。String类型</td></tr><tr><td>url</td><td>图文消息点击跳转地址。String类型</td></tr><tr><td>picurl</td><td>图文消息配图的url。String类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E6%97%A5%E7%A8%8B%E6%B6%88%E6%81%AF" data-sign="da766544e8d79c6e763ad8cc182e97fc" data-lines="1"><a class="anchor" href="#%E6%97%A5%E7%A8%8B%E6%B6%88%E6%81%AF"></a>日程消息</h4><div data-sign="e6d8bc635b72784343a5e75d7ce4526b" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"2345881211604379705_1603877680"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"ken"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"icef"</span><span class="token punctuation">,</span><span class="token string">"test"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wr2LO0CAAAFrTZCGWWAxBA"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603877680795</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"calendar"</span><span class="token punctuation">,</span><span class="token property">"calendar"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"xxx业绩复盘会"</span><span class="token punctuation">,</span><span class="token property">"creatorname"</span><span class="token operator">:</span><span class="token string">"test"</span><span class="token punctuation">,</span><span class="token property">"attendeename"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"aaa"</span><span class="token punctuation">,</span><span class="token string">"bbb"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"starttime"</span><span class="token operator">:</span><span class="token number">1603882800</span><span class="token punctuation">,</span><span class="token property">"endtime"</span><span class="token operator">:</span><span class="token number">1603886400</span><span class="token punctuation">,</span><span class="token property">"place"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"remarks"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="2efa619b78820767f09f36bae01bdf43" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>calendar。String类型, 标识日程消息类型</td></tr><tr><td>title</td><td>日程主题。String类型</td></tr><tr><td>creatorname</td><td>日程组织者。String类型</td></tr><tr><td>attendeename</td><td>日程参与人。数组，内容为String类型</td></tr><tr><td>starttime</td><td>日程开始时间。Utc时间，单位秒</td></tr><tr><td>endtime</td><td>日程结束时间。Utc时间，单位秒</td></tr><tr><td>place</td><td>日程地点。String类型</td></tr><tr><td>remarks</td><td>日程备注。String类型</td></tr></tbody></table></div><p data-sign="4767693fe8287d7339d56dee29bb134f" data-type="p" data-lines="2"><strong>示例图：</strong><br><img src="images/91774/05766f19.png" alt=""></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E6%B7%B7%E5%90%88%E6%B6%88%E6%81%AF" data-sign="0f55c11b976e15fe6731780f67cb40c2" data-lines="1"><a class="anchor" href="#%E6%B7%B7%E5%90%88%E6%B6%88%E6%81%AF"></a>混合消息</h4><div data-sign="38099acc302e6e3c29acf52ad6d69439" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"DAQQluDa4QUY0On4kYSABAMgzPrShAE="</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"HeMiao"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"HeChangTian"</span><span class="token punctuation">,</span><span class="token string">"LiuZeYu"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wr_tZ2BwAAUwHpYMwy9cIWqnlU3Hzqfg"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1577414359072</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"mixed"</span><span class="token punctuation">,</span><span class="token property">"mixed"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"item"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text"</span><span class="token punctuation">,</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token string">"{\"</span>content\"<span class="token operator">:</span>\"你好<span class="token punctuation">[</span>微笑<span class="token punctuation">]</span>\\n\"<span class="token punctuation">}</span><span class="token string">"},{"</span>type<span class="token string">":"</span>image<span class="token string">","</span>content<span class="token string">":"</span><span class="token punctuation">{</span>\"md5sum\"<span class="token operator">:</span>\"368b6c18c82e6441bfd89b343e9d2429\"<span class="token punctuation">,</span>\"filesize\"<span class="token operator">:</span><span class="token number">13177</span><span class="token punctuation">,</span>\"sdkfileid\"<span class="token operator">:</span>\"CtYBMzA2OTAyMDEwMjA0NjIzMDYwMDIwMTAwMDWwNDVmYWY4Y2Q3MDIwMzBmNTliMTAyMDQwYzljNTQ3NzAyMDQ1ZTA1NmFlMjA0MjQ2NjM0NjIzNjY2MzYzNTMyMmQzNzYxMzQ2NDJkMzQ2MjYxNjQyZDM4MzMzMzM4MmQ3MTYyMzczMTM4NjM2NDYxMzczMjY2MzkwMjAxMDAwMjAzMDIwMDEwMDQxMDM2OGI2YzE4YzgyZTY0NDFiZmQ4OWIyNDNlOWQyNDI4MDIwMTAyMDIwMTAwMDQwMBI4TkRkZk2UWTRPRGcxTVRneE5URTFNRGc1TVY4eE1UTTFOak0yTURVeFh6RTFOemMwTVRNek5EYz0aIDQzMTY5NDFlM2MxZDRmZjhhMjEwY2M0NDQzZGUXOTEy\"<span class="token punctuation">}</span>"<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="2b711dd285c27bacbf6c8be90d0d9178" data-lines="10">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgid</td><td>消息id，消息的唯一标识，企业可以使用此字段进行消息去重。String类型</td></tr><tr><td>action</td><td>消息动作，目前有send(发送消息)/recall(撤回消息)/switch(切换企业日志)三种类型。String类型</td></tr><tr><td>from</td><td>消息发送方id。同一企业内容为userid，非相同企业为external_userid。消息如果是机器人发出，也为external_userid。String类型</td></tr><tr><td>tolist</td><td>消息接收方列表，可能是多个，同一个企业内容为userid，非相同企业为external_userid。数组，内容为string类型</td></tr><tr><td>roomid</td><td>群聊消息的群id。如果是单聊则为空。String类型</td></tr><tr><td>msgtime</td><td>消息发送时间戳，utc时间，ms单位。</td></tr><tr><td>msgtype</td><td>mixed。String类型, 标识混合消息类型</td></tr><tr><td>mixed</td><td>消息内容。可包含图片、文字、表情等多种消息。Object类型</td></tr></tbody></table></div><p data-sign="a7697fdd2db13f5da8db5ebc5c2bce97" data-type="p" data-lines="3">注：mixed内包含一个item数组，其中每个元素由type与content组成，type和content均为String类型。JSON解析content后即可获取对应type类型的消息内容。<br><strong>示例图：</strong><br><img src="images/91774/75ab692c.png" alt="混合消息示例图" title="混合消息示例图"></p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E9%9F%B3%E9%A2%91%E5%AD%98%E6%A1%A3%E6%B6%88%E6%81%AF" data-sign="93e1465bfee63523acebb08055c3158f" data-lines="1"><a class="anchor" href="#%E9%9F%B3%E9%A2%91%E5%AD%98%E6%A1%A3%E6%B6%88%E6%81%AF"></a>音频存档消息</h4><div data-sign="6c407240681a403f52921a6ffe509702" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"17952229780246929345_1594197637"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"wo137MCgAAYW6pIiKKrDe5SlzEhSgwbA"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wo137MCgAAYW6pIiKKrDe5SlzEhSgwbA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1594197581203</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"meeting_voice_call"</span><span class="token punctuation">,</span><span class="token property">"voiceid"</span><span class="token operator">:</span><span class="token string">"grb8a4c48a3c094a70982c518d55e40557"</span><span class="token punctuation">,</span><span class="token property">"meeting_voice_call"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"endtime"</span><span class="token operator">:</span><span class="token number">1594197635</span><span class="token punctuation">,</span><span class="token property">"sdkfileid"</span><span class="token operator">:</span><span class="token string">"CpsBKjAqd0xhb2JWRUJldGtwcE5DVTB6UjRUalN6c09vTjVyRnF4YVJ5M24rZC9YcHF3cHRPVzRwUUlaMy9iTytFcnc0SlBkZDU1YjRNb0MzbTZtRnViOXV5WjUwZUIwKzhjbU9uRUlxZ3pyK2VXSVhUWVN2ejAyWFJaTldGSkRJVFl0aUhkcVdjbDJ1L2RPbjJsRlBOamJaVDNnPT0SOE5EZGZNVFk0T0RnMU16YzVNVGt5T1RJMk9GOHhNalk0TXpBeE9EZzJYekUxT1RReE9UYzJNemM9GiA3YTYyNzA3NTY4Nzc2MTY3NzQ2MTY0NzA2ZTc4NjQ2OQ=="</span><span class="token punctuation">,</span><span class="token property">"demofiledata"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"filename"</span><span class="token operator">:</span><span class="token string">"65eb1cdd3e7a3c1740ecd74220b6c627.docx"</span><span class="token punctuation">,</span><span class="token property">"demooperator"</span><span class="token operator">:</span><span class="token string">"wo137MCgAAYW6pIiKKrDe5SlzEhSgwbA"</span><span class="token punctuation">,</span><span class="token property">"starttime"</span><span class="token operator">:</span><span class="token number">1594197599</span><span class="token punctuation">,</span><span class="token property">"endtime"</span><span class="token operator">:</span><span class="token number">1594197609</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"sharescreendata"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"share"</span><span class="token operator">:</span><span class="token string">"wo137MCgAAYW6pIiKKrDe5SlzEhSgwbA"</span><span class="token punctuation">,</span><span class="token property">"starttime"</span><span class="token operator">:</span><span class="token number">1594197624</span><span class="token punctuation">,</span><span class="token property">"endtime"</span><span class="token operator">:</span><span class="token number">1594197624</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="7a2421bb0844a1e510ab58c752d33e11" data-lines="21">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgid</td><td>消息id，消息的唯一标识，企业可以使用此字段进行消息去重。String类型</td></tr><tr><td>action</td><td>消息动作，目前有send(发送消息)/recall(撤回消息)/switch(切换企业日志)三种类型。String类型</td></tr><tr><td>from</td><td>消息发送方id。同一企业内容为userid，非相同企业为external_userid。消息如果是机器人发出，也为external_userid。String类型</td></tr><tr><td>tolist</td><td>消息接收方列表，可能是多个，同一个企业内容为userid，非相同企业为external_userid。数组，内容为string类型</td></tr><tr><td>msgtime</td><td>消息发送时间戳，utc时间,单位毫秒。</td></tr><tr><td>msgtype</td><td>meeting_voice_call。String类型, 标识音频存档消息类型</td></tr><tr><td>voiceid</td><td>String类型, 音频id</td></tr><tr><td>meeting_voice_call</td><td>音频消息内容。包括结束时间、fileid，可能包括多个demofiledata、sharescreendata消息，demofiledata表示文档共享信息，sharescreendata表示屏幕共享信息。Object类型</td></tr><tr><td>endtime</td><td>音频结束时间。uint32类型</td></tr><tr><td>sdkfileid</td><td>sdkfileid。音频媒体下载的id。String类型</td></tr><tr><td>demofiledata</td><td>文档分享对象，Object类型</td></tr><tr><td>filename</td><td>文档共享名称。String类型</td></tr><tr><td>demooperator</td><td>文档共享操作用户的id。String类型</td></tr><tr><td>starttime</td><td>文档共享开始时间。Uint32类型</td></tr><tr><td>endtime</td><td>文档共享结束时间。Uint32类型</td></tr><tr><td>sharescreendata</td><td>屏幕共享对象，Object类型</td></tr><tr><td>share</td><td>屏幕共享用户的id。String类型</td></tr><tr><td>starttime</td><td>屏幕共享开始时间。Uint32类型</td></tr><tr><td>endtime</td><td>屏幕共享结束时间。Uint32类型</td></tr></tbody></table></div><p data-sign="2fff167503b485d0a288c17e68246708" data-type="p" data-lines="1">注：如果音频过程中包括文档演示或屏幕共享，meeting_voice_call内会包含demofiledata数组跟sharescreendata数组，对应音频过程中的多次文档演示跟屏幕共享。</p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E9%9F%B3%E9%A2%91%E5%85%B1%E4%BA%AB%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF" data-sign="bff5e52c89acc9376d01a101abc5d34b" data-lines="1"><a class="anchor" href="#%E9%9F%B3%E9%A2%91%E5%85%B1%E4%BA%AB%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF"></a>音频共享文档消息</h4><div data-sign="b56a814c02cd9a6f85a82b48a1cd9f0d" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"16527954622422422847_1594199256"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"18002520162"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wo137MCgAAYW6pIiKKrDe5SlzEhSgwbA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1594199235014</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"voip_doc_share"</span><span class="token punctuation">,</span><span class="token property">"voipid"</span><span class="token operator">:</span><span class="token string">"gr2751c98b19300571f8afb3b74514bd32"</span><span class="token punctuation">,</span><span class="token property">"voip_doc_share"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"filename"</span><span class="token operator">:</span><span class="token string">"欢迎使用微盘.pdf.pdf"</span><span class="token punctuation">,</span><span class="token property">"md5sum"</span><span class="token operator">:</span><span class="token string">"ff893900f24e55e216e617a40e5c4648"</span><span class="token punctuation">,</span><span class="token property">"filesize"</span><span class="token operator">:</span><span class="token number">4400654</span><span class="token punctuation">,</span><span class="token property">"sdkfileid"</span><span class="token operator">:</span><span class="token string">"CpsBKjAqZUlLdWJMd2gvQ1JxMzd0ZjlpdW5mZzJOOE9JZm5kbndvRmRqdnBETjY0QlcvdGtHSFFTYm95dHM2VlllQXhkUUN5KzRmSy9KT3pudnA2aHhYZFlPemc2aVZ6YktzaVh3YkFPZHlqNnl2L2MvcGlqcVRjRTlhZEZsOGlGdHJpQ2RWSVNVUngrVFpuUmo3TGlPQ1BJemlRPT0SOE5EZGZNVFk0T0RnMU16YzVNVGt5T1RJMk9GODFNelUyTlRBd01qQmZNVFU1TkRFNU9USTFOZz09GiA3YTcwNmQ2Zjc5NjY3MDZjNjY2Zjc4NzI3NTZmN2E2YQ=="</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="247401cbec85603eee4ac8f14c1d97b0" data-lines="14">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgid</td><td>消息id，消息的唯一标识，企业可以使用此字段进行消息去重。String类型</td></tr><tr><td>action</td><td>消息动作，目前有send(发送消息)/recall(撤回消息)/switch(切换企业日志)三种类型。String类型</td></tr><tr><td>from</td><td>消息发送方id。同一企业内容为userid，非相同企业为external_userid。消息如果是机器人发出，也为external_userid。String类型</td></tr><tr><td>tolist</td><td>消息接收方列表，可能是多个，同一个企业内容为userid，非相同企业为external_userid。数组，内容为string类型</td></tr><tr><td>msgtime</td><td>消息发送时间戳，utc时间，单位毫秒。</td></tr><tr><td>msgtype</td><td>voip_doc_share。String类型, 标识音频共享文档类型</td></tr><tr><td>voipid</td><td>String类型, 音频id</td></tr><tr><td>voip_doc_share</td><td>共享文档消息内容。包括filename、md5sum、filesize、sdkfileid字段。Object类型</td></tr><tr><td>filename</td><td>文档共享文件名称。String类型</td></tr><tr><td>md5sum</td><td>共享文件的md5值。String类型</td></tr><tr><td>filesize</td><td>共享文件的大小。Uint64类型</td></tr><tr><td>sdkfileid</td><td>共享文件的sdkfile，通过此字段进行媒体数据下载。String类型</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E4%BA%92%E9%80%9A%E7%BA%A2%E5%8C%85%E6%B6%88%E6%81%AF" data-sign="6fb7df4c20252961c65004927d191e67" data-lines="1"><a class="anchor" href="#%E4%BA%92%E9%80%9A%E7%BA%A2%E5%8C%85%E6%B6%88%E6%81%AF"></a>互通红包消息</h4><div data-sign="976e68b6902e7162fc475167af1ba506" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"8632214264349267353_1603786184"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"woJ7ijBwAAmqwojT8r_DaNMbr_NAvaag"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"woJ7ijBwAA6SjS_sIyPLZtyEPJlT7Cfw"</span><span class="token punctuation">,</span><span class="token string">"tiny-six768"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">"wrJ7ijBwAAG1vly_DzVI72Ghc-PtA5Dw"</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1603786183955</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"external_redpacket"</span><span class="token punctuation">,</span><span class="token property">"redpacket"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"wish"</span><span class="token operator">:</span><span class="token string">"恭喜发财，大吉大利"</span><span class="token punctuation">,</span><span class="token property">"totalcnt"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">"totalamount"</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="8b328e309b1b467bd848b0ecb9de768f" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>external_redpacket。String类型。出现在本企业与外部企业群聊发送的红包、或者本企业与微信单聊、群聊发送的红包消息场景下。</td></tr><tr><td>type</td><td>红包消息类型。1 普通红包、2 拼手气群红包。Uint32类型</td></tr><tr><td>wish</td><td>红包祝福语。String类型</td></tr><tr><td>totalcnt</td><td>红包总个数。Uint32类型</td></tr><tr><td>totalamount</td><td>红包总金额。Uint32类型，单位为分。</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><h4 id="%E8%A7%86%E9%A2%91%E5%8F%B7%E6%B6%88%E6%81%AF" data-sign="1fbf0b650ce12580c174a3fd27d5eae6" data-lines="1"><a class="anchor" href="#%E8%A7%86%E9%A2%91%E5%8F%B7%E6%B6%88%E6%81%AF"></a>视频号消息</h4><div data-sign="c7194e27d649c1312016519ea7c0e134" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"5702551662099334532_1619511584_external"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"yangzhu1"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmJSb5CgAA4aWXWndJspQGpJMDbsMwMA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1619511584444</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"sphfeed"</span><span class="token punctuation">,</span><span class="token property">"sphfeed"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"feed_type"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token property">"sph_name"</span><span class="token operator">:</span><span class="token string">"云游天地旅行家"</span><span class="token punctuation">,</span><span class="token property">"feed_desc"</span><span class="token operator">:</span><span class="token string">"瑞士丨盖尔默缆车，名副其实的过山车~\n\n#旅行#风景#热门"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="8145c38a67fc05fec0c0b53b4016a322" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>msgtype</td><td>sphfeed。String类型, 标识视频号消息类型。</td></tr><tr><td>feed_type</td><td>视频号消息类型。2 图片、4 视频、9 直播。Uint32类型</td></tr><tr><td>sph_name</td><td>视频号账号名称。String类型</td></tr><tr><td>feed_desc</td><td>视频号消息描述。String类型</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="e27da2f129bf8100652dd8109be7c071" data-type="p" data-lines="1"><strong>消息容量评估：以平均群大小评估，每条消息平均大小约1k；最大群消息评估，每条消息约50k</strong></p><h4 id="%E9%9F%B3%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D" data-sign="185c83a359eea52977b41de496edf81c" data-lines="2"><a class="anchor" href="#%E9%9F%B3%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D"></a>音视频通话</h4><div data-sign="ff3a237e07cfee15a699deda0d488734" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"10950316726562067988_1666601563058"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"icef"</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"WoBeiQi..."</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1666601558876</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"voiptext"</span><span class="token punctuation">,</span><span class="token property">"info"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"callduration"</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token property">"invitetype"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="db13e8146eee3a265589a880d1158e75" data-lines="6">
        <table class="cherry-table"><thead><tr><th align="left"></th><th>&nbsp;</th></tr></thead><tbody><tr><td align="left">参数</td><td>说明</td></tr><tr><td align="left">msgtype</td><td>voiptext, String类型</td></tr><tr><td align="left">callduration</td><td>通话时长，单位秒，uint32类型</td></tr><tr><td align="left">invitetype</td><td>通话类型，uint32类型<br>1; //单人视频通话<br>2; //单人语音通话<br>3; //多人视频通话<br>4; //多人语音通话</td></tr></tbody></table></div><div data-sign="54f89667e726b721aad564c0c2e60856" data-type="div" data-lines="4"><br><div class="colorful_tips colorful_tips_tip"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSI4IiBmaWxsPSIjMTU4ODMxIi8+PHBhdGggZD0iTTUgNS44NTkwOUM1IDYuMjczMyA1LjMzNTc5IDYuNjA5MDkgNS43NSA2LjYwOTA5QzYuMTY0MjEgNi42MDkwOSA2LjUgNi4yNzMzIDYuNSA1Ljg1OTA5SDVaTTcuMjUgOS4yNUM3LjI1IDkuNjY0MjEgNy41ODU3OSAxMCA4IDEwQzguNDE0MjEgMTAgOC43NSA5LjY2NDIxIDguNzUgOS4yNUg3LjI1Wk04LjEwMDA2IDcuOTY2MTNMOC4wNjkzMiA3LjIxNjc2TDguMTAwMDYgNy45NjYxM1pNOS41IDUuODU5MDlDOS41IDYuNTQ2MjkgOC45MDkgNy4xODIzMiA4LjA2OTMyIDcuMjE2NzZMOC4xMzA4IDguNzE1NUM5LjY4MzUzIDguNjUxODEgMTEgNy40Mzg2NyAxMSA1Ljg1OTA5SDkuNVpNNi41IDUuODU5MDlDNi41IDUuMTUzNDQgNy4xMjUxNCA0LjUgOCA0LjVWM0M2LjM4OTU4IDMgNSA0LjIzNTExIDUgNS44NTkwOUg2LjVaTTggNC41QzguODc0ODYgNC41IDkuNSA1LjE1MzQ0IDkuNSA1Ljg1OTA5SDExQzExIDQuMjM1MTEgOS42MTA0MiAzIDggM1Y0LjVaTTcuMjUgOC4wNjgxOFY5LjI1SDguNzVWOC4wNjgxOEg3LjI1Wk04LjA2OTMyIDcuMjE2NzZDNy42MzI4MyA3LjIzNDY3IDcuMjUgNy41OTAzOCA3LjI1IDguMDY4MThIOC43NUM4Ljc1IDguNDM1NTMgOC40NTY5MiA4LjcwMjEzIDguMTMwOCA4LjcxNTVMOC4wNjkzMiA3LjIxNjc2WiIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTIiIHI9IjEiIGZpbGw9IndoaXRlIi8+PC9zdmc+">提示</div><div class="colorful_tips_cnt">音视频通话分为微信互通通话和普通通话两种类型。<br>微信互通：1次音视频通话只会产生1条记录。<br>普通通话：1次音视频通话会产生多条记录，由参与人数决定。<br></div></div></div><h4 id="%E5%BE%AE%E7%9B%98%E6%96%87%E4%BB%B6" data-sign="3c2d1541dd17608e66aa524fdc2eda59" data-lines="2"><a class="anchor" href="#%E5%BE%AE%E7%9B%98%E6%96%87%E4%BB%B6"></a>微盘文件</h4><div data-sign="9e3949c15efab4e99d9c72c0d52c0a13" data-type="codeBlock" data-lines="3">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span><span class="token property">"msgid"</span><span class="token operator">:</span><span class="token string">"904076622482680588_1666602581569_external"</span><span class="token punctuation">,</span><span class="token property">"action"</span><span class="token operator">:</span><span class="token string">"send"</span><span class="token punctuation">,</span><span class="token property">"from"</span><span class="token operator">:</span><span class="token string">"WoBeiQi..."</span><span class="token punctuation">,</span><span class="token property">"tolist"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmYKhyDwAAxda9Vrt7e6h0CgRhRVlGdQ"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"roomid"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token property">"msgtime"</span><span class="token operator">:</span><span class="token number">1666602577356</span><span class="token punctuation">,</span><span class="token property">"msgtype"</span><span class="token operator">:</span><span class="token string">"qydiskfile"</span><span class="token punctuation">,</span><span class="token property">"info"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"filename"</span><span class="token operator">:</span><span class="token string">".sys.log"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><div class="cherry-table-container" data-sign="2616012e6c38e083c7928fa76a46ef3c" data-lines="5">
        <table class="cherry-table"><thead><tr><th align="left"></th><th>&nbsp;</th></tr></thead><tbody><tr><td align="left">参数</td><td>说明</td></tr><tr><td align="left">msgtype</td><td>qydiskfile, String类型</td></tr><tr><td align="left">filename</td><td>文件名称，String类型</td></tr></tbody></table></div><h2 id="%E8%8E%B7%E5%8F%96%E5%AA%92%E4%BD%93%E6%96%87%E4%BB%B6" data-sign="7a7f4b279d6c2338222d9ab3d5f22de5" data-lines="2"><a class="anchor" href="#%E8%8E%B7%E5%8F%96%E5%AA%92%E4%BD%93%E6%96%87%E4%BB%B6"></a>获取媒体文件</h2><p data-sign="6c025e6543499a4eb91f80c53c7c5aa6" data-type="p" data-lines="1">针对图片、文件等媒体数据，提供sdk接口拉取数据内容。调用频率不可超过25000次/分钟。</p><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><p data-sign="58f6889c9f40a867c02e8c81a00f7063" data-type="p" data-lines="1"><strong>请求参数说明：</strong></p><div class="cherry-table-container" data-sign="d4ecec90c9a227208cc72f60bcf5e159" data-lines="8">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>sdk</td><td>是</td><td>初始化的sdk对象</td></tr><tr><td>indexbuf</td><td>是</td><td>媒体消息分片拉取，需要填入每次拉取的索引信息。首次不需要填写，后续每次调用只需要将上次调用返回的outindexbuf填入即可。</td></tr><tr><td>sdkfileid</td><td>是</td><td>消息体内容中的sdkfileid信息。</td></tr><tr><td>proxy</td><td>否</td><td>使用代理的请求，需要传入代理的链接。如：socks5://10.0.0.1:8081 或者 http://10.0.0.1:8081</td></tr><tr><td>passwd</td><td>否</td><td>代理账号密码，需要传入代理的账号密码。如 user_name:passwd_123</td></tr><tr><td>timeout</td><td>是</td><td>超时时间，单位秒</td></tr></tbody></table></div><p data-sign="72b0602c87a86b9a64c0283bb789372b" data-type="p" data-lines="1"><strong>返回参数说明：</strong></p><div class="cherry-table-container" data-sign="cb7e9cad9e050e9601da5230a70e7efe" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>media_data</td><td>是</td><td>返回本次拉取的媒体数据.MediaData结构体.内容包括data(数据内容)/outindexbuf(下次索引)/is_finish(拉取完成标记)</td></tr></tbody></table></div><div data-sign="3a846a0757a3545771e7211e33bfe3b2" data-type="codeBlock" data-lines="28">
      <pre class="language-c"><code class="language-c wrap"><span class="code-line"><span class="token comment">/**</span></span>
<span class="code-line"><span class="token comment">	 * 拉取媒体消息函数</span></span>
<span class="code-line"><span class="token comment">	 * Return值=0表示该API调用成功</span></span>
<span class="code-line"><span class="token comment">	 * </span></span>
<span class="code-line"><span class="token comment">	 *</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  sdk				NewSdk返回的sdk指针</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  sdkFileid		从GetChatData返回的聊天消息中，媒体消息包括的sdkfileid</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  indexbuf		媒体消息分片拉取，需要填入每次拉取的索引信息。首次不需要填写，后续每次调用只需要将上次调用返回的outindexbuf填入即可。</span></span>
<span class="code-line"><span class="token comment">	  * @param [in]  proxy			使用代理的请求，需要传入代理的链接。如：socks5://10.0.0.1:8081 或者 http://10.0.0.1:8081</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  passwd			代理账号密码，需要传入代理的账号密码。如 user_name:passwd_123</span></span>
<span class="code-line"><span class="token comment">	 * @param [in]  timeout			超时时间，单位秒</span></span>
<span class="code-line"><span class="token comment">	 * @param [out] media_data		返回本次拉取的媒体数据.MediaData结构体.内容包括data(数据内容)/outindexbuf(下次索引)/is_finish(拉取完成标记)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token comment">	 * @param [out] outindexbuf		返回下次访问需要的索引信息</span></span>
<span class="code-line"><span class="token comment">	 * @param [out] data			返回本次访问返回的媒体数据内容，解密后内容，如分片数据需累加到文件存储.单次最大返回512K字节</span></span>
<span class="code-line"><span class="token comment">	 * @param [out] is_finish		标识是否全部拉取完成，1完成、0未完成</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="token comment">	 </span></span>
<span class="code-line"><span class="token comment">	 *</span></span>
<span class="code-line"><span class="token comment">	 * @return 返回是否调用成功</span></span>
<span class="code-line"><span class="token comment">	 *      0   - 成功</span></span>
<span class="code-line"><span class="token comment">	 *      !=0 - 失败</span></span>
<span class="code-line"><span class="token comment">	 */</span></span>
<span class="code-line">	<span class="token keyword">int</span> <span class="token function">GetMediaData</span><span class="token punctuation">(</span>WeWorkFinanceSdk_t<span class="token operator">*</span> sdk<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> indexbuf<span class="token punctuation">,</span></span>
<span class="code-line">                     <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> sdkFileid<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>proxy<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> passwd<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">,</span> MediaData_t<span class="token operator">*</span> media_data<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E8%8E%B7%E5%8F%96%E6%9C%BA%E5%99%A8%E4%BA%BA%E4%BF%A1%E6%81%AF" data-sign="c483d55499b966ac0f38f597bfff3205" data-lines="1"><a class="anchor" href="#%E8%8E%B7%E5%8F%96%E6%9C%BA%E5%99%A8%E4%BA%BA%E4%BF%A1%E6%81%AF"></a>获取机器人信息</h2><p data-sign="8a8ce128abc368ee474e8eb93c878fa8" data-type="p" data-lines="1">通过robot_id获取机器人的名称和创建者。调用频率不可超过600次/分钟。</p><p data-sign="ec5b3400004c97ca8c92e29bc634547e" data-type="p" data-lines="2"><strong>请求方式：</strong>GET（<strong>HTTPS</strong>）</p><p data-sign="ffe8d5cddbaa6e945e6297116b3050b1" data-type="p" data-lines="2"><strong>请求地址：</strong>https://qyapi.weixin.qq.com/cgi-bin/msgaudit/get_robot_info?access_token=ACCESS_TOKEN&amp;robot_id=ROBOT_ID</p><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="e4e79c5a14cc7f5d951e5d86f7ccdf96" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证</td></tr><tr><td>robot_id</td><td>是</td><td>机器人ID。</td></tr></tbody></table></div><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><p data-sign="6b07968980c1b5e0e397c0207fda5753" data-type="p" data-lines="2">只能通过会话存档的access_token获取。</p><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="2"><strong>返回结果：</strong></p><div data-sign="c4c7dd622b00de6c97570d4b6284744f" data-type="codeBlock" data-lines="12">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"robot_id"</span><span class="token operator">:</span> <span class="token string">"wbxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"机器人A"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"creator_userid"</span><span class="token operator">:</span> <span class="token string">"zhangsan"</span></span>
<span class="code-line">	<span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="f982152fe14d646e911f5424354c256c" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>返回码</td></tr><tr><td>errmsg</td><td>对返回码的文本描述内容</td></tr><tr><td>robot_id</td><td>机器人ID</td></tr><tr><td>name</td><td>机器人名称</td></tr><tr><td>creator_userid</td><td>机器人创建者的UserID</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E5%B7%A5%E5%85%B7%E6%8E%A5%E5%8F%A3" data-sign="2a91e76feadf2f2276dc71c1b6eb2614" data-lines="1"><a class="anchor" href="#%E5%B7%A5%E5%85%B7%E6%8E%A5%E5%8F%A3"></a>工具接口</h2><div data-sign="bfaa0cee212fbaae375bf4cde97a6a52" data-type="codeBlock" data-lines="36">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line">	<span class="token comment">/*</span></span>
<span class="code-line"><span class="token comment">     * @brief 释放sdk，和NewSdk成对使用</span></span>
<span class="code-line"><span class="token comment">     * @return </span></span>
<span class="code-line"><span class="token comment">	*/</span></span>
<span class="code-line">    void DestroySdk(WeWorkFinanceSdk_t* sdk);</span>
<span class="code-line"></span>
<span class="code-line">	</span>
<span class="code-line">    Slice_t* NewSlice();</span>
<span class="code-line"></span>
<span class="code-line">    <span class="token comment">/*</span></span>
<span class="code-line"><span class="token comment">     * @brief 释放slice，和NewSlice成对使用</span></span>
<span class="code-line"><span class="token comment">     * @return </span></span>
<span class="code-line"><span class="token comment">     */</span></span>
<span class="code-line">    void FreeSlice(Slice_t* slice);</span>
<span class="code-line"></span>
<span class="code-line">    <span class="token comment">/*</span></span>
<span class="code-line"><span class="token comment">     * @brief 为其他语言提供读取接口</span></span>
<span class="code-line"><span class="token comment">     * @return 返回buf指针</span></span>
<span class="code-line"><span class="token comment">     *     !=NULL - 成功</span></span>
<span class="code-line"><span class="token comment">     *     NULL   - 失败</span></span>
<span class="code-line"><span class="token comment">     */</span></span>
<span class="code-line">    char* GetContentFromSlice(Slice_t* slice);</span>
<span class="code-line"></span>
<span class="code-line">	<span class="token comment">// 媒体记录相关工具</span></span>
<span class="code-line"></span>
<span class="code-line">    MediaData_t*  NewMediaData();</span>
<span class="code-line">	void FreeMediaData(MediaData_t* media_data);</span>
<span class="code-line"></span>
<span class="code-line">    char* GetOutIndexBuf(MediaData_t* media_data);</span>
<span class="code-line"></span>
<span class="code-line">    char* GetData(MediaData_t* media_data);</span>
<span class="code-line"></span>
<span class="code-line">    int IsMediaDataFinish(MediaData_t* media_data);</span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>