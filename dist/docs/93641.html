<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>在微信中观看直播或直播回放 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        在微信中观看直播或直播回放
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2023/12/01</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="2f9e84ecead9a18dc8f45ca1baea5356-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E8%A7%82%E7%9C%8B%E7%9B%B4%E6%92%AD%E5%87%AD%E8%AF%81" class="level-2">获取微信观看直播凭证</a></li><li class="toc-li"><a href="#%E5%BE%AE%E4%BF%A1h5%E9%A1%B5%E9%9D%A2%E8%BF%9B%E5%85%A5%E7%9B%B4%E6%92%AD%E9%97%B4" class="level-2">微信H5页面进入直播间</a></li><li class="toc-li"><a href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BF%9B%E5%85%A5%E7%9B%B4%E6%92%AD%E9%97%B4" class="level-2">微信小程序进入直播间</a></li></dir><p data-sign="a5d00c791786cc4c1b77771afe09516a" data-type="p" data-lines="2">通过微信观看直播的凭证，可在微信中H5或小程序页面唤起企业微信直播小程序，并进入对应直播或直播回放。</p><h2 id="%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E8%A7%82%E7%9C%8B%E7%9B%B4%E6%92%AD%E5%87%AD%E8%AF%81" data-sign="e12e03b427a73703d298b77b65bd2e72" data-lines="2"><a class="anchor" href="#%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E8%A7%82%E7%9C%8B%E7%9B%B4%E6%92%AD%E5%87%AD%E8%AF%81"></a>获取微信观看直播凭证</h2><p data-sign="320b34c4635dba1b5decbcb09a9fba95" data-type="p" data-lines="2"><strong>请求方式：</strong> POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong> https://qyapi.weixin.qq.com/cgi-bin/living/get_living_code?access_token=ACCESS_TOKEN</p><p data-sign="382edfac6a8b56ec46332834f416136e" data-type="p" data-lines="2"><strong>请求包体：</strong></p><div data-sign="e45933af631e794aecfc6b68e1dec038" data-type="codeBlock" data-lines="7">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token property">"livingid"</span><span class="token operator">:</span> <span class="token string">"XXXXXXXXX"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token property">"openid"</span><span class="token operator">:</span> <span class="token string">"abcopenid"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="9306f0ed9357896d5bde23b0871edd93" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证。获取方法查看“<a href="https://work.weixin.qq.com/api/doc/90001/90143/90605" rel="nofollow">获取access_token</a>”</td></tr><tr><td>livingid</td><td>是</td><td>直播id</td></tr><tr><td>openid</td><td>是</td><td>微信用户的openid</td></tr></tbody></table></div><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="2"><strong>权限说明：</strong></p><div data-sign="f23ffe7462c5f1d7e9ca0e266fc83bbf" data-lines="5" class="cherry-table-container">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<span style="color: rgb(255, 0, 0);">上课直播/直播 - 可调用接口的应用</span>」中</td></tr><tr><td>代开发应用</td><td>具有「直播」权限</td></tr><tr><td>第三方应用</td><td>具有「直播」权限</td></tr></tbody></table></div><ul data-sign="65cf5d4f659cc9f8d6c5ec6ccc9227c7list1" data-lines="1" class="cherry-list__default"><li>仅允许获取当前应用创建的微信观看直播凭证。</li></ul><p data-sign="4500ae644890b2a3e6568b5481167358" data-type="p" data-lines="1"><em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></p><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="1"><strong>返回结果：</strong></p><div data-sign="1cd25ec5df0633b2fc331ab663b6c80e" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"living_code"</span><span class="token operator">:</span> <span class="token string">"abcdef"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="0c930478d11e2aca286c1b67e03498c2" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>errcode</td><td>返回码</td></tr><tr><td>errmsg</td><td>对返回码的文本描述内容</td></tr><tr><td>living_code</td><td>微信观看直播凭证，5分钟内可以重复使用，且仅能在微信上使用。开发者获取到该凭证后可以在微信H5页面或小程序进入直播或直播回放页</td></tr></tbody></table></div><h2 id="%E5%BE%AE%E4%BF%A1h5%E9%A1%B5%E9%9D%A2%E8%BF%9B%E5%85%A5%E7%9B%B4%E6%92%AD%E9%97%B4" data-sign="48056557723433047021599579b6bf19" data-lines="2"><a class="anchor" href="#%E5%BE%AE%E4%BF%A1h5%E9%A1%B5%E9%9D%A2%E8%BF%9B%E5%85%A5%E7%9B%B4%E6%92%AD%E9%97%B4"></a>微信H5页面进入直播间</h2><p data-sign="bcccf1fdc89bf526b2d61fb7269b7992" data-type="p" data-lines="1">获取到直播living_code之后，在微信H5页面里可使用微信开放标签&lt;wx-open-launch-weapp&gt;（<a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html" target="_blank">点击查看更详细的调用方法</a>），唤起直播小程序，进入直播或直播回放页。</p><p data-sign="ffdbda75984ca07cb0c1c243958bffe0" data-type="p" data-lines="2"><strong>开放标签参数</strong></p><div class="cherry-table-container" data-sign="526792d23ccdbffdbc9fa0770d6a1bc6" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>username</td><td>是</td><td>固定填企业微信直播小程序原始id: gh_25e071b83ee0</td></tr><tr><td>path</td><td>是</td><td>跳转到直播小程序的路径，支持两种路径如下： <br> (1) 跳到直播间，固定为：pages/watch/index?living_code=LIVING_CODE，<br> (2) 跳到回放页，固定为：pages/watch/index?living_code=LIVING_CODE&amp;replay=1, <br>其中LIVING_CODE为上文中“获取微信观看直播凭证”接口所获取</td></tr></tbody></table></div><p data-sign="28ec7faa1aae8659da1129197819f62e" data-type="p" data-lines="1"><strong>调用示例</strong></p><div data-sign="9571f18300f34eac5ee1f0a07d7798e9" data-type="codeBlock" data-lines="20">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>wx<span class="token operator">-</span>open<span class="token operator">-</span>launch<span class="token operator">-</span>weapp</span>
<span class="code-line">  id<span class="token operator">=</span><span class="token string">"launch-btn"</span></span>
<span class="code-line">  username<span class="token operator">=</span><span class="token string">"gh_25e071b83ee0"</span></span>
<span class="code-line">  path<span class="token operator">=</span><span class="token string">"pages/watch/index?living_code=LIVING_CODE"</span><span class="token operator">&gt;</span></span>
<span class="code-line">  <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="code-line">    <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token punctuation">.</span>btn <span class="token punctuation">{</span> padding<span class="token operator">:</span> <span class="token number">12</span>px <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>
<span class="code-line">    <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn"</span><span class="token operator">&gt;</span>进入直播间<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="code-line">  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>wx<span class="token operator">-</span>open<span class="token operator">-</span>launch<span class="token operator">-</span>weapp<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>
<span class="code-line">  <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'launch-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'launch'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><h2 id="%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BF%9B%E5%85%A5%E7%9B%B4%E6%92%AD%E9%97%B4" data-sign="ca97313fca01de6a035a19b9e8251fe8" data-lines="2"><a class="anchor" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BF%9B%E5%85%A5%E7%9B%B4%E6%92%AD%E9%97%B4"></a>微信小程序进入直播间</h2><p data-sign="eb6df7366b335c4dee58022a7d0862b2" data-type="p" data-lines="1">获取到直播living_code之后，在微信小程序里可调用小程序接口wx.navigateToMiniProgram（<a href="https://developers.weixin.qq.com/miniprogram/dev/api/navigate/wx.navigateToMiniProgram.html" target="_blank">点击查看更详细的调用方法</a>），唤起直播小程序，进入直播或直播回放页。</p><p data-sign="81a04268cdbd6cb5d3b07f06ca238855" data-type="p" data-lines="2"><strong>请求参数</strong></p><div class="cherry-table-container" data-sign="dd3c6bfb0bb8b32d1314d65a4e4d9b9f" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>appId</td><td>是</td><td>固定填企业微信直播小程序appid: wx7424030d69bde86e</td></tr><tr><td>path</td><td>是</td><td>跳转到直播小程序的路径，支持两种路径如下： <br> (1) 跳到直播间，固定为：pages/watch/index?living_code=LIVING_CODE，<br> (2) 跳到回放页，固定为：pages/watch/index?living_code=LIVING_CODE&amp;replay=1, <br>其中LIVING_CODE为上文中“获取微信观看直播凭证”接口所获取</td></tr></tbody></table></div><p data-sign="28ec7faa1aae8659da1129197819f62e" data-type="p" data-lines="1"><strong>调用示例</strong></p><div data-sign="f2bb2b5322528a491c4f14625075c657" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line">wx<span class="token punctuation">.</span><span class="token function">navigateToMiniProgram</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="code-line">  appId<span class="token operator">:</span> <span class="token string">'wx7424030d69bde86e'</span><span class="token punctuation">,</span></span>
<span class="code-line">  path<span class="token operator">:</span> <span class="token string">'pages/watch/index?living_code=LIVING_CODE'</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token comment">// 打开成功</span></span>
<span class="code-line">  <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>