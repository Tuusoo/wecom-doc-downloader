<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取对外收款记录 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取对外收款记录
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/03/27</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="9035f0b93cf126f25b82b611e87e825e" data-type="p" data-lines="1">企业和服务商可通过此接口获取企业的<strong>对外收款记录</strong>。</p><p data-sign="12e1ddbfce2bc2d2d61a274daa2cc24b" data-type="p" data-lines="3"><strong>请求方式：</strong>POST(<strong>HTTPS</strong>)<br><strong>请求地址：</strong>https://qyapi.weixin.qq.com/cgi-bin/externalpay/get_bill_list?access_token=ACCESS_TOKEN</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="1"><strong>请求示例：</strong></p><div data-sign="3bb824a806a4c13104d151ea503b4fd3" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"begin_time"</span><span class="token operator">:</span><span class="token number">1605171726</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"end_time"</span><span class="token operator">:</span><span class="token number">1605172726</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"payee_userid"</span><span class="token operator">:</span><span class="token string">"zhangshan"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"cursor"</span><span class="token operator">:</span><span class="token string">"CURSOR"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"limit"</span><span class="token operator">:</span><span class="token number">10</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="3796bcb62d497bb731378aee6fab3eb6" data-lines="7">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">begin_time</td><td align="left">是</td><td align="left">收款记录开始时间戳，单位为秒</td></tr><tr><td align="left">end_time</td><td align="left">是</td><td align="left">收款记录结束时间戳，单位为秒</td></tr><tr><td align="left">payee_userid</td><td align="left">否</td><td align="left">企业收款成员userid，不填则为全部成员</td></tr><tr><td align="left">cursor</td><td align="left">否</td><td align="left">用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填</td></tr><tr><td align="left">limit</td><td align="left">否</td><td align="left">返回的最大记录数，整型，最大值1000</td></tr></tbody></table></div><p data-sign="bcce16747e85772b20326ef2e0416930" data-type="p" data-lines="1"><strong>补充说明:</strong></p><blockquote data-sign="f97241d1cd3a45cdf225fe1ff72e2f32_2" data-lines="2">收款记录的起止时间间隔不能超过1个月。<br>会过滤收款人不在可见范围中的收款记录，因此返回的记录数可能会小于limit设置的最大记录数。<br>如果没有获取到next_cursor，说明已经拉取完所有的数据。</blockquote><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><ul data-sign="3d00dcf6b9c9d12854f860dea8b08544list5" data-lines="5" class="cherry-list__default"><li>只会返回当前在应用可见范围内用户的收款记录</li><li>4.1.0及以上版本中新增的部分商户号收款记录，不会返回给第三方应用和代开发应用</li><li>调用的应用需要满足如下的权限<br><div class="cherry-table-container" data-sign="8284e222e294adc7ade016ed6fb49cb7" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<a href="#24952/%E9%85%8D%E7%BD%AE%E5%8F%AF%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BA%94%E7%94%A8" rel="nofollow">对外收款- 可调用接口的应用</a>」中</td></tr><tr><td>代开发应用</td><td>具有「<span style="color:#ff0000">对外收款</span>」权限</td></tr><tr><td>第三方应用</td><td>具有「<span style="color:#ff0000">对外收款</span>」权限</td></tr></tbody></table></div><br><em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></li></ul><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="1"><strong>返回结果：</strong></p><div data-sign="6bf4590ffa828188ed71315ebc13e4ea" data-type="codeBlock" data-lines="49">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"errcode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"errmsg"</span><span class="token operator">:</span><span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"next_cursor"</span><span class="token operator">:</span><span class="token string">"CURSOR"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"bill_list"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"transaction_id"</span><span class="token operator">:</span><span class="token string">"xxxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"bill_type"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"trade_state"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"pay_time"</span><span class="token operator">:</span><span class="token number">12345</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"out_trade_no"</span><span class="token operator">:</span><span class="token string">"xxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"out_refund_no"</span><span class="token operator">:</span><span class="token string">"xxxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"external_userid"</span><span class="token operator">:</span><span class="token string">"xxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"total_fee"</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"payee_userid"</span><span class="token operator">:</span><span class="token string">"zhangshan"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"payment_type"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"mch_id"</span><span class="token operator">:</span><span class="token string">"123454"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"remark"</span><span class="token operator">:</span><span class="token string">"xxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"commodity_list"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token punctuation">{</span></span>
<span class="code-line">					<span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"手机"</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token string">"amount"</span><span class="token operator">:</span><span class="token number">1</span></span>
<span class="code-line">				<span class="token punctuation">}</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"total_refund_fee"</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"refund_list"</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="code-line">				<span class="token punctuation">{</span></span>
<span class="code-line">					<span class="token string">"out_refund_no"</span><span class="token operator">:</span><span class="token string">"xx"</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token string">"refund_userid"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token string">"refund_comment"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token string">"refund_reqtime"</span><span class="token operator">:</span><span class="token number">1605171790</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token string">"refund_status"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token string">"refund_fee"</span><span class="token operator">:</span><span class="token number">100</span></span>
<span class="code-line">				<span class="token punctuation">}</span></span>
<span class="code-line">			<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"contact_info"</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"phone"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"address"</span><span class="token operator">:</span><span class="token string">"xxx"</span></span>
<span class="code-line">			<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"miniprogram_info"</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"appid"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"xxx"</span></span>
<span class="code-line">			<span class="token punctuation">}</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="c9fa5506dac88d75d8919582d4b4e36a" data-lines="23">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">对返回码的文本描述内容</td></tr><tr><td align="left">next_cursor</td><td align="left">分页游标，在下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则不返回该字段</td></tr><tr><td align="left">bill_list</td><td align="left">交易单详情列表</td></tr><tr><td align="left">transaction_id</td><td align="left">交易单号</td></tr><tr><td align="left">bill_type</td><td align="left">交易类型：<br>0：收款记录<br>1：退款记录</td></tr><tr><td align="left">trade_state</td><td align="left">交易状态（退款记录不返回该字段）：<br>1：已完成 <br>3：已完成有退款</td></tr><tr><td align="left">pay_time</td><td align="left">交易时间</td></tr><tr><td align="left">out_trade_no</td><td align="left">商户单号。如果是退款记录，返回对应收款记录的商户单号</td></tr><tr><td align="left">out_refund_no</td><td align="left">退款单号，退款记录返回该字段</td></tr><tr><td align="left">external_userid</td><td align="left">付款人的userid</td></tr><tr><td align="left">total_fee</td><td align="left">收款总金额，单位为分</td></tr><tr><td align="left">payee_userid</td><td align="left">企业内账号userid。退款记录的该字段为退款成员userid，收款记录的该字段为收款成员userid</td></tr><tr><td align="left">payment_type</td><td align="left">收款方式：<br>0：在聊天中收款<br>1：收款码收款 <br>2：在直播间收款 <br>3：用产品图册收款 <br>14：转账<br>15：小程序（仅部分灰度企业可在小程序中接入对外收款账户进行收款）</td></tr><tr><td align="left">mch_id</td><td align="left">收款商户号id</td></tr><tr><td align="left">remark</td><td align="left">备注。退款记录的该字段为退款备注，收款记录的该字段为收款备注</td></tr><tr><td align="left">commodity_list</td><td align="left">商品信息详情列表,商品信息结构参考commodity。退款记录不返回该字段</td></tr><tr><td align="left">total_refund_fee</td><td align="left">退款总金额</td></tr><tr><td align="left">refund_list</td><td align="left">退款单据详情列表，退款单据详情参考refund。退款记录不返回该字段</td></tr><tr><td align="left">contact_info</td><td align="left">联系人信息，详情参考contact，如创建收款项目时设置为不需要联系地址，则该字段为空，<strong>第三方不可获取</strong>。退款记录不返回该字段</td></tr><tr><td align="left">miniprogram_info</td><td align="left">小程序信息，详情参考miniprogram。收款方式为小程序时返回该字段</td></tr></tbody></table></div><p data-sign="6b6f9322d0045541cd235e5f23fcaf93" data-type="p" data-lines="2"><strong>商品信息详情(commodity):</strong></p><div class="cherry-table-container" data-sign="8c5b109eeaa6062cae86322a5c20ec68" data-lines="4">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">description</td><td align="left">商品描述</td></tr><tr><td align="left">amount</td><td align="left">商品数量</td></tr></tbody></table></div><p data-sign="042e8430306ba670fb048698e222f17e" data-type="p" data-lines="2"><strong>退款单据详情(refund):</strong></p><div class="cherry-table-container" data-sign="d015712e01b4077186b33dc5e8e44206" data-lines="8">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">out_refund_no</td><td align="left">退款单号</td></tr><tr><td align="left">refund_userid</td><td align="left">退款发起人ID</td></tr><tr><td align="left">refund_comment</td><td align="left">退款备注</td></tr><tr><td align="left">refund_reqtime</td><td align="left">退款发起时间</td></tr><tr><td align="left">refund_status</td><td align="left">退款状态：<br>0：已申请退款<br>1：退款处理中<br>2：退款成功<br>3：退款关闭<br>4：退款异常<br>5：审批中<br>6：审批失败<br>7：审批取消</td></tr><tr><td align="left">refund_fee</td><td align="left">退款金额</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="5f5c18bdc0cff247b3ba6f77d097e478" data-type="p" data-lines="1"><strong>联系人信息(contact)（第三方不可获取）:</strong></p><div class="cherry-table-container" data-sign="98f2b39073b0cd3b9e2da14135fd87eb" data-lines="5">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">联系人姓名</td></tr><tr><td align="left">phone</td><td align="left">联系人手机号</td></tr><tr><td align="left">address</td><td align="left">联系地址</td></tr></tbody></table></div><p data-sign="2d42e82f1d5c2e4a9479cf28a715425b" data-type="p" data-lines="2"><strong>小程序信息(miniprogram):</strong></p><div class="cherry-table-container" data-sign="279d27d38b887104944890cf04366e4b" data-lines="4">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">appid</td><td align="left">小程序appid</td></tr><tr><td align="left">name</td><td align="left">小程序名称</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>