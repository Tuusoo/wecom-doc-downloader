<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>概述 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        概述
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/07/22</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="1844fc9cd46394aa1d5ec231cb39ce09-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E5%85%B3%E4%BA%8E%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF" class="level-2">关于接收消息</a></li><li class="toc-li"><a href="#%E5%BC%80%E5%90%AF%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF" class="level-2">开启接收消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%AE%BE%E7%BD%AE%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E7%9A%84%E5%8F%82%E6%95%B0" class="level-3">设置接收消息的参数</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E8%AE%BE%E7%BD%AE%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E7%9A%84%E6%A0%BC%E5%BC%8F" class="level-3">设置接收消息的格式</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E9%AA%8C%E8%AF%81url%E6%9C%89%E6%95%88%E6%80%A7" class="level-3">验证URL有效性</a></li><li class="toc-li"><a href="#%E4%BD%BF%E7%94%A8%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF" class="level-2">使用接收消息</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%AF%B4%E6%98%8E" class="level-3">接收消息协议的说明</a></li><li class="toc-li">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E8%AF%B7%E6%B1%82%E7%9A%84%E8%AF%B4%E6%98%8E" class="level-3">接收消息请求的说明</a></li><li class="toc-li"><a href="#%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84ip%E6%AE%B5" class="level-2">获取企业微信服务器的ip段</a></li></dir><h2 id="%E5%85%B3%E4%BA%8E%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF" data-sign="956661b07a77082838be4b85b6c0b886" data-lines="2"><a class="anchor" href="#%E5%85%B3%E4%BA%8E%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF"></a>关于接收消息</h2><p data-sign="3acc8e5dac83f09a570d8e114b75e2a7" data-type="p" data-lines="4">为了能够让自建应用和企业微信进行双向通信，企业可以在应用的管理后台开启接收消息模式。<br>开启接收消息模式的企业，需要提供可用的接收消息服务器URL（建议使用https）。<br>开启接收消息模式后，用户在应用里发送的消息会推送给企业后台。此外，还可配置地理位置上报等事件消息，当事件触发时企业微信会把相应的数据推送到企业的后台。<br>企业后台接收到消息后，可在回复该消息请求的响应包里带上新消息，企业微信会将该被动回复消息推送给用户。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E5%BC%80%E5%90%AF%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF" data-sign="cd6302e784eabc5f474cded3f4e84d76" data-lines="1"><a class="anchor" href="#%E5%BC%80%E5%90%AF%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF"></a>开启接收消息</h2><h3 id="%E8%AE%BE%E7%BD%AE%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E7%9A%84%E5%8F%82%E6%95%B0" data-sign="8cf8dac3da5ca878c834548a012388fc" data-lines="1"><a class="anchor" href="#%E8%AE%BE%E7%BD%AE%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E7%9A%84%E5%8F%82%E6%95%B0"></a>设置接收消息的参数</h3><p data-sign="a0da2c075426d256513ea99d3f7bdc07" data-type="p" data-lines="2">在企业的管理端后台，进入需要设置接收消息的目标应用，点击“接收消息”的“设置API接收”按钮，进入配置页面。配置回调参数以及选择需要接收的事件类型。<br><img src="images/90238/bbfd5e58.png" alt="enter image description here"></p><p data-sign="2a235268e852db2f64928645cb8c36d1" data-type="p" data-lines="1">要求填写应用的URL、Token、EncodingAESKey三个参数</p><ul data-sign="00d795125229fd3d378afb4bce20498alist3" data-lines="3" class="cherry-list__default"><li>URL是企业后台接收企业微信推送请求的访问协议和地址，支持http或https协议（为了提高安全性，建议使用https）。</li><li>Token可由企业任意填写，用于生成签名。</li><li>EncodingAESKey用于消息体的加密。 </li></ul><p data-sign="57dfcad380074ad959509a94b1a9c4e1" data-type="p" data-lines="2">这三个参数的用处在 <a href="#12976" rel="nofollow">加解密方案说明</a> 章节会介绍，此处不用细究。<br><!--</p><h3 id="%E8%AE%BE%E7%BD%AE%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E7%9A%84%E6%A0%BC%E5%BC%8F" data-sign="d3eef135ba4eadee37fba79a72609d48" data-lines="1"><a class="anchor" href="#%E8%AE%BE%E7%BD%AE%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E7%9A%84%E6%A0%BC%E5%BC%8F"></a>设置接收消息的格式</h3><p data-sign="11424814febb30d4bdc31117965bb787" data-type="p" data-lines="2">系统回调支持xml和json两种数据消息回调，企业可通过企业后台管理端进行设定，如果不设置<font color=red>默认回调xml数据格式</font>。<br>--></p><h3 id="%E9%AA%8C%E8%AF%81url%E6%9C%89%E6%95%88%E6%80%A7" data-sign="a2ded32c767efd8396e851f6332a1ec8" data-lines="1"><a class="anchor" href="#%E9%AA%8C%E8%AF%81url%E6%9C%89%E6%95%88%E6%80%A7"></a>验证URL有效性</h3><p data-sign="2d1d710f126ebc7b66e993f7a889e2fb" data-type="p" data-lines="2">当点击“保存”提交以上信息时，企业微信会发送一条验证消息到填写的URL，发送方法为<font color="red"><strong>GET</strong></font>。<br>企业的接收消息服务器接收到验证请求后，需要作出正确的响应才能通过URL验证。</p><blockquote data-sign="be9d9385a22f4981d809032e9fe14849_1" data-lines="1">企业在获取请求时<font color="red">需要做Urldecode处理</font>，否则可能会验证不成功<br>你可以访问<a href="https://developer.work.weixin.qq.com/resource/devtool" rel="nofollow">接口调试工具</a>进行调试，依次选择 建立连接 &gt; 接收消息。</blockquote><p data-sign="89d4a8789ca70f70558c4261fdffacd7" data-type="p" data-lines="2">假设接收消息地址设置为：https://api.3dept.com/，企业微信将向该地址发送如下验证请求：</p><p data-sign="e0c7f7335749b66d0dbc618b40e5b93e" data-type="p" data-lines="4"><strong>请求方式：GET</strong><br><strong>请求地址</strong>：https://api.3dept.com/?msg_signature=ASDFQWEXZCVAQFASDFASDFSS&amp;timestamp=13500001234&amp;nonce=123412323&amp;echostr=ENCRYPT_STR<br><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="fcc8ec0c1d5cab1d53f7e378ce31f4f4" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>msg_signature</td><td>是</td><td>企业微信加密签名，msg_signature结合了企业填写的token、请求中的timestamp、nonce参数、加密的消息体</td></tr><tr><td>timestamp</td><td>是</td><td>时间戳</td></tr><tr><td>nonce</td><td>是</td><td>随机数</td></tr><tr><td>echostr</td><td>是</td><td>加密的字符串。需要<a href="#12976/%E5%AF%86%E6%96%87%E8%A7%A3%E5%AF%86%E5%BE%97%E5%88%B0msg%E7%9A%84%E8%BF%87%E7%A8%8B" rel="nofollow">解密得到消息内容明文</a>，解密后有random、msg_len、msg、receiveid四个字段，其中msg即为消息内容明文</td></tr></tbody></table></div><p data-sign="0faebf112e30d87735da25a99e5b5fa1" data-type="p" data-lines="1">企业后台收到请求后，需要做如下操作：</p><ol data-sign="868ead264cffa0fdaa6a738c2a45376elist4" data-lines="4" class="cherry-list__default" start="1"><li>对收到的请求做Urldecode处理</li><li>通过参数msg_signature<a href="#12976/%E6%B6%88%E6%81%AF%E4%BD%93%E7%AD%BE%E5%90%8D%E6%A0%A1%E9%AA%8C" rel="nofollow">对请求进行校验</a>，确认调用者的合法性。</li><li><a href="#12976/%E5%AF%86%E6%96%87%E8%A7%A3%E5%AF%86%E5%BE%97%E5%88%B0msg%E7%9A%84%E8%BF%87%E7%A8%8B" rel="nofollow">解密echostr</a>参数得到消息内容(即msg字段)</li><li>在<font color="red">1秒内</font>响应GET请求，响应内容为上一步得到的明文消息内容(<font color="red">不能加引号，不能带bom头，不能带换行符</font>)</li></ol><p data-sign="61218f9709d02148d61531a69fafa413" data-type="p" data-lines="2">以上2~3步骤可以直接使用<a href="#12976/%E9%AA%8C%E8%AF%81URL%E5%87%BD%E6%95%B0" rel="nofollow">验证URL函数</a>一步到位。<br>之后接入验证生效，接收消息开启成功。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E4%BD%BF%E7%94%A8%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF" data-sign="4c6a37f6c0e901e8e7013943a3d4f337" data-lines="1"><a class="anchor" href="#%E4%BD%BF%E7%94%A8%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF"></a>使用接收消息</h2><p data-sign="b631ded89d5f7c2a2ea276d85283ccef" data-type="p" data-lines="1">开启接收消息模式后，企业微信会将消息发送给企业填写的URL，企业后台需要做正确的响应。</p><h3 id="%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%AF%B4%E6%98%8E" data-sign="2d33ca13702bb9f1970d8931a96dc060" data-lines="1"><a class="anchor" href="#%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%AF%B4%E6%98%8E"></a>接收消息协议的说明</h3><ul data-sign="95c0c6594fafd965236c6efcadfff0f5list4" data-lines="4" class="cherry-list__default"><li>企业微信服务器在五秒内收不到响应会断掉连接，并且重新发起请求，总共重试三次。如果企业在调试中，发现成员无法收到被动回复的消息，可以检查是否消息处理超时。</li><li>当接收成功后，http头部返回200表示接收ok，其他错误码企业微信后台会一律当做失败并发起重试。</li><li>关于重试的消息排重，有msgid的消息推荐使用msgid排重。<a href="#12974" rel="nofollow">事件类型消息</a>推荐使用FromUserName + CreateTime排重。</li><li>假如企业无法保证在五秒内处理并回复，或者不想回复任何内容，可以直接返回200（即以空串为返回包）。企业后续可以使用主动发消息接口进行异步回复。</li></ul><h3 id="%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E8%AF%B7%E6%B1%82%E7%9A%84%E8%AF%B4%E6%98%8E" data-sign="7f8494181a6163c90b45f14da3e4c4e0" data-lines="2"><a class="anchor" href="#%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF%E8%AF%B7%E6%B1%82%E7%9A%84%E8%AF%B4%E6%98%8E"></a>接收消息请求的说明</h3><p data-sign="185db10cdc55e499cb535a5e3f41768d" data-type="p" data-lines="3">假设企业的接收消息的URL设置为https://api.3dept.com。<br><strong>请求方式：POST</strong><br><strong>请求地址 ：</strong>https://api.3dept.com/?msg_signature=ASDFQWEXZCVAQFASDFASDFSS&amp;timestamp=13500001234&amp;nonce=123412323</p><p data-sign="ca1fe2a4b6f047f254dfaf7b58d11ffd" data-type="p" data-lines="2"><strong>接收数据格式 ：</strong><br>xml数据格式：</p><div data-sign="12e15bfed7b2ba49b41e7a95c55f80d5" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>xml<span class="token operator">&gt;</span> </span>
<span class="code-line">   <span class="token operator">&lt;</span>ToUserName<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>toUser<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>ToUserName<span class="token operator">&gt;</span></span>
<span class="code-line">   <span class="token operator">&lt;</span>AgentID<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>toAgentID<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>AgentID<span class="token operator">&gt;</span></span>
<span class="code-line">   <span class="token operator">&lt;</span>Encrypt<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>msg_encrypt<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Encrypt<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>xml<span class="token operator">&gt;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="b31e7f4d911ae37300f19d1d22d621ac" data-type="p" data-lines="2"><!--<br>json数据格式：</p><div data-sign="436bb1fa833d3cac57b7c0029c2514b1" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"ToUserName"</span><span class="token operator">:</span> <span class="token string">"toUser"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"AgentID"</span><span class="token operator">:</span> <span class="token string">"toAgentID"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"Encrypt"</span><span class="token operator">:</span> <span class="token string">"msg_encrypt"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code></pre>
    </div><p data-sign="0cc3e61754f75a99dabf7e547e21da67" data-type="p" data-lines="2">--><br><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="7f90fe86a19d46ab6f5165f5718f8a2a" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>ToUserName</td><td>企业微信的CorpID，当为第三方套件回调事件时，CorpID的内容为suiteid</td></tr><tr><td>AgentID</td><td>接收的应用id，可在应用的设置页面获取</td></tr><tr><td>Encrypt</td><td>消息结构体加密后的字符串</td></tr></tbody></table></div><p data-sign="ff5f85ea2644ded6daf045efe67e11ac" data-type="p" data-lines="1">企业收到消息后，需要作如下处理：</p><ol data-sign="45f0617cda2dda5f00a5a826999ce0c2list4" data-lines="4" class="cherry-list__default" start="1"><li>对msg_signature进行<a href="#12976/%E6%B6%88%E6%81%AF%E4%BD%93%E7%AD%BE%E5%90%8D%E6%A0%A1%E9%AA%8C" rel="nofollow">校验</a></li><li><a href="#12976/%E5%AF%86%E6%96%87%E8%A7%A3%E5%AF%86%E5%BE%97%E5%88%B0msg%E7%9A%84%E8%BF%87%E7%A8%8B" rel="nofollow">解密</a>Encrypt，得到明文的消息结构体（消息结构体后面章节会详说）</li><li>如果需要被动回复消息，构造被动响应包</li><li>正确响应本次请求</li></ol><p data-sign="7ef8948c03642317c66a6c671f327252" data-type="p" data-lines="2">以上1~2步骤可以直接使用<a href="#12976/%E8%A7%A3%E5%AF%86%E5%87%BD%E6%95%B0" rel="nofollow">解密函数</a>一步到位。<br>3步骤其实包含加密被动回复消息、生成新签名、构造被动响应包三个步骤，可以直接使用<a href="#12976/%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0" rel="nofollow">加密函数</a>一步到位。</p><p data-sign="e234897b8698e83030e7a0bc49f4ef00" data-type="p" data-lines="2"><strong>被动响应包的数据格式：</strong><br>xml格式：</p><div data-sign="3ef06984095fc1b1a9c1f5c968c40065" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token operator">&lt;</span>xml<span class="token operator">&gt;</span></span>
<span class="code-line">   <span class="token operator">&lt;</span>Encrypt<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>msg_encrypt<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Encrypt<span class="token operator">&gt;</span></span>
<span class="code-line">   <span class="token operator">&lt;</span>MsgSignature<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>msg_signature<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>MsgSignature<span class="token operator">&gt;</span></span>
<span class="code-line">   <span class="token operator">&lt;</span>TimeStamp<span class="token operator">&gt;</span>timestamp<span class="token operator">&lt;</span><span class="token operator">/</span>TimeStamp<span class="token operator">&gt;</span></span>
<span class="code-line">   <span class="token operator">&lt;</span>Nonce<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>nonce<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Nonce<span class="token operator">&gt;</span></span>
<span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>xml<span class="token operator">&gt;</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="cc6415ffe849c617a5819981df325d12" data-type="p" data-lines="2"><!--<br>json格式：</p><div data-sign="859fdb16c6c452f9620c1cd44b633b46" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"Encrypt"</span><span class="token operator">:</span> <span class="token string">"msg_encrypt"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"MsgSignature"</span><span class="token operator">:</span> <span class="token string">"msg_signature"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"TimeStamp"</span><span class="token operator">:</span> <span class="token string">"timestamp"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"Nonce"</span><span class="token operator">:</span> <span class="token string">"nonce"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code></pre>
    </div><p data-sign="0cc3e61754f75a99dabf7e547e21da67" data-type="p" data-lines="2">--><br><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="2441f64acc52eff17d3966583338972e" data-lines="6">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>Encrypt</td><td>是</td><td>经过加密的消息结构体</td></tr><tr><td>MsgSignature</td><td>是</td><td>消息签名</td></tr><tr><td>TimeStamp</td><td>是</td><td>时间戳</td></tr><tr><td>Nonce</td><td>是</td><td>随机数，由企业自行生成</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h2 id="%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84ip%E6%AE%B5" data-sign="b09cabd06fb068f75544dc96bdc866a4" data-lines="1"><a class="anchor" href="#%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84ip%E6%AE%B5"></a>获取企业微信服务器的ip段</h2><p data-sign="cb039c8b84bb66677859020b9754b96c" data-type="p" data-lines="1">企业微信在回调企业指定的URL时，是通过特定的IP发送出去的。如果企业需要做防火墙配置，那么可以通过这个接口获取到所有相关的IP段。</p><p data-sign="0254538a46e3bdc9d056cab43c432559" data-type="p" data-lines="3"><strong>请求方式：</strong>GET（<strong>HTTPS</strong>）<br><strong>请求地址：</strong> https://qyapi.weixin.qq.com/cgi-bin/getcallbackip?access_token=ACCESS_TOKEN</p><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="da3120bdff83a859743e52d1af8dc997" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="be69a8d80807fc12104a6f71258f88a9" data-type="p" data-lines="1"><strong>权限说明：</strong></p><p data-sign="14d04cc2024b12c7a41a4e64bd54ac66" data-type="p" data-lines="2">无限定。</p><p data-sign="0b2883c6647afc4d9ed15f6f0ef6fe94" data-type="p" data-lines="2"><strong>返回结果：</strong> </p><div data-sign="376b446f477a68d174f08788696c63d8" data-type="codeBlock" data-lines="8">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"ip_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"101.226.103.*"</span><span class="token punctuation">,</span> <span class="token string">"101.226.62.*"</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="a6f166751c48777a6cf993befb0a19f1" data-type="p" data-lines="2"><strong>参数说明：</strong> </p><div class="cherry-table-container" data-sign="abbe9d12871c085cc899cddb02336eff" data-lines="3">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>ip_list</td><td>企业微信回调的IP段</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>