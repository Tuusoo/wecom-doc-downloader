<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取客户基础信息 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取客户基础信息
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/11/18</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="e5e497cf3fd1a47ad71cb34e45752707" data-type="p" data-lines="1"><strong>请求方式</strong>: POST(<strong>HTTPS</strong>)</p><p data-sign="e39890fe8661a37d68057b3adec82c99" data-type="p" data-lines="2"><strong>请求地址</strong>: https://qyapi.weixin.qq.com/cgi-bin/kf/customer/batchget?access_token=ACCESS_TOKEN</p><p data-sign="1b154bddd25406e550d424a012b9e0fa" data-type="p" data-lines="1"><strong>请求实例</strong>:</p><div data-sign="0a4fe868df5d8dc47ade2d11725db860" data-type="codeBlock" data-lines="9">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token property">"external_userid_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token string">"wmxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"zhangsan"</span></span>
<span class="code-line">	<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"need_enter_session_context"</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="b1e47f3c22bd45ba2f6339e3cc4f5486" data-lines="5">
        <table class="cherry-table"><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证</td></tr><tr><td>external_userid_list</td><td>是</td><td>external_userid列表<br>可填充个数：1 ~ 100。超过100个需分批调用。</td></tr><tr><td>need_enter_session_context</td><td>否</td><td>是否需要返回客户48小时内最后一次进入会话的上下文信息。<br>0-不返回 1-返回。默认不返回</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="3e8ede653238c7aeddbd80981443beee" data-type="p" data-lines="2"><strong>权限说明</strong>:<br>调用的应用需要满足如下的权限</p><div class="cherry-table-container" data-sign="36a05d3223cbac166ba785c5b9eb0c27" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「 <a href="#31106/%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AFAPI" rel="nofollow">微信客服- 可调用接口的应用</a>」中</td></tr><tr><td>第三方应用</td><td>具有<span style="color:#ff0000">“微信客服-&gt;获取基础信息”</span>权限</td></tr><tr><td>代开发自建应用</td><td>具有<span style="color:#ff0000">“微信客服-&gt;获取基础信息”</span>权限</td></tr></tbody></table></div><div data-sign="252834b64b209bfd04ec10f7a24d437c" data-type="div" data-lines="4"><br><div class="colorful_tips colorful_tips_warning"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSI4IiBmaWxsPSIjQjM2NzFEIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDNDNy40NDc3MiAzIDcgMy40NDc3MiA3IDRWOEM3IDguNTUyMjggNy40NDc3MiA5IDggOUM4LjU1MjI4IDkgOSA4LjU1MjI4IDkgOFY0QzkgMy40NDc3MiA4LjU1MjI4IDMgOCAzWk04IDExQzcuNDQ3NzIgMTEgNyAxMS40NDc3IDcgMTJDNyAxMi41NTIzIDcuNDQ3NzIgMTMgOCAxM0M4LjU1MjI4IDEzIDkgMTIuNTUyMyA5IDEyQzkgMTEuNDQ3NyA4LjU1MjI4IDExIDggMTFaIiBmaWxsPSJ3aGl0ZSIvPjwvc3ZnPg==">注意</div><div class="colorful_tips_cnt">从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a>。<br>external_userid 需为最近 48 小时内有触发<a href="#31078/%E7%94%A8%E6%88%B7%E8%BF%9B%E5%85%A5%E4%BC%9A%E8%AF%9D%E4%BA%8B%E4%BB%B6" rel="nofollow">用户进入会话事件</a>或向该客服账号发过消息的客户，否则在 <code>invalid_external_userid</code> 返回。<br>「营销获客」应用只能获取到该应用带来的客户，也就是「营销获客」应用管理的微信客服账号的客户<br></div></div></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="25ff3159d1dae3e8ef08523b3dd72cc2" data-type="p" data-lines="1"><strong>返回结果</strong>:</p><div data-sign="32f0a7eb92ac6ce60bc6d9ac59583d7d" data-type="codeBlock" data-lines="27">
      <pre class="language-json"><code class="language-json wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token property">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token property">"customer_list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token property">"external_userid"</span><span class="token operator">:</span> <span class="token string">"wmxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"nickname"</span><span class="token operator">:</span> <span class="token string">"张三"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://xxxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"gender"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"unionid"</span><span class="token operator">:</span> <span class="token string">"oxasdaosaosdasdasdasd"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token property">"enter_session_context"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token property">"scene"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token property">"scene_param"</span><span class="token operator">:</span> <span class="token string">"abc"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token property">"wechat_channels"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">					<span class="token property">"nickname"</span><span class="token operator">:</span> <span class="token string">"进入会话的视频号名称"</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token property">"scene"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">				<span class="token punctuation">}</span></span>
<span class="code-line">			<span class="token punctuation">}</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token property">"invalid_external_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token string">"zhangsan"</span></span>
<span class="code-line">	<span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="ccdc6a54895d0c321d1f08ed3847aa25" data-lines="17">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">int</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">string</td><td align="left">错误码描述</td></tr><tr><td align="left">customer_list</td><td align="left">array</td><td align="left">返回结果</td></tr><tr><td align="left">customer_list.external_userid</td><td align="left">string</td><td align="left">微信客户的external_userid</td></tr><tr><td align="left">customer_list.nickname</td><td align="left">string</td><td align="left">微信昵称</td></tr><tr><td align="left">customer_list.avatar</td><td align="left">string</td><td align="left">微信头像。<strong>第三方应用和代开发应用均不可获取</strong></td></tr><tr><td align="left">customer_list.gender</td><td align="left">int</td><td align="left">性别。<strong>第三方应用和代开发应用均不可获取</strong>，统一返回<code>0</code></td></tr><tr><td align="left">customer_list.unionid</td><td align="left">string</td><td align="left">unionid，需要绑定微信开发者账号才能获取到，查看<a href="#%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E5%AE%A2%E6%88%B7%E7%9A%84unionid" rel="nofollow">绑定方法</a>。第三方不可获取</td></tr><tr><td align="left">customer_list.enter_session_context</td><td align="left">obj</td><td align="left">48小时内最后一次进入会话的上下文信息。<br>请求的need_enter_session_context参数设置为1才返回</td></tr><tr><td align="left">customer_list.enter_session_context.scene</td><td align="left">string</td><td align="left">进入会话的场景值，<a href="#31144" rel="nofollow">获取客服账号链接</a>开发者自定义的场景值</td></tr><tr><td align="left">customer_list.enter_session_context.scene_param</td><td align="left">string</td><td align="left">进入会话的自定义参数，<a href="#31144" rel="nofollow">获取客服账号链接</a>返回的url，开发者按规范拼接的scene_param参数</td></tr><tr><td align="left">customer_list.enter_session_context.wechat_channels</td><td align="left">obj</td><td align="left">进入会话的视频号信息，从视频号进入会话才有值</td></tr><tr><td align="left">customer_list.enter_session_context.wechat_channels.nickname</td><td align="left">string</td><td align="left">视频号名称，视频号场景值为1、2、3时返回此项</td></tr><tr><td align="left">customer_list.enter_session_context.wechat_channels.shop_nickname</td><td align="left">string</td><td align="left">视频号小店名称，视频号场景值为4、5时返回此项</td></tr><tr><td align="left">customer_list.enter_session_context.wechat_channels.scene</td><td align="left">uint32</td><td align="left">视频号场景值。1：视频号主页，2：视频号直播间商品列表页，3：视频号商品橱窗页，4：视频号小店商品详情页，5：视频号小店订单页</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><h3 id="%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E5%AE%A2%E6%88%B7%E7%9A%84unionid" data-sign="5d291439cf7221caf5a551cf0a971413" data-lines="1"><a class="anchor" href="#%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E5%AE%A2%E6%88%B7%E7%9A%84unionid"></a>如何获取微信客户的Unionid</h3><p data-sign="a46848aa3b72e341cf2cc8ddf8360b4e" data-type="p" data-lines="1">企业内部开发和第三方应用开发，获取Unionid的方式不同。</p><h4 id="%E4%BC%81%E4%B8%9A%E5%86%85%E9%83%A8%E5%BC%80%E5%8F%91" data-sign="2176c34c615bf2dd2c7ff70d2a5e6b86" data-lines="1"><a class="anchor" href="#%E4%BC%81%E4%B8%9A%E5%86%85%E9%83%A8%E5%BC%80%E5%8F%91"></a><strong>企业内部开发</strong></h4><ol data-sign="377a09626f5a99cef5670c1e494db5cblist3" data-lines="3" class="cherry-list__default" start="1"><li>在企业微信管理后台“应用管理-微信客服-通过API管理微信客服”处，点击“绑定”去到微信公众平台进行授权，支持绑定公众号和小程序（需要同时绑定微信开放平台）；绑定的公众号或小程序主体需与企业微信主体一致，暂且支持绑定一个<br></li><li>绑定完成后，当客户进入客服会话或发起咨询时，即可通过此接口获取微信客户所对应的微信Unionid</li></ol><p data-sign="19be965c01f0124371152fb932a0689c" data-type="p" data-lines="1"><img src="images/95159/e8e99d6d.png" alt="enter image description here"></p><h4 id="%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91" data-sign="86f20e8837d6747054a017ae8ae68f0f" data-lines="2"><a class="anchor" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91"></a><strong>第三方应用开发</strong></h4><ol data-sign="f41f2d387e74bcc9ddf5b4bbf66bd3e6list3" data-lines="3" class="cherry-list__default" start="1"><li>企业授权第三方应用管理指定的客服账号的会话消息时，当微信客户进入该客服会话或发起咨询时，第三方可获取该客户的external_userid</li><li>第三方需自行通过其他已有的方式获取客户的Unionid</li><li>再通过<a href="#39850" rel="nofollow">Unionid与external_userid关联接口</a> ，将获取到的Unionid和external_userid实现关联识别。</li></ol><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>