<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>签名算法 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        签名算法
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/08/21</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><h2 id="%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D%E7%AE%97%E6%B3%95" data-sign="8ed27de481031cce8a74f0c061b4d9c3" data-lines="1"><a class="anchor" href="#%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D%E7%AE%97%E6%B3%95"></a>微信支付签名算法</h2><p data-sign="868062f1a7d2b58386fa1bcf45cc932e" data-type="p" data-lines="2">第一步，设所有发送或者接收到的数据为集合M，将集合M内非空参数值的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串stringA。<br>特别注意以下重要规则：</p><ul data-sign="c16f7b24c0003b9065d534285e1ba274list5" data-lines="5" class="cherry-list__default"><li>参数名ASCII码从小到大排序（字典序）；</li><li>如果参数的值为空不参与签名；</li><li>参数名区分大小写；</li><li>验证调用返回或微信主动通知签名时，传送的sign参数不参与签名，将生成的签名与该sign值作校验。</li><li>微信接口可能增加字段，验证签名时必须支持增加的扩展字段</li></ul><p data-sign="d5ab25cdb15ee90b563b2360dd4d637b" data-type="p" data-lines="2">第二步，在stringA最后拼接上key得到stringSignTemp字符串，并对stringSignTemp进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值signValue。<br>附：key为商户平台API密钥里面设置的key，key设置之后不能查看，建议设置后另外保存一份，以免遗忘。另外，再建议将key顺便保存到 商户平台-&gt;产品中心-&gt;企业微信收款-&gt;API密钥管理 里面，这样后续企业微信收款才能正常使用。</p><p data-sign="ddb5dfe03054529a85ac003955272874" data-type="p" data-lines="3">签名字段:<br>除sign字段外所有字段都参与签名（包括企业微信签名字段workwx_sign一起参与签名）.</p><h2 id="%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%AD%BE%E5%90%8D%E7%AE%97%E6%B3%95" data-sign="9a421a83b199f394829c1ac59a21c21b" data-lines="2"><a class="anchor" href="#%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%AD%BE%E5%90%8D%E7%AE%97%E6%B3%95"></a>企业微信签名算法</h2><p data-sign="b10b6d34ed3381a824dc453a34614938" data-type="p" data-lines="1">第一步: 设所有发送或者接收到的数据为集合M，将集合M内非空参数值的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串stringA。</p><p data-sign="856ee7b52a457296eaea831577eff118" data-type="p" data-lines="1">注意:</p><ol data-sign="72baf4c9c8035c9d5defe5ea88c27f33list4" data-lines="4" class="cherry-list__default" start="1"><li>参数名ASCII码从小到大排序（字典序）</li><li>如果参数的值为空不参与签名</li><li>参数名区分大小写</li><li>传送的sign参数不参与签名，将生成的签名与该sign值作校验</li></ol><p data-sign="65192bdcf1013ef3c0b3efd9284ba4ff" data-type="p" data-lines="1">第二步: 在stringA最后拼接上企业微信应用secret，得到stringSignTemp字符串，并对stringSignTemp进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值signValue。</p><p data-sign="31e027f5ac7748de46ff5a6ea0d4706e" data-type="p" data-lines="10">企业微信签名字段说明：<br>发红包api固定如下几个字段参与签名：<br>act_name<br>mch_billno<br>mch_id<br>nonce_str<br>re_openid<br>total_amount<br>wxappid</p><p data-sign="7e54b3a20e848f7a2865c5c0707d4cdb" data-type="p" data-lines="10">付款api固定如下几个字段参与签名：<br>amount<br>appid<br>desc<br>mch_id<br>nonce_str<br>openid<br>partner_trade_no<br>ww_msg_type</p><p data-sign="72048a30eb20bda68d373534188e740b" data-type="p" data-lines="9">示例:请求内容:<br>act_name XXX<br>mch_billno 11111234567890<br>mch_id 10000098<br>nonce_str qFKEgfig76DF9912fewmkp<br>re_openid oxTWIuGaIt6gTKsQRLau2M0yL16E<br>total_amount 100<br>wxappid wx123456789</p><p data-sign="2c598355acafded298ef699e1c650ff6" data-type="p" data-lines="7">第一步: 对参数按照key=value的格式，并按照参数名ASCII字典序排序如下<br>stringA=”act_name=XXX&amp;mch_billno=11111234567890&amp;mch_id=10000098&amp;nonce_str=qFKEgfig76DF9912fewmkp&amp;re_openid=oxTWIuGaIt6gTKsQRLau2M0yL16E&amp;total_amount=100&amp;wxappid=wx123456789<br>第二步：拼接企业微信应用secret：<br>stringSignTemp="stringA&amp;secret=192006250b4c09247ec02edce69f6a2d"<br>sign=MD5(stringSignTemp).toUpperCase()<br>注：<code>企业微信应用secret</code>是指调用接口所传agentid对应的自建应用secret，历史上已经使用系统应用”企业支付“secret的，可继续使用。</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>