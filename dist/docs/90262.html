<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>获取打卡记录数据 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        获取打卡记录数据
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/12/16</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="6d2a3d2091b39b9cd725c9ddbc80d13a" data-type="p" data-lines="1">应用可通过本接口，获取可见范围内员工指定时间段内的打卡记录数据。</p><p data-sign="9ba1fd77e0c39315fab8ddba6d70d1ea" data-type="p" data-lines="3"><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong>https://qyapi.weixin.qq.com/cgi-bin/checkin/getcheckindata?access_token=ACCESS_TOKEN</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="2"><strong>请求示例：</strong></p><div data-sign="5ab5d1e1a5d779b3fc3f4e0b0d09ba9d" data-type="codeBlock" data-lines="11">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"opencheckindatatype"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"starttime"</span><span class="token operator">:</span> <span class="token number">1492617600</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"endtime"</span><span class="token operator">:</span> <span class="token number">1492790400</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"useridlist"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"james"</span><span class="token punctuation">,</span><span class="token string">"paul"</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span>
<span class="code-line"></span>
<span class="code-line"></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="2"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="73889a7a1fc987a08277d56f3db7665b" data-lines="7">
        <table class="cherry-table"><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>access_token</td><td>是</td><td>调用接口凭证，获取方式参考：<a href="https://work.weixin.qq.com/api/doc#90000/90135/91039" rel="nofollow" title="文档">文档-获取access_token</a></td></tr><tr><td>opencheckindatatype</td><td>是</td><td>打卡类型。1：上下班打卡；2：外出打卡；3：全部打卡</td></tr><tr><td>starttime</td><td>是</td><td>获取打卡记录的开始时间。Unix时间戳</td></tr><tr><td>endtime</td><td>是</td><td>获取打卡记录的结束时间。Unix时间戳</td></tr><tr><td>useridlist</td><td>是</td><td>需要获取打卡记录的用户列表</td></tr></tbody></table></div><blockquote data-sign="82cc87642518d1816154b6aaeb358178_5" data-lines="5">1. 获取记录时间跨度不超过30天<br>2. 用户列表不超过100个。若用户超过100个，请分批获取<br>3. 有打卡记录即可获取打卡数据，与当前"打卡应用"是否开启无关<br>4. 标准打卡时间只对于固定排班和自定义排班两种类型有效<br>5. 接口调用频率限制为600次/分钟</blockquote><p data-sign="d84a6dae9a93aad57482b5483cbdf831" data-type="p" data-lines="3"><strong>权限说明</strong>:<br>调用的应用需要满足如下的权限：</p><div class="cherry-table-container" data-sign="9b562c4fd46077d0eb60b84eaa4bc761" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<span style="color:#ff0000">打卡 - 可调用接口的应用</span>」中</td></tr><tr><td>代开发应用</td><td>具有「<span style="color:#ff0000">打卡</span>」权限</td></tr><tr><td>第三方应用</td><td>具有「<span style="color:#ff0000">打卡</span>」权限</td></tr></tbody></table></div><p data-sign="0d9e8df569fd1af08e5af1a04c3f7f01" data-type="p" data-lines="1"> <em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></p><p data-sign="0b789d7580f376b3feaff0d57431f7b7" data-type="p" data-lines="2"><strong>返回结果 ：</strong></p><div data-sign="a877e2fc41411f1d5fc33ebf484ae565" data-type="codeBlock" data-lines="43">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"errcode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"errmsg"</span><span class="token operator">:</span><span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"checkindata"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"userid"</span> <span class="token operator">:</span> <span class="token string">"james"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"groupname"</span> <span class="token operator">:</span> <span class="token string">"打卡一组"</span><span class="token punctuation">,</span>         </span>
<span class="code-line">		<span class="token string">"checkin_type"</span> <span class="token operator">:</span> <span class="token string">"上班打卡"</span><span class="token punctuation">,</span>      </span>
<span class="code-line">		<span class="token string">"exception_type"</span> <span class="token operator">:</span> <span class="token string">"地点异常"</span><span class="token punctuation">,</span>   </span>
<span class="code-line">		<span class="token string">"checkin_time"</span> <span class="token operator">:</span> <span class="token number">1492617610</span><span class="token punctuation">,</span>  </span>
<span class="code-line">		<span class="token string">"location_title"</span> <span class="token operator">:</span> <span class="token string">"依澜府"</span><span class="token punctuation">,</span>    </span>
<span class="code-line">		<span class="token string">"location_detail"</span> <span class="token operator">:</span> <span class="token string">"四川省成都市武侯区益州大道中段784号附近"</span><span class="token punctuation">,</span>  </span>
<span class="code-line">		<span class="token string">"wifiname"</span> <span class="token operator">:</span> <span class="token string">"办公一区"</span><span class="token punctuation">,</span>         </span>
<span class="code-line">		<span class="token string">"notes"</span> <span class="token operator">:</span> <span class="token string">"路上堵车，迟到了5分钟"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"wifimac"</span> <span class="token operator">:</span> <span class="token string">"3c:46:d8:0c:7a:70"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"mediaids"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"WWCISP_G8PYgRaOVHjXWUWFqchpBqqqUpGj0OyR9z6WTwhnMZGCPHxyviVstiv_2fTG8YOJq8L8zJT2T2OvTebANV-2MQ"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"sch_checkin_time"</span> <span class="token operator">:</span> <span class="token number">1492617610</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"groupid"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"schedule_id"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"timeline_id"</span> <span class="token operator">:</span> <span class="token number">2</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"userid"</span> <span class="token operator">:</span> <span class="token string">"paul"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"groupname"</span> <span class="token operator">:</span> <span class="token string">"打卡二组"</span><span class="token punctuation">,</span>         </span>
<span class="code-line">		<span class="token string">"checkin_type"</span> <span class="token operator">:</span> <span class="token string">"外出打卡"</span><span class="token punctuation">,</span>      </span>
<span class="code-line">		<span class="token string">"exception_type"</span> <span class="token operator">:</span> <span class="token string">"时间异常"</span><span class="token punctuation">,</span>   </span>
<span class="code-line">		<span class="token string">"checkin_time"</span> <span class="token operator">:</span> <span class="token number">1492617620</span><span class="token punctuation">,</span>  </span>
<span class="code-line">		<span class="token string">"location_title"</span> <span class="token operator">:</span> <span class="token string">"重庆出口加工区"</span><span class="token punctuation">,</span>    </span>
<span class="code-line">		<span class="token string">"location_detail"</span> <span class="token operator">:</span> <span class="token string">"重庆市渝北区金渝大道101号金渝大道"</span><span class="token punctuation">,</span>  </span>
<span class="code-line">		<span class="token string">"wifiname"</span> <span class="token operator">:</span> <span class="token string">"办公室二区"</span><span class="token punctuation">,</span>         </span>
<span class="code-line">		<span class="token string">"notes"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"wifimac"</span> <span class="token operator">:</span> <span class="token string">"3c:46:d8:0c:7a:71"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"mediaids"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"WWCISP_G8PYgRaOVHjXWUWFqchpBqqqUpGj0OyR9z6WTwhnMZGCPHxyviVstiv_2fTG8YOJq8L8zJT2T2OvTebANV-2MQ"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"lat"</span><span class="token operator">:</span> <span class="token number">30547645</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"lng"</span><span class="token operator">:</span> <span class="token number">104063236</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"deviceid"</span><span class="token operator">:</span><span class="token string">"E5FA89F6-3926-4972-BE4F-4A7ACF4701E2"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"sch_checkin_time"</span> <span class="token operator">:</span> <span class="token number">1492617610</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"groupid"</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"schedule_id"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"timeline_id"</span> <span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="c7e709c564d19bbf9b67664c8e4290bf" data-lines="20">
        <table class="cherry-table"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>userid</td><td>用户id</td></tr><tr><td>groupname</td><td>打卡规则名称</td></tr><tr><td>checkin_type</td><td>打卡类型。字符串，目前有：上班打卡，下班打卡，外出打卡，仅记录打卡时间和位置</td></tr><tr><td>exception_type</td><td>异常类型，字符串，包括：时间异常，地点异常，未打卡，wifi异常，非常用设备。如果有多个异常，以分号间隔</td></tr><tr><td>checkin_time</td><td>打卡时间。Unix时间戳</td></tr><tr><td>location_title</td><td>打卡地点title</td></tr><tr><td>location_detail</td><td>打卡地点详情</td></tr><tr><td>wifiname</td><td>打卡wifi名称</td></tr><tr><td>notes</td><td>打卡备注</td></tr><tr><td>wifimac</td><td>打卡的MAC地址/bssid</td></tr><tr><td>mediaids</td><td>打卡的附件media_id，可使用media/get获取附件</td></tr><tr><td>lat</td><td>位置打卡地点纬度，是实际纬度的1000000倍，与腾讯地图一致采用GCJ-02坐标系统标准</td></tr><tr><td>lng</td><td>位置打卡地点经度，是实际经度的1000000倍，与腾讯地图一致采用GCJ-02坐标系统标准</td></tr><tr><td>deviceid</td><td>打卡设备id</td></tr><tr><td>sch_checkin_time</td><td>标准打卡时间，指此次打卡时间对应的标准上班时间或标准下班时间</td></tr><tr><td>groupid</td><td>规则id，表示打卡记录所属规则的id</td></tr><tr><td>schedule_id</td><td>班次id，表示打卡记录所属规则中，所属班次的id</td></tr><tr><td>timeline_id</td><td>时段id，表示打卡记录所属规则中，某一班次中的某一时段的id，如上下班时间为9:00-12:00、13:00-18:00的班次中，9:00-12:00为其中一组时段</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>