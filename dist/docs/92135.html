<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>创建企业群发 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        创建企业群发
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/11/17</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="4ec4f31e7c4be32b499ee23011beac09-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E5%88%9B%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BE%A4%E5%8F%91" class="level-2">创建企业群发</a></li></dir><h2 id="%E5%88%9B%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BE%A4%E5%8F%91" data-sign="dd7278f6e069d1ec1bfaf9d39dadfaf6" data-lines="2"><a class="anchor" href="#%E5%88%9B%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BE%A4%E5%8F%91"></a>创建企业群发</h2><p data-sign="112013bfd8894186fd3a417339b884da" data-type="p" data-lines="5">企业跟第三方应用可通过此接口添加企业群发消息的任务并通知成员发送给相关客户或客户群。（注：企业微信终端需升级到2.7.5版本及以上）<br><strong>注意：调用该接口并不会直接发送消息给客户/客户群，需要成员确认后才会执行发送（客服人员的企业微信需要升级到2.7.5及以上版本）</strong><br><strong>旧接口<a href="#27708/" rel="nofollow">创建企业群发</a>已经废弃，接口升级后支持发送视频文件，并且支持最多同时发送9个附件。</strong><br><strong>仅会推送给最后跟客户进行聊天互动的企业成员。</strong><br>群发消息<strong>可以是企业统一创建发送的，也可以是成员自己创建发送的</strong>；每位客户/每个客户群每月最多可接收条数为当月天数，超过接收上限的客户/客户群将无法再收到群发消息。可在企业微信-群发助手-设置群发规则中调整为每周接收七条或每天接收一条。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="8dd75bf88d5da4df6d6d490c3277fdf9" data-type="p" data-lines="1"><strong>请求方式</strong>: <strong>POST(HTTP)</strong></p><p data-sign="1821fad90e9f3199a536900e080b13f9" data-type="p" data-lines="2"><strong>请求地址:</strong>https://qyapi.weixin.qq.com/cgi-bin/externalcontact/add_msg_template?access_token=ACCESS_TOKEN</p><p data-sign="8b8b131af4d7916d08149d0729990346" data-type="p" data-lines="2"><strong>请求示例</strong></p><div data-sign="9fda464ec70025ded8e76a89b4693a7c" data-type="codeBlock" data-lines="61">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"chat_type"</span><span class="token operator">:</span> <span class="token string">"single"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"external_userid"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token string">"woAJ2GCAAAXtWyujaWJHDDGi0mACAAAA"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"wmqfasd1e1927831123109rBAAAA"</span></span>
<span class="code-line">	<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"chat_id_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wr2GCAAAXtWyujaWJHDDGasdadAAA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"tag_filter"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"group_list"</span><span class="token operator">:</span></span>
<span class="code-line">		<span class="token punctuation">[</span></span>
<span class="code-line">			<span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"tag_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"ete19278asuMT123109rBAAAA"</span><span class="token punctuation">,</span><span class="token string">"ete19MT12278109UYteaBAAAA"</span><span class="token punctuation">]</span></span>
<span class="code-line">			<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"tag_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"eteIlKKHSDfuMT18Kg9rBAAAA"</span><span class="token punctuation">]</span></span>
<span class="code-line">			<span class="token punctuation">}</span></span>
<span class="code-line">		<span class="token punctuation">]</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"sender"</span><span class="token operator">:</span> <span class="token string">"zhangsan"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"allow_select"</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"text"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"content"</span><span class="token operator">:</span> <span class="token string">"文本消息内容"</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"attachments"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"image"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"pic_url"</span><span class="token operator">:</span> <span class="token string">"http://p.qpic.cn/pic_wework/3474110808/7a6344sdadfwehe42060/0"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"link"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"link"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"消息标题"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"picurl"</span><span class="token operator">:</span> <span class="token string">"https://example.pic.com/path"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"desc"</span><span class="token operator">:</span> <span class="token string">"消息描述"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"url"</span><span class="token operator">:</span> <span class="token string">"https://example.link.com/path"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"miniprogram"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"miniprogram"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"消息标题"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"pic_media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"appid"</span><span class="token operator">:</span> <span class="token string">"wx8bd80126147dfAAA"</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"page"</span><span class="token operator">:</span> <span class="token string">"/path/index.html"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"video"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"video"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"file"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="5b44afca820d54cb2adcc6b247d49f05" data-lines="24">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">调用接口凭证</td></tr><tr><td align="left">chat_type</td><td align="left">否</td><td align="left">群发任务的类型，默认为single，表示发送给客户，group表示发送给客户群</td></tr><tr><td align="left">external_userid</td><td align="left">否</td><td align="left">客户的externaluserid列表，仅在chat_type为single时有效，最多可一次指定<strong>1万</strong>个客户</td></tr><tr><td align="left">chat_id_list</td><td align="left">否</td><td align="left">客户群id列表，仅在chat_type为group时有效，最多可一次指定<strong>2000</strong>个客户群。指定群id之后，收到任务的群主无须再选择客户群，<strong>仅对4.1.10及以上版本的企业微信终端生效</strong></td></tr><tr><td align="left">tag_filter.group_list.tag_list</td><td align="left">否</td><td align="left">要进行群发的客户标签列表，同组标签之间按<strong>或</strong>关系进行筛选，不同组标签按<strong>且</strong>关系筛选，每组最多指定100个标签，支持规则组标签</td></tr><tr><td align="left">sender</td><td align="left">否</td><td align="left">发送企业群发消息的成员userid，当类型为发送给客户群时必填</td></tr><tr><td align="left">allow_select</td><td align="left">否</td><td align="left">是否允许成员在待发送客户列表中重新进行选择，默认为false，仅支持客户群发场景</td></tr><tr><td align="left">text.content</td><td align="left">否</td><td align="left">消息文本内容，最多4000个<strong>字节</strong></td></tr><tr><td align="left">attachments</td><td align="left">否</td><td align="left">附件，最多支持添加9个附件</td></tr><tr><td align="left">attachments.msgtype</td><td align="left">是</td><td align="left">附件类型，可选image、link、miniprogram、video或者file</td></tr><tr><td align="left">image.media_id</td><td align="left">否</td><td align="left">图片的media_id，可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得</td></tr><tr><td align="left">image.pic_url</td><td align="left">否</td><td align="left">图片的链接，<strong>仅可使用<a href="#13219" rel="nofollow">上传图片</a>接口得到的链接</strong></td></tr><tr><td align="left">link.title</td><td align="left">是</td><td align="left">图文消息标题，最长128个字节</td></tr><tr><td align="left">link.picurl</td><td align="left">否</td><td align="left">图文消息封面的url，最长2048个字节</td></tr><tr><td align="left">link.desc</td><td align="left">否</td><td align="left">图文消息的描述，最多512个<strong>字节</strong></td></tr><tr><td align="left">link.url</td><td align="left">是</td><td align="left">图文消息的链接，最长2048个字节</td></tr><tr><td align="left">miniprogram.title</td><td align="left">是</td><td align="left">小程序消息标题，最多64个<strong>字节</strong></td></tr><tr><td align="left">miniprogram.pic_media_id</td><td align="left">是</td><td align="left">小程序消息封面的mediaid，封面图建议尺寸为520*416</td></tr><tr><td align="left">miniprogram.appid</td><td align="left">是</td><td align="left">小程序appid（可以在微信公众平台上查询），必须是<strong>关联到企业的小程序应用</strong></td></tr><tr><td align="left">miniprogram.page</td><td align="left">是</td><td align="left">小程序page路径</td></tr><tr><td align="left">video.media_id</td><td align="left">是</td><td align="left">视频的media_id，可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得</td></tr><tr><td align="left">file.media_id</td><td align="left">是</td><td align="left">文件的media_id，可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><ul data-sign="246d1e13b37f5a73aa4ca6aa16c26152list4" data-lines="4" class="cherry-list__square"><li>对于客户群发，sender，external_userid，tag_filter不可同时为空，如果指定了external_userid,则tag_filter不生效</li><li>text和attachments不能同时为空</li><li>attachments中每个附件信息必须与msgtype一致，例如，msgtype指定为image，则需要填写image.pic_url或者image.media_id，否则会报错。</li><li>media_id和pic_url只需填写一个，两者同时填写时使用media_id，二者不可同时为空</li></ul><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="fccadf9a74816c35ab8e45d53ecb306a" data-type="p" data-lines="1"><strong>权限说明</strong>:</p><ul data-sign="232faec0e38395b947a8626a82593c67list5" data-lines="5" class="cherry-list__default"><li>企业需要使用配置到“<a href="#13473/%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91" rel="nofollow">可调用应用</a>”列表中的自建应用secret所获取的accesstoken来调用（<a href="#10013/%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96access_token" rel="nofollow">accesstoken如何获取？</a>）。</li><li>自建应用只能给应用可见范围内的成员进行推送。</li><li>第三方应用需具有“企业客户权限-&gt;客户联系-&gt;群发消息给客户和客户群”权限；营销获客类应用需要拥有“客户联系权限-&gt;消息推送权限-&gt;群发消息给客户和客户群”权限。</li><li>当只提供sender参数时，相当于选取了这个成员所有的客户。</li><li>注意：2019-8-1之后，取消了 “无法向未回复消息的客户发送企业群发消息” 的限制。</li></ul><p data-sign="25ff3159d1dae3e8ef08523b3dd72cc2" data-type="p" data-lines="1"><strong>返回结果</strong>:</p><div data-sign="a7b57c0c1ed345f19aefacd383c6c2dd" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"fail_list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"wmqfasd1e1927831123109rBAAAA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"msgid"</span><span class="token operator">:</span><span class="token string">"msgGCAAAXtWyujaWJHDDGi0mAAAA"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="d47aa0b67d994e7ac250a9bf6fe2ccc3" data-lines="6">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">对返回码的文本描述内容</td></tr><tr><td align="left">fail_list</td><td align="left">无效或无法发送的external_userid或chatid列表</td></tr><tr><td align="left">msgid</td><td align="left">企业群发消息的id，可用于<a href="#25429/%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E7%BE%A4%E5%8F%91%E6%88%90%E5%91%98%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C" rel="nofollow">获取群发消息发送结果</a></td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>