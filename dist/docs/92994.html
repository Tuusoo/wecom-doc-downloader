<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>批量获取客户详情 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        批量获取客户详情
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/11/17</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="bb80f8904aaa23669d673161fed54d38" data-type="p" data-lines="1">企业/第三方可通过此接口获取指定成员添加的客户信息列表。</p><p data-sign="7e1d8140a19ea3cc835a0720a3ac7342" data-type="p" data-lines="3"><strong>请求方式：</strong>POST（<strong>HTTPS</strong>）<br><strong>请求地址：</strong>https://qyapi.weixin.qq.com/cgi-bin/externalcontact/batch/get_by_user?access_token=ACCESS_TOKEN</p><p data-sign="0eaf88df03cd3784619d00af1ca68a35" data-type="p" data-lines="2"><strong>请求示例：</strong></p><div data-sign="d7083ab5af85caf8151da3428f59e65f" data-type="codeBlock" data-lines="12">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"userid_list"</span><span class="token operator">:</span></span>
<span class="code-line">   <span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token string">"zhangsan"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"lisi"</span></span>
<span class="code-line">	<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"cursor"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"limit"</span><span class="token operator">:</span><span class="token number">100</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="6b0cc1ed2aab932e72fe7739f4a6a25f" data-lines="6">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">调用接口凭证</td></tr><tr><td align="left">userid_list</td><td align="left">是</td><td align="left">企业成员的userid列表，字符串类型，最多支持100个</td></tr><tr><td align="left">cursor</td><td align="left">否</td><td align="left">用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填</td></tr><tr><td align="left">limit</td><td align="left">否</td><td align="left">返回的最大记录数，整型，最大值100，默认值50，超过最大值时取最大值</td></tr></tbody></table></div><p data-sign="br4" data-type="br" data-lines="4">&nbsp;</p><p data-sign="a7172429279f0ba5ca47fd99e6f06974" data-type="p" data-lines="2"><strong>权限说明:</strong><br>调用接口的应用需要满足如下的权限：</p><div class="cherry-table-container" data-sign="bd2f25b7d87d12f73e71b40629f07334" data-lines="5">
        <table class="cherry-table"><thead><tr><th>应用类型</th><th>权限要求</th></tr></thead><tbody><tr><td>自建应用</td><td>配置到「<a href="#13473/%E9%85%8D%E7%BD%AE%E5%8F%AF%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BA%94%E7%94%A8" rel="nofollow">客户联系 可调用接口的应用</a>」中</td></tr><tr><td>代开发应用</td><td>具有「<span style="color:#ff0000">客户基础信息</span>」权限</td></tr><tr><td>第三方应用</td><td>具有「<span style="color:#ff0000">客户基础信息</span>」权限<br>营销获客类应用具有「<span style="color:#ff0000">建联客户信息</span>」权限</td></tr></tbody></table></div><p data-sign="5395ca942104767e4df931e92639aa53" data-type="p" data-lines="2">应用只能获取到可见范围内的成员。<br>「营销获客」应用只能获取到该应用带来的客户，同时跟进人在应用可见范围或客户可建联的成员范围。</p><p data-sign="0d9e8df569fd1af08e5af1a04c3f7f01" data-type="p" data-lines="2"> <em>注：</em> 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 <a href="https://developer.work.weixin.qq.com/document/51165" rel="nofollow">查看详情</a></p><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="2"><strong>返回结果：</strong></p><div data-sign="207098fb5f712376b86f165933cb48d9" data-type="codeBlock" data-lines="106">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">   <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span></span>
<span class="code-line">   <span class="token string">"external_contact_list"</span><span class="token operator">:</span></span>
<span class="code-line">	<span class="token punctuation">[</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"external_contact"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"external_userid"</span><span class="token operator">:</span><span class="token string">"woAJ2GCAAAXtWyujaWJHDDGi0mACHAAA"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"李四"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"position"</span><span class="token operator">:</span><span class="token string">"Manager"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"avatar"</span><span class="token operator">:</span><span class="token string">"http://p.qlogo.cn/bizmail/IcsdgagqefergqerhewSdage/0"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"corp_name"</span><span class="token operator">:</span><span class="token string">"腾讯"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"corp_full_name"</span><span class="token operator">:</span><span class="token string">"腾讯科技有限公司"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"type"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"gender"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"unionid"</span><span class="token operator">:</span><span class="token string">"ozynqsulJFCZ2z1aYeS8h-nuasdAAA"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"external_profile"</span><span class="token operator">:</span></span>
<span class="code-line">        		<span class="token punctuation">{</span></span>
<span class="code-line">             	<span class="token string">"external_attr"</span><span class="token operator">:</span></span>
<span class="code-line">              	<span class="token punctuation">[</span></span>
<span class="code-line">              		<span class="token punctuation">{</span></span>
<span class="code-line">                  	<span class="token string">"type"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">                  	<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"文本名称"</span><span class="token punctuation">,</span></span>
<span class="code-line">                  	 <span class="token string">"text"</span><span class="token operator">:</span></span>
<span class="code-line">                    	<span class="token punctuation">{</span></span>
<span class="code-line">                       	<span class="token string">"value"</span><span class="token operator">:</span><span class="token string">"文本"</span></span>
<span class="code-line">                    	<span class="token punctuation">}</span></span>
<span class="code-line">              		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">              		<span class="token punctuation">{</span></span>
<span class="code-line">              		<span class="token string">"type"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">              		<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"网页名称"</span><span class="token punctuation">,</span></span>
<span class="code-line">              		<span class="token string">"web"</span><span class="token operator">:</span></span>
<span class="code-line">              		<span class="token punctuation">{</span></span>
<span class="code-line">                      <span class="token string">"url"</span><span class="token operator">:</span><span class="token string">"http://www.test.com"</span><span class="token punctuation">,</span></span>
<span class="code-line">                      <span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"标题"</span></span>
<span class="code-line">              		<span class="token punctuation">}</span></span>
<span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">                <span class="token punctuation">{</span></span>
<span class="code-line">                  <span class="token string">"type"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">                  <span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"测试app"</span><span class="token punctuation">,</span></span>
<span class="code-line">                  <span class="token string">"miniprogram"</span><span class="token operator">:</span></span>
<span class="code-line">                  <span class="token punctuation">{</span></span>
<span class="code-line">                      <span class="token string">"appid"</span><span class="token operator">:</span> <span class="token string">"wx8bd80126147df384"</span><span class="token punctuation">,</span></span>
<span class="code-line">                      <span class="token string">"pagepath"</span><span class="token operator">:</span> <span class="token string">"/index"</span><span class="token punctuation">,</span></span>
<span class="code-line">                      <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"my miniprogram"</span></span>
<span class="code-line">                  <span class="token punctuation">}</span></span>
<span class="code-line">                <span class="token punctuation">}</span></span>
<span class="code-line">              <span class="token punctuation">]</span></span>
<span class="code-line">     		<span class="token punctuation">}</span></span>
<span class="code-line">			<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"follow_info"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"userid"</span><span class="token operator">:</span><span class="token string">"rocky"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"remark"</span><span class="token operator">:</span><span class="token string">"李部长"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"对接采购事务"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"createtime"</span><span class="token operator">:</span><span class="token number">1525779812</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"tag_id"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"etAJ2GCAAAXtWyujaWJHDDGi0mACHAAA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"remark_corp_name"</span><span class="token operator">:</span><span class="token string">"腾讯科技"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"remark_mobiles"</span><span class="token operator">:</span></span>
<span class="code-line">				<span class="token punctuation">[</span></span>
<span class="code-line">              		<span class="token string">"13800000001"</span><span class="token punctuation">,</span></span>
<span class="code-line">              		<span class="token string">"13000000002"</span></span>
<span class="code-line">				<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"oper_userid"</span><span class="token operator">:</span><span class="token string">"rocky"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"add_way"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="code-line">		        <span class="token string">"wechat_channels"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		            <span class="token string">"nickname"</span><span class="token operator">:</span> <span class="token string">"视频号名称"</span><span class="token punctuation">,</span></span>
<span class="code-line">					<span class="token string">"source"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="code-line">		        <span class="token punctuation">}</span></span>
<span class="code-line">			<span class="token punctuation">}</span></span>
<span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"external_contact"</span><span class="token operator">:</span></span>
<span class="code-line">			 <span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"external_userid"</span><span class="token operator">:</span><span class="token string">"woAJ2GCAAAXtWyujaWJHDDGi0mACHBBB"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"王五"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"position"</span><span class="token operator">:</span><span class="token string">"Engineer"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"avatar"</span><span class="token operator">:</span><span class="token string">"http://p.qlogo.cn/bizmail/IcsdgagqefergqerhewSdage/0"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"corp_name"</span><span class="token operator">:</span><span class="token string">"腾讯"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"corp_full_name"</span><span class="token operator">:</span><span class="token string">"腾讯科技有限公司"</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"type"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"gender"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="code-line">        		<span class="token string">"unionid"</span><span class="token operator">:</span><span class="token string">"ozynqsulJFCZ2asdaf8h-nuasdAAA"</span></span>
<span class="code-line">	 		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">			<span class="token string">"follow_info"</span><span class="token operator">:</span></span>
<span class="code-line">			<span class="token punctuation">{</span></span>
<span class="code-line">				<span class="token string">"userid"</span><span class="token operator">:</span><span class="token string">"lisi"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"remark"</span><span class="token operator">:</span><span class="token string">"王助理"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"采购问题咨询"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"createtime"</span><span class="token operator">:</span><span class="token number">1525881637</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"tag_id"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"etAJ2GCAAAXtWyujaWJHDDGi0mACHAAA"</span><span class="token punctuation">,</span><span class="token string">"stJHDDGi0mAGi0mACHBBByujaW"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"state"</span><span class="token operator">:</span><span class="token string">"外联二维码1"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"oper_userid"</span><span class="token operator">:</span><span class="token string">"woAJ2GCAAAd1asdasdjO4wKmE8AabjBBB"</span><span class="token punctuation">,</span></span>
<span class="code-line">				<span class="token string">"add_way"</span><span class="token operator">:</span><span class="token number">3</span></span>
<span class="code-line">			<span class="token punctuation">}</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"next_cursor"</span><span class="token operator">:</span><span class="token string">"r9FqSqsI8fgNbHLHE5QoCP50UIg2cFQbfma3l2QsmwI"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"fail_info"</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="code-line">		 <span class="token string">"unlicensed_userid_list"</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"lisi"</span><span class="token punctuation">]</span></span>
<span class="code-line">	 <span class="token punctuation">}</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="6cb6dc20e603f5f056c3e04df9bab0f6" data-lines="8">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">对返回码的文本描述内容</td></tr><tr><td align="left">external_contact_list.external_contact</td><td align="left">客户的基本信息，可以参考<a href="#13878" rel="nofollow">获取客户详情</a></td></tr><tr><td align="left">external_contact_list.follow_info</td><td align="left">企业成员客户跟进信息，可以参考<a href="#13878" rel="nofollow">获取客户详情</a>，但标签信息只会返回企业标签和规则组标签的tag_id，个人标签将不再返回</td></tr><tr><td align="left">next_cursor</td><td align="left">分页游标，再下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空</td></tr><tr><td align="left">fail_info.unlicensed_userid_list</td><td align="left">注：若请求中所有userid都无有效互通许可，接口直接报错701008。如果部分userid无有效互通许可，接口返回成功，该字段为无许可的userid列表</td></tr></tbody></table></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>