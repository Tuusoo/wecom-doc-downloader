<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>镜像文件配置指引 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        镜像文件配置指引
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/01/20</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><dir class="toc" data-sign="f80a67881a5a0efcbc104a292743fbe1-1" data-lines="1"><p class="toc-title">目录</p><li class="toc-li"><a href="#%E6%A6%82%E8%BF%B0" class="level-2">概述</a></li><li class="toc-li"><a href="#%E5%87%86%E5%A4%87%E9%95%9C%E5%83%8F" class="level-2">准备镜像</a></li><li class="toc-li"><a href="#%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F" class="level-2">配置镜像</a></li></dir><h2 id="%E6%A6%82%E8%BF%B0" data-sign="9a8437ccee43ad66c084b8dfd3d259d3" data-lines="2"><a class="anchor" href="#%E6%A6%82%E8%BF%B0"></a>概述</h2><p data-sign="4143750b070ef4240982fda3cc2308c0" data-type="p" data-lines="1">企业微信提供「数据分析专区」能力，企业可将代码镜像部署在数据分析专区，使用企业会话内容进行分析。</p><h2 id="%E5%87%86%E5%A4%87%E9%95%9C%E5%83%8F" data-sign="31a2900229a7384cb8e859c6df5442fc" data-lines="2"><a class="anchor" href="#%E5%87%86%E5%A4%87%E9%95%9C%E5%83%8F"></a>准备镜像</h2><p data-sign="3af3f6aa560f949fdf1425b315873579" data-type="p" data-lines="2">使用 <a href="https://docs.docker.com/engine/reference/commandline/export/#docker-export" rel="nofollow">docker-export</a> 将运行环境导出<code>tar</code>包，用于数据与智能专区的镜像导入。<span style="color:#ff0000">请特别注意不能用 docker-save命令生成<code>tar</code>包，否则可能无法执行启动命令。</span><br>docker 的相关使用请参考<a href="https://docs.docker.com/reference/" rel="nofollow">官方文档</a>。</p><h2 id="%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F" data-sign="2d8f02c8b8b1ca2087d7ee280f3a0cec" data-lines="2"><a class="anchor" href="#%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F"></a>配置镜像</h2><p data-sign="51ae394aa0086c1f8e8c8026c2787001" data-type="p" data-lines="2">从「管理端 - 管理工具 - 数据与智能专区」入口进入专区。<br><img src="images/99955/2ba659b5.png" alt="enter image description here"></p><p data-sign="efa8a8e5c0a19885e8dcc8fd1d4c4cad" data-type="p" data-lines="3">点击「添加自建模型/程序」，选择要添加自有模型/程序，进入到创建页面。支持最多添加1个自有模型以及2个自有程序。<br><img src="images/99955/9de938de.png" alt="enter image description here"></p><div data-sign="701939fe36e60e915624669a8a15d574" data-type="div" data-lines="5">下面以「添加自有模型」为例进行说明。<br>点击「配置」模型镜像文件，上传镜像文件，以及配置相应的启动命令和参数。<br><img src="images/99955/f0a8ad9b.png" alt="enter image description here"><span></span><div class="colorful_tips colorful_tips_danger"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiByeD0iOCIgZmlsbD0iI0FBMzUyRCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjUzMDMgNS41MzAzM0MxMS44MjMyIDUuMjM3NDQgMTEuODIzMiA0Ljc2MjU2IDExLjUzMDMgNC40Njk2N0MxMS4yMzc0IDQuMTc2NzggMTAuNzYyNiA0LjE3Njc4IDEwLjQ2OTcgNC40Njk2N0w4IDYuOTM5MzRMNS41MzAzMyA0LjQ2OTY3QzUuMjM3NDQgNC4xNzY3OCA0Ljc2MjU2IDQuMTc2NzggNC40Njk2NyA0LjQ2OTY3QzQuMTc2NzggNC43NjI1NiA0LjE3Njc4IDUuMjM3NDQgNC40Njk2NyA1LjUzMDMzTDYuOTM5MzQgOEw0LjQ2OTY3IDEwLjQ2OTdDNC4xNzY3OCAxMC43NjI2IDQuMTc2NzggMTEuMjM3NCA0LjQ2OTY3IDExLjUzMDNDNC43NjI1NiAxMS44MjMyIDUuMjM3NDQgMTEuODIzMiA1LjUzMDMzIDExLjUzMDNMOCA5LjA2MDY2TDEwLjQ2OTcgMTEuNTMwM0MxMC43NjI2IDExLjgyMzIgMTEuMjM3NCAxMS44MjMyIDExLjUzMDMgMTEuNTMwM0MxMS44MjMyIDExLjIzNzQgMTEuODIzMiAxMC43NjI2IDExLjUzMDMgMTAuNDY5N0w5LjA2MDY2IDhMMTEuNTMwMyA1LjUzMDMzWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==">特别注意</div><div class="colorful_tips_cnt">Oracle JDK需要付费获得Oracle授权方可使用，严禁部署包含未授权的Oracle JDK的镜像到专区，否则产生的风险和后果由上传者承担！开发者可以使用<a href="https://openjdk.org/" rel="nofollow">OpenJDK</a>或Kona JDK(<a href="https://github.com/Tencent/TencentKona-8/releases/" rel="nofollow">Kona 8</a>、<a href="https://github.com/Tencent/TencentKona-11/releases/" rel="nofollow">Kona 11</a>、<a href="https://github.com/Tencent/TencentKona-17/releases/" rel="nofollow">Kona 17</a>或更新的Kona版本)。<br></div></div></div><ul data-sign="cb31039c1a9e4290992961af20210745list2" data-lines="2" class="cherry-list__default"><li>镜像文件：将 <a href="https://docs.docker.com/engine/reference/commandline/export/#docker-export" rel="nofollow">docker-export</a> 导出<code>tar</code>包，上传至此。</li><li>启动命令/参数：指定镜像启动命令/参数，即<a href="https://docs.docker.com/engine/reference/commandline/exec/" rel="nofollow">docker exec</a>的<code>COMMAND</code>。</li></ul><blockquote data-sign="e40a805f909e06c03a3d8416bf613f09_5" data-lines="5">镜像部署到数据专区后，<code>PATH</code>和<code>ENV</code>配置信息可能会丢失，导致部署失败。<br>解决方案参考：<br>1. 启动命令和参数指定绝对路径，例如 /usr/local/openjdk-8/bin/java。<br>2. 启动命令封装一层脚本，在脚本里先设置相关配置信息，然后再执行真正的启动命令，例如 /usr/local/wwspecdemo/start.sh<br><div data-sign="39d740e333ececf79c34d08247cfd230" data-type="codeBlock" data-lines="5">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"># <span class="token operator">...</span></span>
<span class="code-line">source <span class="token operator">/</span>etc<span class="token operator">/</span>profile</span>
<span class="code-line">python3 <span class="token operator">-</span>u demoloadsdk<span class="token punctuation">.</span>py</span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div></blockquote></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>