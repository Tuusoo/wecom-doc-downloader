<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>发送新客户欢迎语 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        发送新客户欢迎语
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2025/11/17</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><div data-sign="05bfffd1e176074c941633f93da60d03" data-type="div" data-lines="8">企业微信在向企业推送<a href="#15260/%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%BA%8B%E4%BB%B6" rel="nofollow">添加外部联系人事件</a>时，会额外返回一个welcome_code，企业以此为凭据调用接口，即可通过成员向新添加的客户发送个性化的欢迎语。调用此接口前，请明确以下信息:<div class="colorful_tips colorful_tips_details"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iOCIgY3k9IjgiIHI9IjgiIGZpbGw9IiMwQTExMUEiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOCAzQzcuNDQ3NzIgMyA3IDMuNDQ3NzIgNyA0QzcgNC41NTIyOCA3LjQ0NzcyIDUgOCA1QzguNTUyMjggNSA5IDQuNTUyMjggOSA0QzkgMy40NDc3MiA4LjU1MjI4IDMgOCAzWk04IDdDNy40NDc3MiA3IDcgNy40NDc3MiA3IDhWMTJDNyAxMi41NTIzIDcuNDQ3NzIgMTMgOCAxM0M4LjU1MjI4IDEzIDkgMTIuNTUyMyA5IDEyVjhDOSA3LjQ0NzcyIDguNTUyMjggNyA4IDdaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">说明</div><div class="colorful_tips_cnt">1.为了保证用户体验以及避免滥用，企业仅可在收到相关事件后20秒内调用，且只可调用一次。<br>2.如果企业已经在管理端为相关成员配置了可用的欢迎语，则推送添加外部联系人事件时不会返回welcome_code。<br>3.如果欢迎语已成功下发给客户，应用再调用该接口时，将返回<strong>41051（externaluser has started chatting）</strong>。<br>4.<strong>长期未登录企业微信的成员无法发送欢迎语。</strong><br>5.每次添加新客户时可能有多个企业自建应用/第三方应用收到带有welcome_code的回调事件，当多个应用同时调用发送欢迎语接口时，<strong>仅最先调用接口的应用</strong>可以成功，其他应用返回<strong>41096(welcome msg is being distributed)</strong>错误。请注意，返回41096错误码表示当前已有其他应用正在发送欢迎语，不代表欢迎语已经下发成功，存在下发失败的可能性，故调用方可以重试；如果返回了41051，则代表欢迎语已成功下发，无需重试。为了保证用户体验，请根据实际业务需求，合理配置应用可见范围。<br></div></div><div class="colorful_tips colorful_tips_tip"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSI4IiBmaWxsPSIjMTU4ODMxIi8+PHBhdGggZD0iTTUgNS44NTkwOUM1IDYuMjczMyA1LjMzNTc5IDYuNjA5MDkgNS43NSA2LjYwOTA5QzYuMTY0MjEgNi42MDkwOSA2LjUgNi4yNzMzIDYuNSA1Ljg1OTA5SDVaTTcuMjUgOS4yNUM3LjI1IDkuNjY0MjEgNy41ODU3OSAxMCA4IDEwQzguNDE0MjEgMTAgOC43NSA5LjY2NDIxIDguNzUgOS4yNUg3LjI1Wk04LjEwMDA2IDcuOTY2MTNMOC4wNjkzMiA3LjIxNjc2TDguMTAwMDYgNy45NjYxM1pNOS41IDUuODU5MDlDOS41IDYuNTQ2MjkgOC45MDkgNy4xODIzMiA4LjA2OTMyIDcuMjE2NzZMOC4xMzA4IDguNzE1NUM5LjY4MzUzIDguNjUxODEgMTEgNy40Mzg2NyAxMSA1Ljg1OTA5SDkuNVpNNi41IDUuODU5MDlDNi41IDUuMTUzNDQgNy4xMjUxNCA0LjUgOCA0LjVWM0M2LjM4OTU4IDMgNSA0LjIzNTExIDUgNS44NTkwOUg2LjVaTTggNC41QzguODc0ODYgNC41IDkuNSA1LjE1MzQ0IDkuNSA1Ljg1OTA5SDExQzExIDQuMjM1MTEgOS42MTA0MiAzIDggM1Y0LjVaTTcuMjUgOC4wNjgxOFY5LjI1SDguNzVWOC4wNjgxOEg3LjI1Wk04LjA2OTMyIDcuMjE2NzZDNy42MzI4MyA3LjIzNDY3IDcuMjUgNy41OTAzOCA3LjI1IDguMDY4MThIOC43NUM4Ljc1IDguNDM1NTMgOC40NTY5MiA4LjcwMjEzIDguMTMwOCA4LjcxNTVMOC4wNjkzMiA3LjIxNjc2WiIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTIiIHI9IjEiIGZpbGw9IndoaXRlIi8+PC9zdmc+">提示</div><div class="colorful_tips_cnt"><strong>旧接口<a href="#27719" rel="nofollow">发送新客户欢迎语</a>已经废弃，接口升级后支持发送视频文件，并且最多支持同时发送9个附件。</strong><br></div></div></div><p data-sign="br5" data-type="br" data-lines="5">&nbsp;</p><p data-sign="8dd75bf88d5da4df6d6d490c3277fdf9" data-type="p" data-lines="1"><strong>请求方式</strong>: <strong>POST(HTTP)</strong></p><p data-sign="9e6506cdb6d59f1fda9de2e9348149a2" data-type="p" data-lines="2"><strong>请求地址:</strong>https://qyapi.weixin.qq.com/cgi-bin/externalcontact/send_welcome_msg?access_token=ACCESS_TOKEN</p><p data-sign="8b8b131af4d7916d08149d0729990346" data-type="p" data-lines="2"><strong>请求示例</strong></p><div data-sign="ac251c5785cb352967eb866d717f755f" data-type="codeBlock" data-lines="43">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"welcome_code"</span><span class="token operator">:</span> <span class="token string">"CALLBACK_CODE"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"text"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"content"</span><span class="token operator">:</span> <span class="token string">"文本消息内容"</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"attachments"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"image"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">"media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"pic_url"</span><span class="token operator">:</span> <span class="token string">"http://p.qpic.cn/pic_wework/3474110808/7a6344sdadfwehe42060/0"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"link"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"link"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"消息标题"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"picurl"</span><span class="token operator">:</span> <span class="token string">"https://example.pic.com/path"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"desc"</span><span class="token operator">:</span> <span class="token string">"消息描述"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"url"</span><span class="token operator">:</span> <span class="token string">"https://example.link.com/path"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"miniprogram"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"miniprogram"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"消息标题"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"pic_media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"appid"</span><span class="token operator">:</span> <span class="token string">"wx8bd80126147dfAAA"</span><span class="token punctuation">,</span></span>
<span class="code-line">            <span class="token string">"page"</span><span class="token operator">:</span> <span class="token string">"/path/index.html"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"msgtype"</span><span class="token operator">:</span> <span class="token string">"video"</span><span class="token punctuation">,</span></span>
<span class="code-line">        <span class="token string">"video"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">            <span class="token string">"media_id"</span><span class="token operator">:</span> <span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">        <span class="token punctuation">}</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"msgtype"</span><span class="token operator">:</span><span class="token string">"file"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"file"</span><span class="token operator">:</span></span>
<span class="code-line">		<span class="token punctuation">{</span></span>
<span class="code-line">			<span class="token string">"media_id"</span><span class="token operator">:</span><span class="token string">"MEDIA_ID"</span></span>
<span class="code-line">		<span class="token punctuation">}</span></span>
<span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="066d250079e7640b317815c86e88444e" data-lines="19">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">必须</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">access_token</td><td align="left">是</td><td align="left">调用接口凭证</td></tr><tr><td align="left">welcome_code</td><td align="left">是</td><td align="left">通过<a href="#15260/%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%83%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E4%BA%8B%E4%BB%B6" rel="nofollow">添加外部联系人事件</a>推送给企业的发送欢迎语的凭证，有效期为<strong>20秒</strong></td></tr><tr><td align="left">text.content</td><td align="left">否</td><td align="left">消息文本内容,最长为4000字节</td></tr><tr><td align="left">attachments</td><td align="left">否</td><td align="left">附件，最多可添加9个附件</td></tr><tr><td align="left">attachments.msgtype</td><td align="left">是</td><td align="left">附件类型，可选image、link、miniprogram或者video</td></tr><tr><td align="left">image.media_id</td><td align="left">否</td><td align="left">图片的media_id，可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得</td></tr><tr><td align="left">image.pic_url</td><td align="left">否</td><td align="left">图片的链接，<strong>仅可使用<a href="#13219" rel="nofollow">上传图片</a>接口得到的链接</strong></td></tr><tr><td align="left">link.title</td><td align="left">是</td><td align="left">图文消息标题，最长为128字节</td></tr><tr><td align="left">link.picurl</td><td align="left">否</td><td align="left">图文消息封面的url</td></tr><tr><td align="left">link.desc</td><td align="left">否</td><td align="left">图文消息的描述，最长为512字节</td></tr><tr><td align="left">link.url</td><td align="left">是</td><td align="left">图文消息的链接</td></tr><tr><td align="left">miniprogram.title</td><td align="left">是</td><td align="left">小程序消息标题，最长为64字节</td></tr><tr><td align="left">miniprogram.pic_media_id</td><td align="left">是</td><td align="left">小程序消息封面的mediaid，封面图建议尺寸为520*416</td></tr><tr><td align="left">miniprogram.appid</td><td align="left">是</td><td align="left">小程序appid，必须是<strong>关联到企业的小程序应用</strong></td></tr><tr><td align="left">miniprogram.page</td><td align="left">是</td><td align="left">小程序page路径</td></tr><tr><td align="left">video.media_id</td><td align="left">是</td><td align="left">视频的media_id，可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得</td></tr><tr><td align="left">file.media_id</td><td align="left">是</td><td align="left">文件的media_id,  可以通过<a href="#10112" rel="nofollow">素材管理</a>接口获得</td></tr></tbody></table></div><blockquote data-sign="d24dacff1e3f2a1f8c64f6b485b77282_4" data-lines="4">* text和attachments不能同时为空；</blockquote><ul data-sign="d7ed34621a2573e5789e6de99fab5101list3" data-lines="3" class="cherry-list__square"><li>text与附件信息可以同时发送，此时将会以多条消息的形式触达客户</li><li>attachments中每个附件信息必须与msgtype一致，例如，msgtype指定为image，则需要填写image.pic_url或者image.media_id，否则会报错。</li><li>media_id和pic_url只需填写一个，两者同时填写时使用media_id，二者不可同时为空。</li></ul><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><p data-sign="fccadf9a74816c35ab8e45d53ecb306a" data-type="p" data-lines="1"><strong>权限说明</strong>:</p><ul data-sign="9d09810c61d9fc611843cf346ec70f20list3" data-lines="3" class="cherry-list__default"><li>企业需要使用配置到“<a href="#13473/%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91" rel="nofollow">可调用应用</a>”列表中的自建应用secret所获取的accesstoken来调用（<a href="#10013/%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96access_token" rel="nofollow">accesstoken如何获取？</a>）。</li><li>第三方应用需要拥有“企业客户权限-&gt;客户联系-&gt;给客户发送欢迎语”权限；营销获客类应用需要拥有“客户联系权限-&gt;消息推送权限-&gt;给客户发送欢迎语”权限。</li><li>企业成员需在应用的可见范围内</li></ul><p data-sign="br4" data-type="br" data-lines="4">&nbsp;</p><p data-sign="25ff3159d1dae3e8ef08523b3dd72cc2" data-type="p" data-lines="1"><strong>返回结果</strong>:</p><div data-sign="3f75c093669afeb895db71d10113bfa9" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token string">"errcode"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"errmsg"</span><span class="token operator">:</span> <span class="token string">"ok"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="2"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="b87fedf6444137ea4357643aed9ef657" data-lines="4">
        <table class="cherry-table"><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">errcode</td><td align="left">返回码</td></tr><tr><td align="left">errmsg</td><td align="left">对返回码的文本描述内容</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>