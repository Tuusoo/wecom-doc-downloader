<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>交易账单申请 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        交易账单申请
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2024/12/09</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><p data-sign="475d7a0a558fc093c05a4f28f3bf6401" data-type="p" data-lines="1">按天提供交易账单文件，服务商可以通过该接口获取账单文件的下载地址。文件内包含交易相关的金额、时间、营销等信息，供商户核对订单、退款、银行到账等情况。</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="2ced39adb220200032634335eb57f38e" data-type="p" data-lines="2"><strong>请求方式:</strong> POST(HTTPS)<br><strong>请求URL</strong>: https://qyapi.weixin.qq.com/cgi-bin/miniapppay/get_bill?access_token=ACCESS_TOKEN</p><p data-sign="8a9affe8c49f861be4739ea1170e480a" data-type="p" data-lines="2"><strong>请求包体</strong></p><div data-sign="ac021832fd386e3ca4f96a1524c453f9" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">	<span class="token string">"bill_date"</span><span class="token operator">:</span><span class="token string">"xx"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"mchid"</span><span class="token operator">:</span><span class="token string">"xx"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"bill_type"</span><span class="token operator">:</span><span class="token string">"xx"</span><span class="token punctuation">,</span></span>
<span class="code-line">	<span class="token string">"tar_type"</span><span class="token operator">:</span><span class="token string">"xx"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="aa23204fbe4fd4230ddbc285930d9e58" data-type="p" data-lines="1"><strong>参数说明</strong>:</p><div class="cherry-table-container" data-sign="55bef50c37be37e6b7eedc64b14d0be0" data-lines="6">
        <table class="cherry-table"><thead><tr><th align="left">参数名</th><th>变量</th><th>类型[长度限制]</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td align="left">账单日期</td><td>bill_date</td><td>string[10,10]</td><td>是</td><td>query 格式yyyy-MM-dd<br>仅支持三个月内的账单下载申请。<br>示例值：2019-06-11</td></tr><tr><td align="left">商户号</td><td>mchid</td><td>string[8,32]</td><td>是</td><td>用于下载某个商户下的交易或退款数据。<br>示例值：1900000001</td></tr><tr><td align="left">账单类型</td><td>bill_type</td><td>string[1,32]</td><td>否</td><td>query 不填则默认是ALL<br>枚举值：<br>ALL：返回当日所有订单信息（不含充值退款订单）<br>SUCCESS：返回当日成功支付的订单（不含充值退款订单）<br>REFUND：返回当日退款订单（不含充值退款订单）<br>示例值：ALL</td></tr><tr><td align="left">压缩类型</td><td>tar_type</td><td>string[1,32]</td><td>否</td><td>query 不填则默认是数据流<br>枚举值：<br>GZIP：返回格式为.gzip的压缩包账单<br>示例值：GZIP</td></tr></tbody></table></div><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="2"><strong>返回结果：</strong></p><div data-sign="57e27e39279c15e00a0a48e98e9588bb" data-type="codeBlock" data-lines="9">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">		<span class="token string">"download_url"</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"hash_type"</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"hash_value"</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">		<span class="token string">"auth"</span><span class="token operator">:</span> <span class="token string">"xxx"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="54d2f7abd4f226094d9bdd35b3129b56" data-type="p" data-lines="1"><strong>参数说明</strong></p><div class="cherry-table-container" data-sign="19b4efe281ce3719b1b7066ec6cfdc04" data-lines="6">
        <table class="cherry-table"><thead><tr><th align="left">参数名</th><th>变量</th><th>类型[长度限制]</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td align="left">哈希类型</td><td>hash_type</td><td>string[1,32]</td><td>是</td><td>枚举值：<br>SHA1：SHA1值<br>示例值：SHA1</td></tr><tr><td align="left">哈希值</td><td>hash_value</td><td>string[1,1024]</td><td>是</td><td>原始账单（gzip需要解压缩）的摘要值，用于校验文件的完整性。<br>示例值：79bb0f45fc4c42234a918000b2668d689e2bde04</td></tr><tr><td align="left">账单下载地址</td><td>download_url</td><td>string[1,2048]</td><td>是</td><td>供下一步请求账单文件的下载地址，该地址30s内有效。<br>示例值：https://api.mch.weixin.qq.com/v3/billdownload/file?token=xxx</td></tr><tr><td align="left">校验头</td><td>auth</td><td>string[1,2048]</td><td>否</td><td>https请求校验头，用于作为https校验的Authorization<br>如:auth取值为"Authorization: xxx" 则可通过<br> curl download_url -H 'Authorzation: xxx'的方法下载到账单文件数据流</td></tr></tbody></table></div><p data-sign="cb81607fb6658d4b39d11539d220192d" data-type="p" data-lines="3"><strong>示例文件</strong><br>交易账单文件内包含：明细数据表头、明细数据内容、汇总数据表头、汇总数据四个部分，每个字段使用英文逗号 , 间隔，明细数据内容每个字段前会增加1个字符 ` 用于避免获取的内容被excel展示为科学计数法的格式、丢失数据细节</p><p data-sign="68c68ed0b291752674d9dd4494e59eda" data-type="p" data-lines="2"><a href="https://pay.weixin.qq.com/wiki/doc/apiv3/download/ALL.xlsx" rel="nofollow">交易账单示例文件</a></p></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>