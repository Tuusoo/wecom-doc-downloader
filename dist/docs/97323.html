<!DOCTYPE html><html lang="zh-CN"><head>
                <meta charset="UTF-8">
                <title>查询订单 - 文档 - 企业微信开发者中心</title>
                <link rel="stylesheet" href="../doc-style.css">
                </head>
                <body>
                <div id="js-ep-doc-cnt" class="ep-doc-area-cnt">
    <div class="ep-doc-area-top" id="js-ep-doc-cnt-title">
      <div class="ep-doc-area-title">
        查询订单
      </div>
      <div class="ep-doc-area-subtitle">最后更新：2022/11/29</div>
    </div>
    <div class="ep-doc-area-cherry cherry-markdown cherry-wecom" id="js-ep-doc-cnt-md"><div data-inline-code-theme="red" data-code-block-theme="coy"><div data-sign="7091b949d592d604943723c814d8c598" data-type="div" data-lines="4">商户可以通过商户订单号查询订单，获取订单状态等信息，完成下一步的业务逻辑。<div class="colorful_tips colorful_tips_warning"><div class="colorful_tips_title"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSI4IiBmaWxsPSIjQjM2NzFEIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDNDNy40NDc3MiAzIDcgMy40NDc3MiA3IDRWOEM3IDguNTUyMjggNy40NDc3MiA5IDggOUM4LjU1MjI4IDkgOSA4LjU1MjI4IDkgOFY0QzkgMy40NDc3MiA4LjU1MjI4IDMgOCAzWk04IDExQzcuNDQ3NzIgMTEgNyAxMS40NDc3IDcgMTJDNyAxMi41NTIzIDcuNDQ3NzIgMTMgOCAxM0M4LjU1MjI4IDEzIDkgMTIuNTUyMyA5IDEyQzkgMTEuNDQ3NyA4LjU1MjI4IDExIDggMTFaIiBmaWxsPSJ3aGl0ZSIvPjwvc3ZnPg==">需要调用查询接口的情况</div><div class="colorful_tips_cnt">• 当商户后台、网络、服务器等出现异常，商户系统最终未接收到支付通知。<br>• 调用支付接口后，返回系统错误或未知交易状态情况。<br>• 调用关单或撤销接口API之前，需确认支付状态。<br></div></div></div><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="1742f75a620f74d2ad5677b0a3ac6b30" data-type="p" data-lines="2"><strong>请求方式：</strong> POST(HTTPS)<br><strong>请求地址：</strong>https://qyapi.weixin.qq.com/cgi-bin/miniapppay/get_order?access_token=ACCESS_TOKEN</p><p data-sign="br2" data-type="br" data-lines="2">&nbsp;</p><p data-sign="382edfac6a8b56ec46332834f416136e" data-type="p" data-lines="1"><strong>请求包体：</strong></p><div data-sign="864a815219dda5ae80df6d3e7da62212" data-type="codeBlock" data-lines="7">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">  <span class="token string">"mchid"</span> <span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">  <span class="token string">"out_trade_no"</span> <span class="token operator">:</span> <span class="token string">"xxx"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div class="cherry-table-container" data-sign="dfab3a77c034f1cf7d58c812483676fb" data-lines="4">
        <table class="cherry-table"><thead><tr><th>参数名</th><th>变量</th><th>类型[长度限制]</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>商户号</td><td>mchid</td><td>string[1,32]</td><td>是</td><td>二级商户号，由企业微信生成并下发。</td></tr><tr><td>商户订单号</td><td>out_trade_no</td><td>string[6,32]</td><td>是</td><td>商户系统内部订单号，只能是数字、大小 写字母_-*且在同一个商户号下唯一。</td></tr></tbody></table></div><p data-sign="br3" data-type="br" data-lines="3">&nbsp;</p><p data-sign="8c8bd07f58486862a201112e85376126" data-type="p" data-lines="1"><strong>返回结果：</strong></p><div data-sign="8877f18ab464f5caf468ff5b3e01e097" data-type="codeBlock" data-lines="13">
      <pre class="language-javascript"><code class="language-javascript wrap"><span class="code-line"><span class="token punctuation">{</span></span>
<span class="code-line">    <span class="token string">"mchid"</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"out_trade_no"</span><span class="token operator">:</span> <span class="token string">"xxxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"trade_state"</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"trade_state_desc"</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"payer"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="code-line">        <span class="token string">"openid"</span><span class="token operator">:</span> <span class="token string">"xxxxxx"</span></span>
<span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="code-line">    <span class="token string">"transaction_id"</span><span class="token operator">:</span> <span class="token string">"xxxxxxxx"</span></span>
<span class="code-line"><span class="token punctuation">}</span></span></code><div class="codeCopyBtn"></div><div class="codeCopyBtn_tips">点击复制</div></pre>
    </div><p data-sign="f2e21495051cadd2d5b0f8a3eedbae8d" data-type="p" data-lines="1"><strong>参数说明：</strong></p><div data-sign="831b3917da04fe2332067ec69949e615" data-lines="32" class="cherry-table-container">
        <table class="cherry-table"><thead><tr><th>参数名</th><th>变量</th><th>类型[长度限制]</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>商户号</td><td>mchid</td><td>string[1,32]</td><td>是</td><td>二级商户号，由企业微信生成并下发。</td></tr><tr><td>商户订单号</td><td>out_trade_no</td><td>string[6,32]</td><td>是</td><td>商户系统内部订单号，只能是数字、大小 写字母_-*且在同一个商户号下唯一。</td></tr><tr><td>交易类型</td><td>trade_type</td><td>string[1,16]</td><td>否</td><td>交易类型，枚举值：<br>JSAPI：公众号支付<br>NATIVE：扫码支付<br>APP：APP支付<br>MICROPAY：付款码支付<br>MWEB：H5支付<br>FACEPAY：刷脸支付<br>示例值：MICROPAY</td></tr><tr><td>交易状态</td><td>trade_state</td><td>string[1,32]</td><td>是</td><td>交易状态，枚举值：<br>SUCCESS：支付成功<br>REFUND：转入退款<br>NOTPAY：未支付<br>CLOSED：已关闭<br>REVOKED：已撤销（付款码支付<br>USERPAYING：用户支付中（付款码支付）<br>PAYERROR：支付失败(其他原因，如银行返回失败)<br>ACCEPT：已接收，等待扣款<br>示例值：SUCCESS</td></tr><tr><td>交易状态描述</td><td>trade_state_desc</td><td>string[1,256]</td><td>是</td><td>示例值：支付失败，请重新下单支付</td></tr><tr><td>支付者标识</td><td>payer.openid</td><td>string[1,128]</td><td>是</td><td>用户在子商户appid下的唯一标识。</td></tr><tr><td>微信支付订单号</td><td>transaction_id</td><td>string[1,32]</td><td>是</td><td>微信支付系统生成的订单号</td></tr><tr><td>付款银行</td><td>bank_type</td><td>string[1,32]</td><td>否</td><td>银行类型，采用字符串类型的银行标识。</td></tr><tr><td>附加数据</td><td>attach</td><td>string[1,128]</td><td>否</td><td>附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。</td></tr><tr><td>支付完成时间</td><td>success_time</td><td>string[1,64]</td><td>否</td><td>支付完成时间，遵循rfc3339标准格式，格式为yyyy-MM-DDTHH:mm:ss+TIMEZONE</td></tr><tr><td>订单总金额</td><td>amount.total</td><td>int</td><td>否</td><td>订单总金额，单位为分</td></tr><tr><td>用户支付金额</td><td>amount.payer_total</td><td>int</td><td>否</td><td>用户支付金额，单位为分</td></tr><tr><td>货币类型</td><td>amount.currency</td><td>string[1,16]</td><td>否</td><td>境内商户号仅支持人民币 CNY</td></tr><tr><td>用户支付币种</td><td>amount.payer_currency</td><td>string[1,16]</td><td>否</td><td>用户支付币种</td></tr><tr><td>商户端设备号</td><td>scene_info.total</td><td>string[1,32]</td><td>否</td><td>商户端设备号（发起扣款请求的商户服务器设备号）。</td></tr><tr><td>商品小票ID</td><td>promotion_detail.coupon_id</td><td>string[1,32]</td><td>否</td><td>商家小票ID</td></tr><tr><td>优惠名称</td><td>promotion_detail.name</td><td>string[1,64]</td><td>否</td><td>优惠名称</td></tr><tr><td>优惠范围</td><td>promotion_detail.scope</td><td>string[1,32]</td><td>否</td><td>GLOBAL：全场代金券<br>SINGLE：单品优惠</td></tr><tr><td>优惠类型</td><td>promotion_detail.type</td><td>string[1,32]</td><td>否</td><td>CASH：充值型代金券<br>NOCASH：免充值型代金券<br>示例值：CASH</td></tr><tr><td>优惠券面额</td><td>promotion_detail.amount</td><td>int</td><td>是</td><td>优惠券面额</td></tr><tr><td>活动ID</td><td>promotion_detail.stock_id</td><td>string[1,32]</td><td>否</td><td>活动ID</td></tr><tr><td>微信出资</td><td>promotion_detail.wechatpay_contribute</td><td>int</td><td>否</td><td>微信出资，单位为分</td></tr><tr><td>商户出资</td><td>promotion_detail.merchant_contribute</td><td>int</td><td>否</td><td>商户出资，单位为分</td></tr><tr><td>其他出资</td><td>promotion_detail.other_contribute</td><td>int</td><td>否</td><td>其他出资，单位为分</td></tr><tr><td>优惠币种</td><td>promotion_detail.currency</td><td>string[1,16]</td><td>否</td><td>CNY：人民币，境内商户号仅支持人民币。</td></tr><tr><td>商品编码</td><td>promotion_detail.goods_detail.goods_id</td><td>string[1,32]</td><td>是</td><td>商品编码</td></tr><tr><td>商品数量</td><td>promotion_detail.goods_detail.quantity</td><td>int</td><td>是</td><td>用户购买的数量</td></tr><tr><td>商品单价</td><td>promotion_detail.goods_detail.unit_price</td><td>int</td><td>是</td><td>商品单价，单位为分</td></tr><tr><td>商品优惠金额</td><td>promotion_detail.goods_detail.discount_amount</td><td>int</td><td>是</td><td>商品优惠金额</td></tr><tr><td>商品备注</td><td>promotion_detail.goods_detail.goods_remark</td><td>string[1,128]</td><td>否</td><td>商品备注信息</td></tr></tbody></table></div></div></div>
    </div>
                <script src="../doc-script.js"></script>
                
                
                </body></html>